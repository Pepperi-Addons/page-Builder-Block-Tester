{"version":3,"file":"pepperi-addons-ngx-lib-textbox.js","sources":["../../../projects/ngx-lib/textbox/textbox.component.ts","../../../projects/ngx-lib/textbox/textbox-validation.directive.ts","../../../projects/ngx-lib/textbox/textbox.module.ts","../../../projects/ngx-lib/textbox/public-api.ts","../../../projects/ngx-lib/textbox/pepperi-addons-ngx-lib-textbox.ts"],"sourcesContent":["import {\n    Component,\n    OnInit,\n    OnChanges,\n    Input,\n    Output,\n    EventEmitter,\n    ChangeDetectionStrategy,\n    ElementRef,\n    ViewChild,\n    Renderer2,\n    OnDestroy,\n    ChangeDetectorRef,\n    HostBinding,\n} from '@angular/core';\nimport { FormGroup, FormBuilder } from '@angular/forms';\nimport { TranslateService } from '@ngx-translate/core';\nimport {\n    PepLayoutType,\n    PepCustomizationService,\n    PepHorizontalAlignment,\n    DEFAULT_HORIZONTAL_ALIGNMENT,\n    PepTextboxFieldType,\n    PepTextboxField,\n    PepFieldBase,\n    PepUtilitiesService,\n} from '@pepperi-addons/ngx-lib';\n\n/**\n * This is a text box input component that can be use to\n *\n * @export\n * @class PepTextboxComponent\n * @implements {OnChanges}\n * @implements {OnInit}\n * @implements {OnDestroy}\n */\n@Component({\n    selector: 'pep-textbox',\n    templateUrl: './textbox.component.html',\n    styleUrls: ['./textbox.component.scss'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class PepTextboxComponent implements OnChanges, OnInit, OnDestroy {\n\n    @HostBinding('attr.data-qa') dataQa = '';\n\n    private _key: string = '';\n    /**\n     * The text box key\n     *\n     * @memberof PepTextboxComponent\n     */\n    @Input()\n    set key(value) {\n        this._key = value;\n        this.dataQa = value;\n    }\n    get key(): string {\n        return this._key;\n    }\n\n    private _value = null;\n    /**\n     * The value of the text box.\n     *\n     * @memberof PepTextboxComponent\n     */\n    @Input()\n    set value(value: string) {\n        if (!value) {\n            value = '';\n        }\n\n        this._value = value;\n\n        if (this._calculateFormattedValue) {\n            this.setFormattedValue(value);\n        }\n    }\n    get value(): string {\n        return this._value;\n    }\n\n    private _formattedValue = null;\n    /**\n     * The formatted value.\n     *\n     * @memberof PepTextboxComponent\n     */\n    @Input()\n    set formattedValue(value: string) {\n        if (!value) {\n            value = '';\n        }\n\n        if (this._calculateFormattedValue) {\n            this._calculateFormattedValue = false;\n        }\n\n        this.setFormattedValue(value);\n    }\n    get formattedValue(): string {\n        return this._formattedValue;\n    }\n\n    /**\n     * The title of the textbox.\n     *\n     * @memberof PepTextboxComponent\n     */\n    @Input() label = '';\n\n    /**\n     * The placeholder (relevant only for children - if parent isn't null).\n     *\n     * @memberof PepTextboxComponent\n     */\n    @Input() placeholder = '';\n\n    /**\n     * The type of the textbox.\n     *\n     * @type {PepTextboxFieldType}\n     * @memberof PepTextboxComponent\n     */\n    @Input() type: PepTextboxFieldType = 'text';\n\n    /**\n     * If the textbox is mandatory\n     *\n     * @memberof PepTextboxComponent\n     */\n    @Input() mandatory = false;\n\n    // TODO: Check if should remove disabled and keep only readonly.\n    /**\n     * If the textbox is disabled.\n     *\n     * @memberof PepTextboxComponent\n     */\n    @Input() disabled = false;\n\n    /**\n     * If the textbox is readonly\n     *\n     * @memberof PepTextboxComponent\n     */\n    @Input() readonly = false;\n    @Input() maxFieldCharacters: number;\n    @Input() textColor = '';\n    @Input() xAlignment: PepHorizontalAlignment = DEFAULT_HORIZONTAL_ALIGNMENT;\n    @Input() rowSpan = 1;\n    // @Input() lastFocusField: any;\n    @Input() minValue = NaN;\n    @Input() maxValue = NaN;\n\n    private _visible = true;\n    @Input()\n    set visible(visible: boolean) {\n        this._visible = visible;\n        if (visible) {\n            this.renderer.removeClass(\n                this.element.nativeElement,\n                'hidden-element'\n            );\n        } else {\n            this.renderer.addClass(\n                this.element.nativeElement,\n                'hidden-element'\n            );\n        }\n    }\n    get visible(): boolean {\n        return this._visible;\n    }\n\n    @Input() form: FormGroup = null;\n    @Input() isActive = false;\n    @Input() showTitle = true;\n    @Input() renderTitle = true;\n    @Input() renderError = true;\n    @Input() renderSymbol = true;\n    @Input() layoutType: PepLayoutType = 'form';\n    @Input() parentFieldKey: string = null;\n\n    /**\n     * The value change event.\n     *\n     * @type {EventEmitter<string>}\n     * @memberof PepTextboxComponent\n     */\n    @Output()\n    valueChange: EventEmitter<string> = new EventEmitter<string>();\n\n    @Output()\n    formValidationChange: EventEmitter<boolean> = new EventEmitter<boolean>();\n\n    @ViewChild('input') input: ElementRef;\n\n    private _calculateFormattedValue = true;\n    get calculateFormattedValue(): boolean {\n        return this._calculateFormattedValue;\n    }\n\n    controlType = 'textbox';\n\n    standAlone = false;\n    isInEditMode = false;\n    isInFocus: boolean;\n\n    constructor(\n        public fb: FormBuilder,\n        private customizationService: PepCustomizationService,\n        private renderer: Renderer2,\n        private element: ElementRef,\n        private translate: TranslateService,\n        private utilitiesService: PepUtilitiesService\n    ) {\n        this.isInFocus = false;\n    }\n\n    private setFormattedValue(value: string) {\n        if (this._calculateFormattedValue) {\n            this._formattedValue = this.isNumberType()\n                ? this.utilitiesService.formatNumber(value)\n                : value;\n        } else {\n            this._formattedValue = value;\n        }\n\n        this.updateFormFieldValue();\n    }\n\n    private updateFormFieldValue() {\n        this.customizationService.updateFormFieldValue(\n            this.form,\n            this.key,\n            this.formattedValue,\n            this.parentFieldKey\n        );\n    }\n\n    get displayValue(): string {\n        let res = '';\n\n        if (this.type == 'link') {\n            res = this.formattedValue;\n        } else {\n            res = this.isInFocus ? this.value : this.formattedValue;\n        }\n\n        return res;\n    }\n\n    private setDefaultForm(): void {\n        const pepField = new PepTextboxField({\n            key: this.key,\n            value: this.value,\n            mandatory: this.mandatory,\n            readonly: this.readonly,\n            disabled: this.disabled,\n            maxFieldCharacters: this.maxFieldCharacters,\n            type: this.type,\n            minValue: this.minValue,\n            maxValue: this.maxValue,\n        });\n        this.form = this.customizationService.getDefaultFromGroup(\n            pepField,\n            this.renderError\n        );\n    }\n\n    ngOnInit(): void {\n        if (this.form === null) {\n            this.standAlone = true;\n\n            this.minValue =\n                isNaN(this.minValue) && !isNaN(this.maxValue)\n                    ? 0\n                    : this.minValue;\n            this.maxValue =\n                isNaN(this.maxValue) && !isNaN(this.minValue)\n                    ? 99999\n                    : this.maxValue;\n\n            this.setDefaultForm();\n\n            this.renderer.addClass(\n                this.element.nativeElement,\n                PepCustomizationService.STAND_ALONE_FIELD_CLASS_NAME\n            );\n        }\n\n        this.readonly = this.type === 'duration' ? true : this.readonly; // Hack until we develop Timer UI for editing Duration field\n\n        this.updateFormFieldValue();\n    }\n\n    ngOnChanges(changes: any): void {\n        if (this.standAlone) {\n            this.setDefaultForm();\n        }\n\n        this.readonly = this.type === 'duration' ? true : this.readonly; // Hack until we develop Timer UI for editing Duration field\n    }\n\n    ngOnDestroy(): void {\n        //\n    }\n\n    onFocus(event: any): void {\n        this.isInFocus = true;\n\n        // select the value in focus (DI-18246 improvement)\n        setTimeout(() => {\n            const eventTarget = event.target || event.srcElement;\n            if (eventTarget) {\n                eventTarget.select();\n            }\n        }, 0);\n    }\n\n    isNumberType(): boolean {\n        return (\n            this.type === 'percentage' ||\n            this.type === 'currency' ||\n            this.type === 'int' ||\n            this.type === 'real'\n        );\n    }\n\n    isValueValid(value: string): boolean {\n        let res = false;\n\n        if (this.isNumberType()) {\n            if (value === '') {\n                res = this.mandatory ? false : true;\n            } else {\n                const numberValue = this.utilitiesService.coerceNumberProperty(\n                    value\n                );\n                res =\n                    numberValue >= this.minValue &&\n                    numberValue <= this.maxValue;\n            }\n        } else {\n            // TODO: Maybe need to check other types.\n            res = true;\n        }\n\n        return res;\n    }\n\n    isDifferentValue(value: string): boolean {\n        let res = false;\n\n        if (this.isNumberType()) {\n            if (this.value === '' || value === '') {\n                res = true;\n            } else {\n                const currentValue = this.utilitiesService.coerceNumberProperty(\n                    this.value\n                );\n                const newValue = this.utilitiesService.coerceNumberProperty(\n                    value\n                );\n\n                res = currentValue !== newValue;\n            }\n        } else {\n            res = true;\n        }\n\n        return res;\n    }\n\n    onChange(e: any): void {\n        const value = e.target ? e.target.value : e;\n\n        // TODO: uncomment\n        // this.valueChange.emit(value);\n    }\n\n    onBlur(e: any): void {\n        this.isInFocus = false;\n        const value = e.target ? e.target.value : e;\n        if (value !== this.value && this.isDifferentValue(value)) {\n            // If renderError is false and the new value is not valid.\n            if (!this.renderError && !this.isValueValid(value)) {\n                this.renderer.setProperty(\n                    this.input.nativeElement,\n                    'value',\n                    this.value\n                );\n            } else {\n                this.value = value;\n\n                // If the user is setting the formatted value then set the value till the user format it and return it back.\n                if (!this._calculateFormattedValue) {\n                    this._formattedValue = value;\n                }\n\n                this.valueChange.emit(value);\n            }\n        }\n\n        if (this.isInEditMode) {\n            this.isInEditMode = false;\n        }\n    }\n\n    anchorClicked(): void {\n        const currentValue = this.value;\n        if (currentValue.trim().length > 0) {\n            switch (this.type) {\n                case 'email':\n                    window.open('mailto:' + currentValue, 'email');\n                    break;\n                case 'phone':\n                    window.open('tel:' + currentValue, 'tel');\n                    break;\n                case 'link':\n                    window.open(currentValue);\n                    break;\n                default:\n                    break;\n            }\n        }\n    }\n\n    cardTemplateClicked(event: any): void {\n        this.isInEditMode = true;\n\n        setTimeout(() => {\n            this.input.nativeElement.focus();\n        }, 0);\n    }\n}\n","import {\n    Directive,\n    ElementRef,\n    HostListener,\n    Input,\n    OnInit,\n} from '@angular/core';\nimport {\n    PepTextboxFieldType,\n    PepValidatorService,\n} from '@pepperi-addons/ngx-lib';\n\n@Directive({\n    selector: '[pepTextboxValidation]',\n})\nexport class PepTextboxValidationDirective implements OnInit {\n    @Input() type: PepTextboxFieldType = 'text';\n\n    previousValue = '';\n\n    constructor(\n        private hostElement: ElementRef,\n        private validatorService: PepValidatorService\n    ) {}\n\n    ngOnInit() {\n        //\n    }\n\n    private isNumber(): boolean {\n        return this.isInteger() || this.isDecimal();\n    }\n\n    private isInteger(): boolean {\n        return this.type === 'int';\n    }\n\n    private isDecimal(): boolean {\n        return (\n            this.type === 'currency' ||\n            this.type === 'percentage' ||\n            this.type === 'real'\n        );\n    }\n\n    private isPhone(): boolean {\n        return this.type === 'phone';\n    }\n\n    private isText(): boolean {\n        return (\n            this.type === 'email' ||\n            this.type === 'link' ||\n            this.type === 'text'\n        );\n    }\n\n    @HostListener('change', ['$event'])\n    onChange(e) {\n        this.validateValue(this.hostElement.nativeElement.value);\n    }\n\n    @HostListener('keydown', ['$event'])\n    onKeyDown(e: KeyboardEvent) {\n        const originalValue: string = e.target['value'];\n\n        if (this.isNumber()) {\n            // save value before keydown event\n            this.previousValue = originalValue;\n            const isNumber = this.validatorService.isNumber(\n                e,\n                this.isDecimal()\n            );\n\n            if (isNumber) return;\n            else e.preventDefault();\n        } else if (this.isPhone()) {\n            const isPhone = this.validatorService.isPhone(e);\n            if (isPhone) return;\n            else e.preventDefault();\n        }\n    }\n\n    validateValue(value: string): void {\n        if (this.isNumber()) {\n            const newValue = this.validatorService.validateNumber(\n                value,\n                this.isDecimal()\n            );\n            this.hostElement.nativeElement['value'] = newValue ? newValue : 0;\n        } else if (this.isPhone()) {\n            // test phone with regular expression, when\n            // phone is invalid, replace it with the previousValue\n            const valid = this.validatorService.validatePhone(value);\n            this.hostElement.nativeElement['value'] = valid\n                ? value\n                : this.previousValue;\n        } else if (this.isText()) {\n            this.hostElement.nativeElement['value'] = value;\n        }\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule } from '@angular/forms';\n\nimport { MatCommonModule } from '@angular/material/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatIconModule } from '@angular/material/icon';\n\nimport { PepNgxLibModule } from '@pepperi-addons/ngx-lib';\nimport {\n    PepIconModule,\n    PepIconRegistry,\n    pepIconSystemEdit,\n} from '@pepperi-addons/ngx-lib/icon';\nimport { PepTextboxIconModule } from '@pepperi-addons/ngx-lib/textbox-icon';\nimport { PepFieldTitleModule } from '@pepperi-addons/ngx-lib/field-title';\n\nimport { PepTextboxComponent } from './textbox.component';\nimport { PepTextboxValidationDirective } from './textbox-validation.directive';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        ReactiveFormsModule,\n        // Material modules,\n        MatCommonModule,\n        MatButtonModule,\n        MatFormFieldModule,\n        MatInputModule,\n        MatIconModule,\n        // ngx-lib modules\n        PepNgxLibModule,\n        PepIconModule,\n        PepFieldTitleModule,\n        PepTextboxIconModule,\n    ],\n    exports: [PepTextboxComponent],\n    declarations: [PepTextboxComponent, PepTextboxValidationDirective],\n})\nexport class PepTextboxModule {\n    constructor(private pepIconRegistry: PepIconRegistry) {\n        this.pepIconRegistry.registerIcons([pepIconSystemEdit]);\n    }\n}\n","/*\n * Public API Surface of ngx-lib/textbox\n */\nexport * from './textbox.module';\nexport * from './textbox.component';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n\nexport {PepTextboxValidationDirective as Éµa} from './textbox-validation.directive';"],"names":[],"mappings":"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"}