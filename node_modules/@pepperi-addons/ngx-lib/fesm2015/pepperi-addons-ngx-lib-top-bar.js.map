{"version":3,"file":"pepperi-addons-ngx-lib-top-bar.js","sources":["../../../projects/ngx-lib/top-bar/top-bar.component.ts","../../../projects/ngx-lib/top-bar/top-bar.module.ts","../../../projects/ngx-lib/top-bar/public-api.ts","../../../projects/ngx-lib/top-bar/pepperi-addons-ngx-lib-top-bar.ts"],"sourcesContent":["import {\n    AfterContentInit,\n    ChangeDetectorRef,\n    ContentChild,\n    ElementRef,\n    OnDestroy,\n    ViewChild,\n} from '@angular/core';\nimport {\n    AfterViewInit,\n    Component,\n    EventEmitter,\n    Input,\n    Output,\n} from '@angular/core';\nimport {\n    PepCustomizationService,\n    PepLayoutService,\n    PepScreenSizeType,\n} from '@pepperi-addons/ngx-lib';\nimport { PepSearchComponent } from '@pepperi-addons/ngx-lib/search';\nimport {\n    PepListActionsComponent,\n    PepListChooserComponent,\n    PepListSortingComponent,\n    PepListTotalComponent,\n    PepListViewsComponent,\n} from '@pepperi-addons/ngx-lib/list';\nimport { PepMenuStateType } from '@pepperi-addons/ngx-lib/menu';\nimport {\n    IPepSearchStateChangeEvent,\n    PepSearchStateType,\n} from '@pepperi-addons/ngx-lib/search';\nimport {\n    IPepFooterStateChangeEvent,\n    PepFooterStateType,\n} from './top-bar.model';\n\n@Component({\n    selector: 'pep-top-bar',\n    templateUrl: './top-bar.component.html',\n    styleUrls: ['./top-bar.component.scss'],\n})\nexport class PepTopBarComponent implements AfterViewInit, AfterContentInit, OnDestroy {\n    @Input() inline = false;\n    @Input() title: string = null;\n\n    @Output()\n    footerStateChange: EventEmitter<IPepFooterStateChangeEvent> = new EventEmitter<IPepFooterStateChangeEvent>();\n\n    @ViewChild('footerStartContent') footerStartContent: ElementRef;\n    @ViewChild('footerEndContent') footerEndContent: ElementRef;\n\n    @ContentChild(PepSearchComponent) searchComp: PepSearchComponent;\n    @ContentChild(PepListActionsComponent)\n    listActionsComp: PepListActionsComponent;\n    @ContentChild(PepListChooserComponent)\n    listChooserComp: PepListChooserComponent;\n    @ContentChild(PepListTotalComponent) listTotalComp: PepListTotalComponent;\n    @ContentChild(PepListSortingComponent)\n    listSortingComp: PepListSortingComponent;\n    @ContentChild(PepListViewsComponent) listViewsComp: PepListViewsComponent;\n\n    hasFooterContent = null;\n    isHidden = true;\n    screenSize: PepScreenSizeType;\n    // listActionsIsVisible = false;\n    searchState: PepSearchStateType;\n    searchIsOpenAndSmallDevice = false;\n    footerState: PepFooterStateType;\n    PepScreenSizeType = PepScreenSizeType;\n\n    constructor(\n        public customizationService: PepCustomizationService,\n        public layoutService: PepLayoutService,\n        private cdRef: ChangeDetectorRef\n    ) { }\n\n    ngAfterViewInit(): void {\n        if (!this.inline) {\n            this.hasFooterContent =\n                this.footerStartContent?.nativeElement?.children?.length > 0 ||\n                this.footerEndContent?.nativeElement?.children?.length > 0;\n        }\n\n        this.layoutService.onResize$.subscribe((size: PepScreenSizeType) => {\n            this.screenSize = size;\n            this.setSearchIsOpenAndSmallDevice();\n\n            if (!this.inline) {\n                this.setFooterState();\n            }\n        });\n\n        this.isHidden = false;\n        this.cdRef.detectChanges();\n    }\n\n    ngAfterContentInit() {\n        if (this.searchComp) {\n            this.searchComp.stateChange\n                .subscribe(\n                    (searchStateChangeEvent: IPepSearchStateChangeEvent) => {\n                        this.searchState = searchStateChangeEvent.state;\n                        this.setSearchIsOpenAndSmallDevice();\n                    }\n                )\n                .unsubscribe();\n        }\n    }\n\n    ngOnDestroy(): void {\n        if (this.customizationService) {\n            this.customizationService.hideFooter();\n        }\n    }\n\n    private setSearchIsOpenAndSmallDevice(): void {\n        // check if search is open and the device size is small or extra small\n        this.searchIsOpenAndSmallDevice =\n            this.screenSize > PepScreenSizeType.SM &&\n            this.searchState === 'open';\n    }\n\n    private setFooterState() {\n        const newFooterState: PepFooterStateType =\n            this.hasFooterContent && this.screenSize >= PepScreenSizeType.MD\n                ? 'visible'\n                : 'hidden';\n\n        if (this.footerState !== newFooterState) {\n            this.footerState = newFooterState;\n            this.cdRef.detectChanges();\n            this.footerStateChange.emit({ state: this.footerState });\n\n            if (this.footerState === 'visible') {\n                this.customizationService.showFooter()\n            } else {\n                this.customizationService.hideFooter()\n            }\n        }\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { MatCommonModule } from '@angular/material/core';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatIconModule } from '@angular/material/icon';\n\nimport { PepNgxLibModule } from '@pepperi-addons/ngx-lib';\nimport { PepMenuModule } from '@pepperi-addons/ngx-lib/menu';\nimport {\n    PepIconModule,\n    PepIconRegistry,\n    pepIconSystemMenu,\n    pepIconSystemEdit,\n} from '@pepperi-addons/ngx-lib/icon';\nimport { PepSearchModule } from '@pepperi-addons/ngx-lib/search';\n\nimport { PepTopBarComponent } from './top-bar.component';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        // Material modules,\n        MatCommonModule,\n        MatMenuModule,\n        MatIconModule,\n        // ngx-lib modules\n        PepNgxLibModule,\n        PepMenuModule,\n        PepIconModule,\n        PepSearchModule,\n    ],\n    exports: [PepTopBarComponent],\n    declarations: [PepTopBarComponent],\n})\nexport class PepTopBarModule {\n    constructor(private pepIconRegistry: PepIconRegistry) {\n        this.pepIconRegistry.registerIcons([\n            pepIconSystemMenu,\n            pepIconSystemEdit,\n        ]);\n    }\n}\n","/*\n * Public API Surface of ngx-lib/top-bar\n */\nexport * from './top-bar.module';\nexport * from './top-bar.component';\nexport * from './top-bar.model';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}