import { Injectable } from '@angular/core';
import { PepHttpService } from '@pepperi-addons/ngx-lib';
export class PepInternalPageService {
    constructor(httpService) {
        this.httpService = httpService;
        this.parentId = '0';
        this.additionalApiName = '';
        this.transactionUrl = 'Service1.svc/v1/OrderCenter/Transaction/';
    }
    getBaseParentUrl() {
        const url = `${this.transactionUrl}${this.objectId}/ParentLine/${this.parentId}/`;
        return url;
    }
    getChildren(callbackFunc) {
        var _a;
        const body = JSON.stringify({
            TransactionUID: this.objectId,
            SearchCode: this.searchCode,
            AdditionalApiName: this.additionalApiName,
            ParentTransactionLineID: this.parentId,
            ViewType: this.viewType,
        });
        // Set the additional api name with view type string.
        const moreParams = ((_a = this.additionalApiName) === null || _a === void 0 ? void 0 : _a.length) > 0
            ? `${this.additionalApiName}/${this.viewType}`
            : `''/${this.viewType}`;
        const url = `${this.getBaseParentUrl()}Items/${moreParams}`;
        this.httpService.postWapiApiCall(url, body).subscribe((res) => {
            callbackFunc(res);
        }
        // (error) => {},
        // () => {}
        );
    }
    initDetails(objectId, parentId, searchCode, callbackFunc) {
        if (!objectId || !parentId) {
            return;
        }
        this.objectId = objectId;
        this.parentId = parentId;
        this.searchCode = searchCode;
        this.httpService
            .getWapiApiCall(`${this.getBaseParentUrl()}ViewTypes`)
            .subscribe((res) => {
            callbackFunc(res);
        }
        // (error) => {},
        // () => {}
        );
    }
    changeChildrenViewType(viewType, callbackFunc) {
        this.viewType = viewType;
        this.getChildren(callbackFunc);
    }
    changeAdditionalApiName(additionalApiName, callbackFunc) {
        this.additionalApiName = additionalApiName;
        this.getChildren(callbackFunc);
    }
    childPlusClick(itemId, fieldApiName, callbackFunc) {
        const body = JSON.stringify({
            TransactionUID: this.objectId,
            SearchCode: this.searchCode,
            ParentTransactionLineID: this.parentId,
            TransactionLineUID: itemId,
            FieldApiName: fieldApiName,
            ViewType: this.viewType,
        });
        this.httpService
            .postWapiApiCall(`${this.getBaseParentUrl()}IncrementValue`, body)
            .subscribe((res) => {
            callbackFunc(res);
        }
        // (error) => {},
        // () => {}
        );
    }
    childMinusClick(itemId, fieldApiName, callbackFunc) {
        const body = JSON.stringify({
            TransactionUID: this.objectId,
            SearchCode: this.searchCode,
            ParentTransactionLineID: this.parentId,
            TransactionLineUID: itemId,
            FieldApiName: fieldApiName,
            ViewType: this.viewType,
        });
        this.httpService
            .postWapiApiCall(`${this.getBaseParentUrl()}DecrementValue`, body)
            .subscribe((res) => {
            callbackFunc(res);
        }
        // (error) => {},
        // () => {}
        );
    }
    childValueChanged(itemId, fieldApiName, value, callbackFunc) {
        const body = JSON.stringify({
            TransactionUID: this.objectId,
            SearchCode: this.searchCode,
            ParentTransactionLineID: this.parentId,
            TransactionLineUID: itemId,
            FieldApiName: fieldApiName,
            FieldValue: value,
            ViewType: this.viewType,
        });
        this.httpService
            .postWapiApiCall(`${this.getBaseParentUrl()}SetFieldValue`, body)
            .subscribe((res) => {
            callbackFunc(res);
        }
        // (error) => {},
        // () => {}
        );
    }
}
PepInternalPageService.decorators = [
    { type: Injectable }
];
PepInternalPageService.ctorParameters = () => [
    { type: PepHttpService }
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW50ZXJuYWwtcGFnZS5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vcHJvamVjdHMvbmd4LWxpYi9mb3JtL2ludGVybmFsLXBhZ2Uuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNDLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSx5QkFBeUIsQ0FBQztBQUd6RCxNQUFNLE9BQU8sc0JBQXNCO0lBUS9CLFlBQW9CLFdBQTJCO1FBQTNCLGdCQUFXLEdBQVgsV0FBVyxDQUFnQjtRQUx2QyxhQUFRLEdBQUcsR0FBRyxDQUFDO1FBR2hCLHNCQUFpQixHQUFHLEVBQUUsQ0FBQztRQUcxQixJQUFJLENBQUMsY0FBYyxHQUFHLDBDQUEwQyxDQUFDO0lBQ3JFLENBQUM7SUFFRCxnQkFBZ0I7UUFDWixNQUFNLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDLFFBQVEsZUFBZSxJQUFJLENBQUMsUUFBUSxHQUFHLENBQUM7UUFDbEYsT0FBTyxHQUFHLENBQUM7SUFDZixDQUFDO0lBRUQsV0FBVyxDQUFDLFlBQWlCOztRQUN6QixNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDO1lBQ3hCLGNBQWMsRUFBRSxJQUFJLENBQUMsUUFBUTtZQUM3QixVQUFVLEVBQUUsSUFBSSxDQUFDLFVBQVU7WUFDM0IsaUJBQWlCLEVBQUUsSUFBSSxDQUFDLGlCQUFpQjtZQUN6Qyx1QkFBdUIsRUFBRSxJQUFJLENBQUMsUUFBUTtZQUN0QyxRQUFRLEVBQUUsSUFBSSxDQUFDLFFBQVE7U0FDMUIsQ0FBQyxDQUFDO1FBRUgscURBQXFEO1FBQ3JELE1BQU0sVUFBVSxHQUNaLENBQUEsTUFBQSxJQUFJLENBQUMsaUJBQWlCLDBDQUFFLE1BQU0sSUFBRyxDQUFDO1lBQzlCLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxp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QUFFLElBQUksQ0FBQzthQUNqRSxTQUFTLENBQ04sQ0FBQyxHQUFHLEVBQUUsRUFBRTtZQUNKLFlBQVksQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUN0QixDQUFDO1FBQ0QsaUJBQWlCO1FBQ2pCLFdBQVc7U0FDZCxDQUFDO0lBQ1YsQ0FBQztJQUVELGlCQUFpQixDQUNiLE1BQWMsRUFDZCxZQUFvQixFQUNwQixLQUFhLEVBQ2IsWUFBaUI7UUFFakIsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQztZQUN4QixjQUFjLEVBQUUsSUFBSSxDQUFDLFFBQVE7WUFDN0IsVUFBVSxFQUFFLElBQUksQ0FBQyxVQUFVO1lBQzNCLHVCQUF1QixFQUFFLElBQUksQ0FBQyxRQUFRO1lBQ3RDLGtCQUFrQixFQUFFLE1BQU07WUFDMUIsWUFBWSxFQUFFLFlBQVk7WUFDMUIsVUFBVSxFQUFFLEtBQUs7WUFDakIsUUFBUSxFQUFFLElBQUksQ0FBQyxRQUFRO1NBQzFCLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxXQUFXO2FBQ1gsZUFBZSxDQUFDLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixFQUFFLGVBQWUsRUFBRSxJQUFJLENBQUM7YUFDaEUsU0FBUyxDQUNOLENBQUMsR0FBRyxFQUFFLEVBQUU7WUFDSixZQUFZLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDdEIsQ0FBQztRQUNELGlCQUFpQjtRQUNqQixXQUFXO1NBQ2QsQ0FBQztJQUNWLENBQUM7OztZQTdKSixVQUFVOzs7WUFGRixjQUFjIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgUGVwSHR0cFNlcnZpY2UgfSBmcm9tICdAcGVwcGVyaS1hZGRvbnMvbmd4LWxpYic7XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBQZXBJbnRlcm5hbFBhZ2VTZXJ2aWNlIHtcbiAgICBwcml2YXRlIHRyYW5zYWN0aW9uVXJsOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBvYmplY3RJZDogc3RyaW5nO1xuICAgIHByaXZhdGUgcGFyZW50SWQgPSAnMCc7XG4gICAgcHJpdmF0ZSBzZWFyY2hDb2RlOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSB2aWV3VHlwZTogc3RyaW5nO1xuICAgIHB1YmxpYyBhZGRpdGlvbmFsQXBpTmFtZSA9ICcnO1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBodHRwU2VydmljZTogUGVwSHR0cFNlcnZpY2UpIHtcbiAgICAgICAgdGhpcy50cmFuc2FjdGlvblVybCA9ICdTZXJ2aWNlMS5zdmMvdjEvT3JkZXJDZW50ZXIvVHJhbnNhY3Rpb24vJztcbiAgICB9XG5cbiAgICBnZXRCYXNlUGFyZW50VXJsKCk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IHVybCA9IGAke3RoaXMudHJhbnNhY3Rpb25Vcmx9JHt0aGlzLm9iamVjdElkfS9QYXJlbnRMaW5lLyR7dGhpcy5wYXJlbnRJZH0vYDtcbiAgICAgICAgcmV0dXJuIHVybDtcbiAgICB9XG5cbiAgICBnZXRDaGlsZHJlbihjYWxsYmFja0Z1bmM6IGFueSk6IHZvaWQge1xuICAgICAgICBjb25zdCBib2R5ID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgVHJhbnNhY3Rpb25VSUQ6IHRoaXMub2JqZWN0SWQsXG4gICAgICAgICAgICBTZWFyY2hDb2RlOiB0aGlzLnNlYXJjaENvZGUsXG4gICAgICAgICAgICBBZGRpdGlvbmFsQXBpTmFtZTogdGhpcy5hZGRpdGlvbmFsQXBpTmFtZSxcbiAgICAgICAgICAgIFBhcmVudFRyYW5zYWN0aW9uTGluZUlEOiB0aGlzLnBhcmVudElkLFxuICAgICAgICAgICAgVmlld1R5cGU6IHRoaXMudmlld1R5cGUsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFNldCB0aGUgYWRkaXRpb25hbCBhcGkgbmFtZSB3aXRoIHZpZXcgdHlwZSBzdHJpbmcuXG4gICAgICAgIGNvbnN0IG1vcmVQYXJhbXMgPVxuICAgICAgICAgICAgdGhpcy5hZGRpdGlvbmFsQXBpTmFtZT8ubGVuZ3RoID4gMFxuICAgICAgICAgICAgICAgID8gYCR7dGhpcy5hZGRpdGlvbmFsQXBpTmFtZX0vJHt0aGlzLnZpZXdUeXBlfWBcbiAgICAgICAgICAgICAgICA6IGAnJy8ke3RoaXMudmlld1R5cGV9YDtcblxuICAgICAgICBjb25zdCB1cmwgPSBgJHt0aGlzLmdldEJhc2VQYXJlbnRVcmwoKX1JdGVtcy8ke21vcmVQYXJhbXN9YDtcblxuICAgICAgICB0aGlzLmh0dHBTZXJ2aWNlLnBvc3RXYXBpQXBpQ2FsbCh1cmwsIGJvZHkpLnN1YnNjcmliZShcbiAgICAgICAgICAgIChyZXMpID0+IHtcbiAgICAgICAgICAgICAgICBjYWxsYmFja0Z1bmMocmVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIChlcnJvcikgPT4ge30sXG4gICAgICAgICAgICAvLyAoKSA9PiB7fVxuICAgICAgICApO1xuICAgIH1cblxuICAgIGluaXREZXRhaWxzKFxuICAgICAgICBvYmplY3RJZDogc3RyaW5nLFxuICAgICAgICBwYXJlbnRJZDogc3RyaW5nLFxuICAgICAgICBzZWFyY2hDb2RlOiBzdHJpbmcsXG4gICAgICAgIGNhbGxiYWNrRnVuYzogYW55XG4gICAgKTogdm9pZCB7XG4gICAgICAgIGlmICghb2JqZWN0SWQgfHwgIXBhcmVudElkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm9iamVjdElkID0gb2JqZWN0SWQ7XG4gICAgICAgIHRoaXMucGFyZW50SWQgPSBwYXJlbnRJZDtcbiAgICAgICAgdGhpcy5zZWFyY2hDb2RlID0gc2VhcmNoQ29kZTtcblxuICAgICAgICB0aGlzLmh0dHBTZXJ2aWNlXG4gICAgICAgICAgICAuZ2V0V2FwaUFwaUNhbGwoYCR7dGhpcy5nZXRCYXNlUGFyZW50VXJsKCl9Vmlld1R5cGVzYClcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoXG4gICAgICAgICAgICAgICAgKHJlcykgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja0Z1bmMocmVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gKGVycm9yKSA9PiB7fSxcbiAgICAgICAgICAgICAgICAvLyAoKSA9PiB7fVxuICAgICAgICAgICAgKTtcbiAgICB9XG5cbiAgICBjaGFuZ2VDaGlsZHJlblZpZXdUeXBlKHZpZXdUeXBlOiBzdHJpbmcsIGNhbGxiYWNrRnVuYzogYW55KTogdm9pZCB7XG4gICAgICAgIHRoaXMudmlld1R5cGUgPSB2aWV3VHlwZTtcbiAgICAgICAgdGhpcy5nZXRDaGlsZHJlbihjYWxsYmFja0Z1bmMpO1xuICAgIH1cblxuICAgIGNoYW5nZUFkZGl0aW9uYWxBcGlOYW1lKFxuICAgICAgICBhZGRpdGlvbmFsQXBpTmFtZTogc3RyaW5nLFxuICAgICAgICBjYWxsYmFja0Z1bmM6IGFueVxuICAgICk6IHZvaWQge1xuICAgICAgICB0aGlzLmFkZGl0aW9uYWxBcGlOYW1lID0gYWRkaXRpb25hbEFwaU5hbWU7XG4gICAgICAgIHRoaXMuZ2V0Q2hpbGRyZW4oY2FsbGJhY2tGdW5jKTtcbiAgICB9XG5cbiAgICBjaGlsZFBsdXNDbGljayhcbiAgICAgICAgaXRlbUlkOiBzdHJpbmcsXG4gICAgICAgIGZpZWxkQXBpTmFtZTogc3RyaW5nLFxuICAgICAgICBjYWxsYmFja0Z1bmM6IGFueVxuICAgICk6IHZvaWQge1xuICAgICAgICBjb25zdCBib2R5ID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgVHJhbnNhY3Rpb25VSUQ6IHRoaXMub2JqZWN0SWQsXG4gICAgICAgICAgICBTZWFyY2hDb2RlOiB0aGlzLnNlYXJjaENvZGUsXG4gICAgICAgICAgICBQYXJlbnRUcmFuc2FjdGlvbkxpbmVJRDogdGhpcy5wYXJlbnRJZCxcbiAgICAgICAgICAgIFRyYW5zYWN0aW9uTGluZVVJRDogaXRlbUlkLFxuICAgICAgICAgICAgRmllbGRBcGlOYW1lOiBmaWVsZEFwaU5hbWUsXG4gICAgICAgICAgICBWaWV3VHlwZTogdGhpcy52aWV3VHlwZSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5odHRwU2VydmljZVxuICAgICAgICAgICAgLnBvc3RXYXBpQXBpQ2FsbChgJHt0aGlzLmdldEJhc2VQYXJlbnRVcmwoKX1JbmNyZW1lbnRWYWx1ZWAsIGJvZHkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKFxuICAgICAgICAgICAgICAgIChyZXMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tGdW5jKHJlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIChlcnJvcikgPT4ge30sXG4gICAgICAgICAgICAgICAgLy8gKCkgPT4ge31cbiAgICAgICAgICAgICk7XG4gICAgfVxuXG4gICAgY2hpbGRNaW51c0NsaWNrKFxuICAgICAgICBpdGVtSWQ6IHN0cmluZyxcbiAgICAgICAgZmllbGRBcGlOYW1lOiBzdHJpbmcsXG4gICAgICAgIGNhbGxiYWNrRnVuYzogYW55XG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGJvZHkgPSBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICBUcmFuc2FjdGlvblVJRDogdGhpcy5vYmplY3RJZCxcbiAgICAgICAgICAgIFNlYXJjaENvZGU6IHRoaXMuc2VhcmNoQ29kZSxcbiAgICAgICAgICAgIFBhcmVudFRyYW5zYWN0aW9uTGluZUlEOiB0aGlzLnBhcmVudElkLFxuICAgICAgICAgICAgVHJhbnNhY3Rpb25MaW5lVUlEOiBpdGVtSWQsXG4gICAgICAgICAgICBGaWVsZEFwaU5hbWU6IGZpZWxkQXBpTmFtZSxcbiAgICAgICAgICAgIFZpZXdUeXBlOiB0aGlzLnZpZXdUeXBlLFxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmh0dHBTZXJ2aWNlXG4gICAgICAgICAgICAucG9zdFdhcGlBcGlDYWxsKGAke3RoaXMuZ2V0QmFzZVBhcmVudFVybCgpfURlY3JlbWVudFZhbHVlYCwgYm9keSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoXG4gICAgICAgICAgICAgICAgKHJlcykgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja0Z1bmMocmVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gKGVycm9yKSA9PiB7fSxcbiAgICAgICAgICAgICAgICAvLyAoKSA9PiB7fVxuICAgICAgICAgICAgKTtcbiAgICB9XG5cbiAgICBjaGlsZFZhbHVlQ2hhbmdlZChcbiAgICAgICAgaXRlbUlkOiBzdHJpbmcsXG4gICAgICAgIGZpZWxkQXBpTmFtZTogc3RyaW5nLFxuICAgICAgICB2YWx1ZTogc3RyaW5nLFxuICAgICAgICBjYWxsYmFja0Z1bmM6IGFueVxuICAgICk6IHZvaWQge1xuICAgICAgICBjb25zdCBib2R5ID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgVHJhbnNhY3Rpb25VSUQ6IHRoaXMub2JqZWN0SWQsXG4gICAgICAgICAgICBTZWFyY2hDb2RlOiB0aGlzLnNlYXJjaENvZGUsXG4gICAgICAgICAgICBQYXJlbnRUcmFuc2FjdGlvbkxpbmVJRDogdGhpcy5wYXJlbnRJZCxcbiAgICAgICAgICAgIFRyYW5zYWN0aW9uTGluZVVJRDogaXRlbUlkLFxuICAgICAgICAgICAgRmllbGRBcGlOYW1lOiBmaWVsZEFwaU5hbWUsXG4gICAgICAgICAgICBGaWVsZFZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIFZpZXdUeXBlOiB0aGlzLnZpZXdUeXBlLFxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmh0dHBTZXJ2aWNlXG4gICAgICAgICAgICAucG9zdFdhcGlBcGlDYWxsKGAke3RoaXMuZ2V0QmFzZVBhcmVudFVybCgpfVNldEZpZWxkVmFsdWVgLCBib2R5KVxuICAgICAgICAgICAgLnN1YnNjcmliZShcbiAgICAgICAgICAgICAgICAocmVzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrRnVuYyhyZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyAoZXJyb3IpID0+IHt9LFxuICAgICAgICAgICAgICAgIC8vICgpID0+IHt9XG4gICAgICAgICAgICApO1xuICAgIH1cbn1cbiJdfQ==