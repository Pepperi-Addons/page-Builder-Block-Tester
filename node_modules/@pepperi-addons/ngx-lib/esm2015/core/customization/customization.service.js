import { Injectable } from '@angular/core';
import { FormBuilder } from '@angular/forms';
import { BehaviorSubject } from 'rxjs';
import { PepSessionService } from '../common/services/session.service';
import { PepFileService } from '../common/services/file.service';
import * as i0 from "@angular/core";
import * as i1 from "../common/services/session.service";
import * as i2 from "../common/services/file.service";
import * as i3 from "@angular/forms";
export class PepCustomizationService {
    constructor(sessionService, fileService, fb) {
        this.sessionService = sessionService;
        this.fileService = fileService;
        this.fb = fb;
        this.hasCustomHomepage = null;
        this.hasCustomHeader = null;
        this.customHeaderHeight = PepCustomizationService.DEFAULT_HEADER_HEIGHT;
        this.mainContHeight = 0;
        this.footerHeight = new BehaviorSubject(0);
        this.settingsWidth = new BehaviorSubject(0);
        this.hideFooter();
        //
    }
    getDefaultFromGroup(field, withValidators = true) {
        const validators = withValidators ? field.getValidators() : [];
        const group = {};
        group[field.key] = [
            { value: field.value, disabled: field.disabled },
            validators,
        ];
        return this.fb.group(group);
    }
    getFormControl(form, fieldKey, parentFieldKey = null) {
        let formControl = null;
        if (form && form.controls) {
            if (parentFieldKey === null) {
                formControl = form.controls[fieldKey];
            }
            else {
                formControl = form.controls[parentFieldKey].get(fieldKey);
            }
        }
        return formControl;
    }
    updateFormFieldValue(form, fieldKey, value = '', parentFieldKey = null) {
        const formControl = this.getFormControl(form, fieldKey, parentFieldKey);
        if (formControl) {
            formControl.setValue(value);
        }
    }
    updateFormField(form, field, value = '', parentField = null) {
        const formControl = this.getFormControl(form, field.key, parentField === null || parentField === void 0 ? void 0 : parentField.key);
        if (formControl) {
            formControl.setValue(value);
            // If disabled has changed.
            if (formControl.disabled !== field.disabled) {
                field.disabled ? formControl.disable() : formControl.enable();
                const validators = field.getValidators();
                formControl.setValidators(validators);
            }
        }
    }
    calculateFormFieldHeight(withTitle = true, rowSpan = 1, standAlone = false) {
        const themeVars = this.getThemeVariables();
        const rowFieldHeight = this.getNumberThemeVariable(themeVars, PepCustomizationService.FORM_FIELD_HEIGHT_KEY);
        const rowFieldTitleHeight = this.getNumberThemeVariable(themeVars, PepCustomizationService.FORM_FIELD_TITLE_HEIGHT_KEY);
        const rowFieldSpacingBottom = this.getNumberThemeVariable(themeVars, PepCustomizationService.FORM_SPACEING_KEY);
        let fieldHeight = 0;
        if (rowSpan === 1) {
            fieldHeight =
                (withTitle ? rowFieldTitleHeight : 0) + rowFieldHeight;
        }
        else {
            const rowSpanCalc = withTitle ? rowSpan : rowSpan - 1;
            fieldHeight =
                rowSpan * rowFieldHeight +
                    rowSpanCalc * rowFieldTitleHeight +
                    (standAlone ? 0 : rowSpanCalc * rowFieldSpacingBottom);
        }
        return fieldHeight;
    }
    calculateCardRowsHeight(rowsCount = 1, withSpacing = true) {
        const themeVars = this.getThemeVariables();
        const cardFieldHeight = this.getNumberThemeVariable(themeVars, PepCustomizationService.CARD_FIELD_HEIGHT_KEY);
        const cardFieldSpacing = this.getNumberThemeVariable(themeVars, PepCustomizationService.CARD_SPACEING_KEY);
        const fieldHeight = rowsCount * cardFieldHeight +
            (rowsCount - 1) * (withSpacing ? cardFieldSpacing : 0);
        return fieldHeight;
    }
    calculateTableRowsHeight(rowsCount = 1, withSpacing = true) {
        const themeVars = this.getThemeVariables();
        const tableFieldHeight = this.getNumberThemeVariable(themeVars, PepCustomizationService.TABLE_FIELD_HEIGHT_KEY);
        const tableFieldSpacing = this.getNumberThemeVariable(themeVars, PepCustomizationService.TABLE_SPACEING_KEY);
        const fieldHeight = rowsCount *
            (tableFieldHeight + (withSpacing ? tableFieldSpacing * 2 : 0));
        return fieldHeight;
    }
    calculateFieldHeight(layoutType = 'form', rowSpan, standAlone) {
        let fieldHeight = 'inherit'; // Default for card (with no title)
        if (layoutType === 'table') {
            fieldHeight = this.getThemeVariable(PepCustomizationService.TABLE_FIELD_HEIGHT_KEY);
        }
        else if (layoutType === 'card') {
            fieldHeight =
                this.calculateCardRowsHeight(rowSpan, !standAlone) +
                    PepCustomizationService.REM_STRING;
        }
        else {
            // Form
            fieldHeight =
                this.calculateFormFieldHeight(false, rowSpan, standAlone) +
                    PepCustomizationService.REM_STRING;
        }
        return fieldHeight;
    }
    getBrandingTheme() {
        const themeObj = this.sessionService.getObject(PepCustomizationService.USER_THEME);
        return (themeObj && themeObj.Theme) || 'default-theme'; // 'light-theme';
    }
    getDefaultThemeLayoutVariables(themeVars) {
        // Declare default screen sizes.
        themeVars['--pep-screen-max-size-2xs'] =
            '460' + PepCustomizationService.PX_STRING;
        themeVars['--pep-screen-max-size-xs'] =
            '767' + PepCustomizationService.PX_STRING;
        themeVars['--pep-screen-max-size-sm'] =
            '991' + PepCustomizationService.PX_STRING;
        themeVars['--pep-screen-max-size-md'] =
            '1199' + PepCustomizationService.PX_STRING;
        themeVars['--pep-screen-max-size-lg'] =
            '1366' + PepCustomizationService.PX_STRING;
        themeVars['--pep-screen-max-size-xl'] =
            '1920' + PepCustomizationService.PX_STRING;
        // Declare default top bar.
        themeVars[PepCustomizationService.SIDE_BAR_WIDTH_KEY] =
            '16' + PepCustomizationService.REM_STRING;
        // Declare default top bar.
        themeVars[PepCustomizationService.TOP_BAR_SPACING_TOP_KEY] =
            '1.5' + PepCustomizationService.REM_STRING;
        themeVars[PepCustomizationService.TOP_BAR_SPACING_BOTTOM_KEY] =
            '0.5' + PepCustomizationService.REM_STRING;
        themeVars[PepCustomizationService.TOP_BAR_FIELD_HEIGHT_KEY] =
            '2.5' + PepCustomizationService.REM_STRING;
        // Declare default footer.
        themeVars[PepCustomizationService.FOOTER_BAR_SPACING_TOP_KEY] =
            '0.75' + PepCustomizationService.REM_STRING;
        themeVars[PepCustomizationService.FOOTER_BAR_SPACING_BOTTOM_KEY] =
            '1.25' + PepCustomizationService.REM_STRING;
    }
    getDefaultThemeBorderRadiusVariables(themeVars) {
        themeVars[PepCustomizationService.BORDER_RADIUS_SM_KEY] =
            '0.125' + PepCustomizationService.REM_STRING;
        themeVars[PepCustomizationService.BORDER_RADIUS_MD_KEY] =
            '0.25' + PepCustomizationService.REM_STRING;
        themeVars[PepCustomizationService.BORDER_RADIUS_LG_KEY] =
            '0.5' + PepCustomizationService.REM_STRING;
    }
    getDefaultThemeSpacingVariables(themeVars) {
        themeVars[PepCustomizationService.SPACING_SIZE_2XS_KEY] =
            '0.125' + PepCustomizationService.REM_STRING;
        themeVars[PepCustomizationService.SPACING_SIZE_XS_KEY] =
            '0.25' + PepCustomizationService.REM_STRING;
        themeVars[PepCustomizationService.SPACING_SIZE_SM_KEY] =
            '0.5' + PepCustomizationService.REM_STRING;
        themeVars[PepCustomizationService.SPACING_SIZE_MD_KEY] =
            '0.75' + PepCustomizationService.REM_STRING;
        themeVars[PepCustomizationService.SPACING_SIZE_LG_KEY] =
            '1' + PepCustomizationService.REM_STRING;
        themeVars[PepCustomizationService.SPACING_SIZE_XL_KEY] =
            '1.5' + PepCustomizationService.REM_STRING;
        themeVars[PepCustomizationService.SPACING_SIZE_2XL_KEY] =
            '2' + PepCustomizationService.REM_STRING;
        themeVars[PepCustomizationService.SPACING_SIZE_3XL_KEY] =
            '2.5' + PepCustomizationService.REM_STRING;
        themeVars[PepCustomizationService.SPACING_SIZE_4XL_KEY] =
            '3' + PepCustomizationService.REM_STRING;
        themeVars[PepCustomizationService.SPACING_SIZE_5XL_KEY] =
            '3.5' + PepCustomizationService.REM_STRING;
        themeVars[PepCustomizationService.SPACING_SIZE_6XL_KEY] =
            '5' + PepCustomizationService.REM_STRING;
        themeVars[PepCustomizationService.SPACING_SIZE_7XL_KEY] =
            '6' + PepCustomizationService.REM_STRING;
        themeVars[PepCustomizationService.SPACING_SIZE_8XL_KEY] =
            '8' + PepCustomizationService.REM_STRING;
        themeVars[PepCustomizationService.SPACING_SIZE_9XL_KEY] =
            '16' + PepCustomizationService.REM_STRING;
    }
    getDefaultThemeFontsVariables(themeVars) {
        // Title font family
        themeVars[PepCustomizationService.FONT_FAMILY_TITLE_KEY] = 'Nexa';
        // Body font family
        themeVars[PepCustomizationService.FONT_FAMILY_BODY_KEY] = 'Inter';
        // Font sizes
        themeVars[PepCustomizationService.FONT_SIZE_2XS_KEY] =
            '0.625' + PepCustomizationService.REM_STRING;
        themeVars[PepCustomizationService.FONT_SIZE_XS_KEY] =
            '0.75' + PepCustomizationService.REM_STRING;
        themeVars[PepCustomizationService.FONT_SIZE_SM_KEY] =
            '0.875' + PepCustomizationService.REM_STRING;
        themeVars[PepCustomizationService.FONT_SIZE_MD_KEY] =
            '1' + PepCustomizationService.REM_STRING;
        themeVars[PepCustomizationService.FONT_SIZE_LG_KEY] =
            '1.125' + PepCustomizationService.REM_STRING;
        themeVars[PepCustomizationService.FONT_SIZE_XL_KEY] =
            '1.25' + PepCustomizationService.REM_STRING;
        themeVars[PepCustomizationService.FONT_SIZE_2XL_KEY] =
            '1.5' + PepCustomizationService.REM_STRING;
        // Line height
        themeVars[PepCustomizationService.LINE_HEIGHT_2XS_KEY] =
            '0.75' + PepCustomizationService.REM_STRING;
        themeVars[PepCustomizationService.LINE_HEIGHT_XS_KEY] =
            '1' + PepCustomizationService.REM_STRING;
        themeVars[PepCustomizationService.LINE_HEIGHT_SM_KEY] =
            '1.25' + PepCustomizationService.REM_STRING;
        themeVars[PepCustomizationService.LINE_HEIGHT_MD_KEY] =
            '1.5' + PepCustomizationService.REM_STRING;
        themeVars[PepCustomizationService.LINE_HEIGHT_LG_KEY] =
            '1.75' + PepCustomizationService.REM_STRING;
        themeVars[PepCustomizationService.LINE_HEIGHT_XL_KEY] =
            '2' + PepCustomizationService.REM_STRING;
        themeVars[PepCustomizationService.LINE_HEIGHT_2XL_KEY] =
            '2.25' + PepCustomizationService.REM_STRING;
        // Font weight
        themeVars['--pep-font-weight-normal'] = 400;
        themeVars['--pep-font-weight-bold'] = 600;
        themeVars['--pep-font-weight-bolder'] = 800;
    }
    getDefaultThemeButtonsVariables(themeVars) {
        themeVars['--pep-button-2xs-horizontal-spacing'] =
            '0.25' + PepCustomizationService.REM_STRING;
        themeVars['--pep-button-2xs-min-width'] =
            '1' + PepCustomizationService.REM_STRING;
        themeVars['--pep-button-2xs-height'] =
            '1' + PepCustomizationService.REM_STRING;
        themeVars['--pep-button-2xs-font-size'] =
            'var(' + PepCustomizationService.FONT_SIZE_2XS_KEY + ')';
        // themeVars['--pep-button-2xs-icon-horizontal-spacing'] = '0.125' + PepCustomizationService.REM_STRING;
        themeVars['--pep-button-xs-horizontal-spacing'] =
            '0.5' + PepCustomizationService.REM_STRING;
        themeVars['--pep-button-xs-min-width'] =
            '1.5' + PepCustomizationService.REM_STRING;
        themeVars['--pep-button-xs-height'] =
            '1.5' + PepCustomizationService.REM_STRING;
        themeVars['--pep-button-xs-font-size'] =
            'var(' + PepCustomizationService.FONT_SIZE_XS_KEY + ')';
        // themeVars['--pep-button-xs-icon-horizontal-spacing'] = '0.25' + PepCustomizationService.REM_STRING;
        themeVars['--pep-button-sm-horizontal-spacing'] =
            '0.75' + PepCustomizationService.REM_STRING;
        themeVars['--pep-button-sm-min-width'] =
            '2' + PepCustomizationService.REM_STRING;
        themeVars['--pep-button-sm-height'] =
            '2' + PepCustomizationService.REM_STRING;
        themeVars['--pep-button-sm-font-size'] =
            'var(' + PepCustomizationService.FONT_SIZE_SM_KEY + ')';
        // themeVars['--pep-button-sm-icon-horizontal-spacing'] = '0.5' + PepCustomizationService.REM_STRING;
        themeVars['--pep-button-md-horizontal-spacing'] =
            '1' + PepCustomizationService.REM_STRING;
        themeVars['--pep-button-md-min-width'] =
            '2.5' + PepCustomizationService.REM_STRING;
        themeVars['--pep-button-md-height'] =
            '2.5' + PepCustomizationService.REM_STRING;
        themeVars['--pep-button-md-font-size'] =
            'var(' + PepCustomizationService.FONT_SIZE_MD_KEY + ')';
        // themeVars['--pep-button-md-icon-horizontal-spacing'] = '0.5' + PepCustomizationService.REM_STRING;
        themeVars['--pep-button-lg-horizontal-spacing'] =
            '1' + PepCustomizationService.REM_STRING;
        themeVars['--pep-button-lg-min-width'] =
            '3' + PepCustomizationService.REM_STRING;
        themeVars['--pep-button-lg-height'] =
            '3' + PepCustomizationService.REM_STRING;
        themeVars['--pep-button-lg-font-size'] =
            'var(' + PepCustomizationService.FONT_SIZE_LG_KEY + ')';
        // themeVars['--pep-button-lg-icon-horizontal-spacing'] = '0.75' + PepCustomizationService.REM_STRING;
        themeVars['--pep-button-xl-horizontal-spacing'] =
            '1.5' + PepCustomizationService.REM_STRING;
        themeVars['--pep-button-xl-min-width'] =
            '4' + PepCustomizationService.REM_STRING;
        themeVars['--pep-button-xl-height'] =
            '4' + PepCustomizationService.REM_STRING;
        themeVars['--pep-button-xl-font-size'] =
            'var(' + PepCustomizationService.FONT_SIZE_XL_KEY + ')';
        // themeVars['--pep-button-xl-icon-horizontal-spacing'] = '1' + PepCustomizationService.REM_STRING;
    }
    getSystemPrimaryInvertColorsVariables(themeVars) {
        themeVars[PepCustomizationService.COLOR_SYSTEM_PRIMARY_INVERT_KEY + '-h'] = '255';
        themeVars[PepCustomizationService.COLOR_SYSTEM_PRIMARY_INVERT_KEY + '-s'] = '100%';
        themeVars[PepCustomizationService.COLOR_SYSTEM_PRIMARY_INVERT_KEY + '-l'] = '100%';
    }
    getSystemPrimaryColorsVariables(themeVars) {
        themeVars[PepCustomizationService.COLOR_SYSTEM_PRIMARY_KEY + '-h'] =
            '0';
        themeVars[PepCustomizationService.COLOR_SYSTEM_PRIMARY_KEY + '-s'] =
            '0%';
        themeVars[PepCustomizationService.COLOR_SYSTEM_PRIMARY_KEY + '-l'] =
            '10%';
    }
    getSystemSuccessColorsVariables(themeVars) {
        themeVars[PepCustomizationService.COLOR_SYSTEM_SUCCESS_KEY + '-h'] =
            '100';
        themeVars[PepCustomizationService.COLOR_SYSTEM_SUCCESS_KEY + '-s'] =
            '100%';
        themeVars[PepCustomizationService.COLOR_SYSTEM_SUCCESS_KEY + '-l'] =
            '25%';
    }
    getSystemCautionColorsVariables(themeVars) {
        themeVars[PepCustomizationService.COLOR_SYSTEM_CAUTION_KEY + '-h'] =
            '360';
        themeVars[PepCustomizationService.COLOR_SYSTEM_CAUTION_KEY + '-s'] =
            '100%';
        themeVars[PepCustomizationService.COLOR_SYSTEM_CAUTION_KEY + '-l'] =
            '40%';
    }
    getUserPrimaryColorsVariables(themeVars) {
        themeVars[PepCustomizationService.COLOR_USER_PRIMARY_KEY + '-h'] = '78';
        themeVars[PepCustomizationService.COLOR_USER_PRIMARY_KEY + '-s'] =
            '87%';
        themeVars[PepCustomizationService.COLOR_USER_PRIMARY_KEY + '-l'] =
            '27%';
    }
    getUserSecondaryColorsVariables(themeVars) {
        themeVars[PepCustomizationService.COLOR_USER_SECONDARY_KEY + '-h'] =
            '77';
        themeVars[PepCustomizationService.COLOR_USER_SECONDARY_KEY + '-s'] =
            '87%';
        themeVars[PepCustomizationService.COLOR_USER_SECONDARY_KEY + '-l'] =
            '42%';
    }
    getWeakColorsVariables(themeVars) {
        themeVars[PepCustomizationService.COLOR_WEAK_KEY + '-h'] =
            'var(' + PepCustomizationService.COLOR_SYSTEM_PRIMARY_KEY + '-h)';
        themeVars[PepCustomizationService.COLOR_WEAK_KEY + '-s'] =
            'var(' + PepCustomizationService.COLOR_SYSTEM_PRIMARY_KEY + '-s)';
        themeVars[PepCustomizationService.COLOR_WEAK_KEY + '-l'] =
            'var(' + PepCustomizationService.COLOR_SYSTEM_PRIMARY_KEY + '-l)';
    }
    getRegularColorsVariables(themeVars) {
        themeVars[PepCustomizationService.COLOR_REGULAR_KEY + '-h'] =
            'var(' + PepCustomizationService.COLOR_SYSTEM_PRIMARY_KEY + '-h)';
        themeVars[PepCustomizationService.COLOR_REGULAR_KEY + '-s'] =
            'var(' + PepCustomizationService.COLOR_SYSTEM_PRIMARY_KEY + '-s)';
        themeVars[PepCustomizationService.COLOR_REGULAR_KEY + '-l'] =
            'var(' + PepCustomizationService.COLOR_SYSTEM_PRIMARY_KEY + '-l)';
    }
    getStrongColorsVariables(themeVars) {
        themeVars[PepCustomizationService.COLOR_STRONG_KEY + '-h'] =
            'var(' + PepCustomizationService.COLOR_USER_PRIMARY_KEY + '-h)';
        themeVars[PepCustomizationService.COLOR_STRONG_KEY + '-s'] =
            'var(' + PepCustomizationService.COLOR_USER_PRIMARY_KEY + '-s)';
        themeVars[PepCustomizationService.COLOR_STRONG_KEY + '-l'] =
            'var(' + PepCustomizationService.COLOR_USER_PRIMARY_KEY + '-l)';
    }
    getTextColorsVariables(themeVars) {
        themeVars[PepCustomizationService.COLOR_TEXT_LINK_KEY + '-h'] = '207';
        themeVars[PepCustomizationService.COLOR_TEXT_LINK_KEY + '-s'] = '76%';
        themeVars[PepCustomizationService.COLOR_TEXT_LINK_KEY + '-l'] = '37%';
    }
    getDefaultThemeColorsVariables(themeVars) {
        // System primary invert colors.
        this.getSystemPrimaryInvertColorsVariables(themeVars);
        // System primary colors.
        this.getSystemPrimaryColorsVariables(themeVars);
        // System success colors.
        this.getSystemSuccessColorsVariables(themeVars);
        // System caution colors.
        this.getSystemCautionColorsVariables(themeVars);
        // User primary colors.
        this.getUserPrimaryColorsVariables(themeVars);
        // User secondary colors.
        this.getUserSecondaryColorsVariables(themeVars);
        // Weak colors.
        this.getWeakColorsVariables(themeVars);
        // Regular colors.
        this.getRegularColorsVariables(themeVars);
        // Strong colors.
        this.getStrongColorsVariables(themeVars);
        // Text colors.
        this.getTextColorsVariables(themeVars);
    }
    getDefaultThemeShadowsVariables(themeVars) {
        const noneOffset = '0';
        themeVars[PepCustomizationService.SHADOW_NONE_OFFSET_KEY] = noneOffset;
        const xsOffset = '0 0.125rem 0.25rem 0';
        themeVars[PepCustomizationService.SHADOW_XS_OFFSET_KEY] = xsOffset;
        const smOffset = '0 0.25rem 0.5rem 0';
        themeVars[PepCustomizationService.SHADOW_SM_OFFSET_KEY] = smOffset;
        const mdOffset = '0 0.5rem 1rem 0';
        themeVars[PepCustomizationService.SHADOW_MD_OFFSET_KEY] = mdOffset;
        const lgOffset = '0 1rem 2rem 0';
        themeVars[PepCustomizationService.SHADOW_LG_OFFSET_KEY] = lgOffset;
        const xlOffset = '0 2rem 4rem 0';
        themeVars[PepCustomizationService.SHADOW_XL_OFFSET_KEY] = xlOffset;
    }
    getDefaultThemeFormCustomizationVariables(themeVars) {
        const formFieldSpacing = 1;
        themeVars[PepCustomizationService.FORM_FIELD_HEIGHT_KEY] =
            '2.5' + PepCustomizationService.REM_STRING;
        themeVars[PepCustomizationService.FORM_FIELD_TITLE_HEIGHT_KEY] =
            '1.5' + PepCustomizationService.REM_STRING;
        themeVars[PepCustomizationService.FORM_SPACEING_KEY] =
            formFieldSpacing + PepCustomizationService.REM_STRING;
        themeVars[PepCustomizationService.FORM_FIELD_SPACEING_KEY] =
            formFieldSpacing + PepCustomizationService.REM_STRING;
    }
    getDefaultThemeCardCustomizationVariables(themeVars) {
        themeVars[PepCustomizationService.CARD_FIELD_HEIGHT_KEY] =
            '1.5' + PepCustomizationService.REM_STRING;
        themeVars[PepCustomizationService.CARD_SPACEING_KEY] =
            'var(' + PepCustomizationService.SPACING_SIZE_XS_KEY + ')';
        themeVars[PepCustomizationService.CARD_BORDER_RADIUS_KEY] =
            'var(' + PepCustomizationService.BORDER_RADIUS_MD_KEY + ')';
        themeVars[PepCustomizationService.CARD_SHADOW_OFFSET_KEY] =
            'var(' + PepCustomizationService.SHADOW_MD_OFFSET_KEY + ')';
    }
    getDefaultThemeTableCustomizationVariables(themeVars) {
        themeVars[PepCustomizationService.TABLE_FIELD_HEIGHT_KEY] =
            '2' + PepCustomizationService.REM_STRING;
        themeVars[PepCustomizationService.TABLE_SPACEING_KEY] =
            '0.5' + PepCustomizationService.REM_STRING;
        themeVars[PepCustomizationService.TABLE_BORDER_RADIUS_KEY] =
            'var(' + PepCustomizationService.BORDER_RADIUS_MD_KEY + ')';
    }
    getDefaultThemeQSCustomizationVariables(themeVars) {
        const qsState = 'regular';
        themeVars[PepCustomizationService.STYLE_QS_KEY] = qsState;
        themeVars[PepCustomizationService.COLOR_QS_KEY + '-h'] =
            'var(' + PepCustomizationService.COLOR_SYSTEM_PRIMARY_KEY + '-h)';
        themeVars[PepCustomizationService.COLOR_QS_KEY + '-s'] =
            'var(' + PepCustomizationService.COLOR_SYSTEM_PRIMARY_KEY + '-s)';
        themeVars[PepCustomizationService.COLOR_QS_KEY + '-l'] =
            'var(' + PepCustomizationService.COLOR_SYSTEM_PRIMARY_KEY + '-l)';
    }
    getDefaultThemeTopHeaderCustomizationVariables(themeVars) {
        const topHeaderState = 'strong';
        themeVars[PepCustomizationService.STYLE_TOP_HEADER_KEY] = topHeaderState;
        themeVars[PepCustomizationService.COLOR_TOP_HEADER_KEY + '-h'] = '';
        themeVars[PepCustomizationService.COLOR_TOP_HEADER_KEY + '-s'] = '';
        themeVars[PepCustomizationService.COLOR_TOP_HEADER_KEY + '-l'] = '';
    }
    getDefaultThemeVariables() {
        const themeVars = {};
        // Declare default layout.
        this.getDefaultThemeLayoutVariables(themeVars);
        // Declare default border radius.
        this.getDefaultThemeBorderRadiusVariables(themeVars);
        // Declare default spacing.
        this.getDefaultThemeSpacingVariables(themeVars);
        // Declare default fonts size & line height.
        this.getDefaultThemeFontsVariables(themeVars);
        // Declare default buttons.
        this.getDefaultThemeButtonsVariables(themeVars);
        // Declare default colors.
        this.getDefaultThemeColorsVariables(themeVars);
        // Declare default shadows.
        this.getDefaultThemeShadowsVariables(themeVars);
        // Declare default form customization.
        this.getDefaultThemeFormCustomizationVariables(themeVars);
        // Declare default card customization.
        this.getDefaultThemeCardCustomizationVariables(themeVars);
        // Declare default table customization.
        this.getDefaultThemeTableCustomizationVariables(themeVars);
        // Declare default qs customization.
        this.getDefaultThemeQSCustomizationVariables(themeVars);
        // Declare default top header customization.
        this.getDefaultThemeTopHeaderCustomizationVariables(themeVars);
        return themeVars;
    }
    getThemeVariables() {
        const ret = this.getDefaultThemeVariables();
        const themeVars = this.sessionService.getObject(PepCustomizationService.USER_THEME_VARIABLES);
        // Override defaults.
        if (themeVars) {
            for (const key in themeVars) {
                ret[key] = themeVars[key];
            }
        }
        return ret;
    }
    setThemeVariables(themeVariablesToSet = null) {
        const themeVariables = this.getThemeVariables();
        // Override defaults.
        if (themeVariablesToSet) {
            for (const key in themeVariablesToSet) {
                themeVariables[key] = themeVariablesToSet[key];
            }
        }
        this.sessionService.setObject(PepCustomizationService.USER_THEME_VARIABLES, JSON.stringify(themeVariables));
        for (const key in themeVariables) {
            if (this.isFontUrlKey(key)) {
                this.fileService.loadFontStyle(key, themeVariables[key]);
            }
            else {
                document.documentElement.style.setProperty(key, themeVariables[key]);
            }
        }
    }
    isFontUrlKey(key) {
        let res = false;
        if (key === PepCustomizationService.FONT_FAMILY_TITLE_NORMAL_URL_KEY ||
            key === PepCustomizationService.FONT_FAMILY_TITLE_BOLD_URL_KEY ||
            key === PepCustomizationService.FONT_FAMILY_BODY_NORMAL_URL_KEY ||
            key === PepCustomizationService.FONT_FAMILY_BODY_BOLD_URL_KEY) {
            res = true;
        }
        return res;
    }
    getThemeVariable(key) {
        const themeVars = this.getThemeVariables();
        if (themeVars.hasOwnProperty(key)) {
            return themeVars[key];
        }
        else {
            return '';
        }
    }
    getNumberThemeVariable(themeVars, key) {
        if (themeVars && themeVars.hasOwnProperty(key)) {
            // If it's reference to another key.
            if (themeVars[key].indexOf('var(') === 0) {
                key = themeVars[key].substr(4).split(')')[0];
            }
            const tmp = Number(themeVars[key].replace(PepCustomizationService.REM_STRING, ''));
            return tmp;
        }
        else {
            return 0;
        }
    }
    setFooterHeight(height) {
        if (this.footerHeight.getValue() !== height) {
            // it is publishing this value to all the subscribers that have already subscribed to this message
            setTimeout(() => {
                this.footerHeight.next(height);
            }, 0);
        }
        document.documentElement.style.setProperty(PepCustomizationService.FOOTER_HEIGHT_KEY, height + PepCustomizationService.REM_STRING);
    }
    hideFooter() {
        this.setFooterHeight(0);
    }
    showFooter() {
        const themeVars = this.getThemeVariables();
        const res = this.getNumberThemeVariable(themeVars, PepCustomizationService.FOOTER_BAR_SPACING_TOP_KEY) +
            this.getNumberThemeVariable(themeVars, PepCustomizationService.FOOTER_BAR_SPACING_BOTTOM_KEY) +
            this.getNumberThemeVariable(themeVars, PepCustomizationService.TOP_BAR_FIELD_HEIGHT_KEY);
        this.setFooterHeight(res);
    }
    setSettingsWidth(width) {
        if (this.settingsWidth.getValue() !== width) {
            // it is publishing this value to all the subscribers that have already subscribed to this message
            setTimeout(() => {
                this.settingsWidth.next(width);
            }, 0);
        }
        document.documentElement.style.setProperty(PepCustomizationService.SETTINGS_WIDTH_KEY, width + PepCustomizationService.REM_STRING);
    }
    hideSettings() {
        this.setSettingsWidth(0);
    }
    showSettings() {
        const themeVars = this.getThemeVariables();
        const res = this.getNumberThemeVariable(themeVars, PepCustomizationService.SIDE_BAR_WIDTH_KEY);
        this.setSettingsWidth(res);
    }
    getTopBarHeight() {
        const themeVars = this.getThemeVariables();
        const res = this.getNumberThemeVariable(themeVars, PepCustomizationService.TOP_BAR_SPACING_TOP_KEY) +
            this.getNumberThemeVariable(themeVars, PepCustomizationService.TOP_BAR_SPACING_BOTTOM_KEY) +
            this.getNumberThemeVariable(themeVars, PepCustomizationService.TOP_BAR_FIELD_HEIGHT_KEY);
        return res;
    }
    setOldUserTheme(res) {
        // Added user theme.
        const themeObj = {
            Theme: res.Theme || 'default-theme',
        };
        this.sessionService.setObject(PepCustomizationService.USER_THEME, JSON.stringify(themeObj));
        let spinnerColor;
        let brandingFontColor;
        if (this.isLightColor(res.BrandingMainColor)) {
            spinnerColor = PepCustomizationService.DEFAULT_SPINNER_COLOR;
            brandingFontColor = '#222';
        }
        else {
            spinnerColor = res.BrandingMainColor;
            brandingFontColor = PepCustomizationService.DEFAULT_BRANDING_COLOR;
        }
        const color = {
            BrandingSecondaryColor: res.BrandingSecondaryColor,
            BrandingMainColor: res.BrandingMainColor,
            BrandingFontColor: brandingFontColor,
            SpinnerColor: spinnerColor,
        };
        this.sessionService.setObject(PepCustomizationService.USER_COLOR, JSON.stringify(color));
        this.hasCustomHeader =
            res.TopHeaderFiles &&
                res.TopHeaderFiles.length > 0 &&
                res.TopHeaderFiles[0] !== ''
                ? true
                : false;
        this.hasCustomHomepage =
            res.UserRole === 'Buyer' &&
                res.TopHeaderFiles &&
                res.TopHeaderFiles.length > 1 &&
                res.TopHeaderFiles[1] !== '';
    }
    isLegacyColor() {
        const h = document.documentElement.style.getPropertyValue(PepCustomizationService.COLOR_TOP_HEADER_KEY + '-h');
        const s = document.documentElement.style.getPropertyValue(PepCustomizationService.COLOR_TOP_HEADER_KEY + '-s');
        const l = document.documentElement.style.getPropertyValue(PepCustomizationService.COLOR_TOP_HEADER_KEY + '-l');
        return !(h && s && l);
    }
    getLoadingSpinnerColor() {
        let spinnerColor = '';
        if (this.isLegacyColor()) {
            const color = this.sessionService.getObject(PepCustomizationService.USER_COLOR);
            if (color && color.SpinnerColor) {
                spinnerColor = color.SpinnerColor;
            }
            else {
                spinnerColor = PepCustomizationService.DEFAULT_SPINNER_COLOR;
            }
        }
        return spinnerColor;
    }
    getBrandingMainColor() {
        let brandingMainColor = '';
        if (this.isLegacyColor()) {
            const color = this.sessionService.getObject(PepCustomizationService.USER_COLOR);
            if (color && color.BrandingMainColor) {
                brandingMainColor = color.BrandingMainColor;
            }
            else {
                brandingMainColor =
                    PepCustomizationService.DEFAULT_BRANDING_COLOR;
            }
        }
        return brandingMainColor;
    }
    isLightColor(hexColor) {
        if (!hexColor) {
            return;
        }
        let isBright = false;
        let sum = 0;
        const c = hexColor.replace(/^#/, '');
        sum = parseInt(c[0] + c[1], 16);
        sum += parseInt(c[2] + c[3], 16);
        sum += parseInt(c[4] + c[5], 16);
        if (sum > 382.6) {
            // it's bright color
            isBright = true;
        }
        return isBright;
    }
}
PepCustomizationService.STAND_ALONE_FIELD_CLASS_NAME = 'pep-field';
PepCustomizationService.REM_STRING = 'rem';
PepCustomizationService.PX_STRING = 'px';
PepCustomizationService.USER_THEME = 'user_theme';
PepCustomizationService.USER_COLOR = 'user_color';
PepCustomizationService.USER_THEME_VARIABLES = 'user_theme_variables';
// Header height
PepCustomizationService.HEADER_HEIGHT_KEY = '--pep-header-height';
// Side bar variables keys
PepCustomizationService.SIDE_BAR_WIDTH_KEY = '--pep-side-bar-width';
// Settings width
PepCustomizationService.SETTINGS_WIDTH_KEY = '--pep-settings-bar-width';
// Top bar variables keys
PepCustomizationService.TOP_BAR_SPACING_TOP_KEY = '--pep-top-bar-spacing-top';
PepCustomizationService.TOP_BAR_SPACING_BOTTOM_KEY = '--pep-top-bar-spacing-bottom';
PepCustomizationService.TOP_BAR_FIELD_HEIGHT_KEY = '--pep-top-bar-field-height';
// Footer variables keys
PepCustomizationService.FOOTER_HEIGHT_KEY = '--pep-footer-bar-height';
PepCustomizationService.FOOTER_BAR_SPACING_TOP_KEY = '--pep-footer-bar-spacing-top';
PepCustomizationService.FOOTER_BAR_SPACING_BOTTOM_KEY = '--pep-footer-bar-spacing-bottom';
// Main container height
PepCustomizationService.MAIN_HEIGHT_KEY = '--pep-main-height';
// Colors variables keys
PepCustomizationService.COLOR_USER_PRIMARY_KEY = '--pep-color-user-primary';
PepCustomizationService.COLOR_USER_SECONDARY_KEY = '--pep-color-user-secondary';
PepCustomizationService.COLOR_SYSTEM_PRIMARY_INVERT_KEY = '--pep-color-system-primary-invert';
PepCustomizationService.COLOR_SYSTEM_PRIMARY_KEY = '--pep-color-system-primary';
PepCustomizationService.COLOR_TEXT_LINK_KEY = '--pep-color-text-link';
PepCustomizationService.COLOR_SYSTEM_CAUTION_KEY = '--pep-color-system-caution';
PepCustomizationService.COLOR_SYSTEM_SUCCESS_KEY = '--pep-color-system-success';
PepCustomizationService.COLOR_STRONG_KEY = '--pep-color-strong';
PepCustomizationService.COLOR_REGULAR_KEY = '--pep-color-regular';
PepCustomizationService.COLOR_WEAK_KEY = '--pep-color-weak';
// Top header variables keys
PepCustomizationService.COLOR_TOP_HEADER_KEY = '--pep-color-top-header';
PepCustomizationService.STYLE_TOP_HEADER_KEY = '--pep-style-top-header';
// QS variables keys
PepCustomizationService.COLOR_QS_KEY = '--pep-color-qs';
PepCustomizationService.STYLE_QS_KEY = '--pep-style-qs';
// Fonts variables keys
PepCustomizationService.FONT_FAMILY_TITLE_KEY = '--pep-font-family-title';
PepCustomizationService.FONT_FAMILY_TITLE_NORMAL_URL_KEY = '--pep-font-family-title-normal-url';
PepCustomizationService.FONT_FAMILY_TITLE_BOLD_URL_KEY = '--pep-font-family-title-bold-url';
PepCustomizationService.FONT_FAMILY_BODY_KEY = '--pep-font-family-body';
PepCustomizationService.FONT_FAMILY_BODY_NORMAL_URL_KEY = '--pep-font-family-body-normal-url';
PepCustomizationService.FONT_FAMILY_BODY_BOLD_URL_KEY = '--pep-font-family-body-bold-url';
// Border radius variables keys
PepCustomizationService.BORDER_RADIUS_KEY = '--pep-border-radius';
PepCustomizationService.BORDER_RADIUS_SM_KEY = PepCustomizationService.BORDER_RADIUS_KEY + '-sm';
PepCustomizationService.BORDER_RADIUS_MD_KEY = PepCustomizationService.BORDER_RADIUS_KEY + '-md';
PepCustomizationService.BORDER_RADIUS_LG_KEY = PepCustomizationService.BORDER_RADIUS_KEY + '-lg';
// Fonts variables keys
PepCustomizationService.FONT_SIZE_2XS_KEY = '--pep-font-size-2xs';
PepCustomizationService.FONT_SIZE_XS_KEY = '--pep-font-size-xs';
PepCustomizationService.FONT_SIZE_SM_KEY = '--pep-font-size-sm';
PepCustomizationService.FONT_SIZE_MD_KEY = '--pep-font-size-md';
PepCustomizationService.FONT_SIZE_LG_KEY = '--pep-font-size-lg';
PepCustomizationService.FONT_SIZE_XL_KEY = '--pep-font-size-xl';
PepCustomizationService.FONT_SIZE_2XL_KEY = '--pep-font-size-2xl';
// Line height variables keys
PepCustomizationService.LINE_HEIGHT_2XS_KEY = '--pep-line-height-2xs';
PepCustomizationService.LINE_HEIGHT_XS_KEY = '--pep-line-height-xs';
PepCustomizationService.LINE_HEIGHT_SM_KEY = '--pep-line-height-sm';
PepCustomizationService.LINE_HEIGHT_MD_KEY = '--pep-line-height-md';
PepCustomizationService.LINE_HEIGHT_LG_KEY = '--pep-line-height-lg';
PepCustomizationService.LINE_HEIGHT_XL_KEY = '--pep-line-height-xl';
PepCustomizationService.LINE_HEIGHT_2XL_KEY = '--pep-line-height-2xl';
// Shadows offset variables keys
PepCustomizationService.SHADOW_NONE_OFFSET_KEY = '--pep-shadow-none-offset';
PepCustomizationService.SHADOW_XS_OFFSET_KEY = '--pep-shadow-xs-offset';
PepCustomizationService.SHADOW_SM_OFFSET_KEY = '--pep-shadow-sm-offset';
PepCustomizationService.SHADOW_MD_OFFSET_KEY = '--pep-shadow-md-offset';
PepCustomizationService.SHADOW_LG_OFFSET_KEY = '--pep-shadow-lg-offset';
PepCustomizationService.SHADOW_XL_OFFSET_KEY = '--pep-shadow-xl-offset';
// Spacing variables keys
PepCustomizationService.SPACING_SIZE_2XS_KEY = '--pep-spacing-2xs';
PepCustomizationService.SPACING_SIZE_XS_KEY = '--pep-spacing-xs';
PepCustomizationService.SPACING_SIZE_SM_KEY = '--pep-spacing-sm';
PepCustomizationService.SPACING_SIZE_MD_KEY = '--pep-spacing-md';
PepCustomizationService.SPACING_SIZE_LG_KEY = '--pep-spacing-lg';
PepCustomizationService.SPACING_SIZE_XL_KEY = '--pep-spacing-xl';
PepCustomizationService.SPACING_SIZE_2XL_KEY = '--pep-spacing-2xl';
PepCustomizationService.SPACING_SIZE_3XL_KEY = '--pep-spacing-3xl';
PepCustomizationService.SPACING_SIZE_4XL_KEY = '--pep-spacing-4xl';
PepCustomizationService.SPACING_SIZE_5XL_KEY = '--pep-spacing-5xl';
PepCustomizationService.SPACING_SIZE_6XL_KEY = '--pep-spacing-6xl';
PepCustomizationService.SPACING_SIZE_7XL_KEY = '--pep-spacing-7xl';
PepCustomizationService.SPACING_SIZE_8XL_KEY = '--pep-spacing-8xl';
PepCustomizationService.SPACING_SIZE_9XL_KEY = '--pep-spacing-9xl';
// Form variables keys
PepCustomizationService.FORM_FIELD_HEIGHT_KEY = '--pep-form-field-height';
PepCustomizationService.FORM_FIELD_TITLE_HEIGHT_KEY = '--pep-form-field-title-height';
PepCustomizationService.FORM_FIELD_SPACEING_KEY = '--pep-form-field-spacing';
PepCustomizationService.FORM_SPACEING_KEY = '--pep-form-spacing';
// Card variables keys
PepCustomizationService.CARD_FIELD_HEIGHT_KEY = '--pep-card-field-height';
PepCustomizationService.CARD_SPACEING_KEY = '--pep-card-spacing';
PepCustomizationService.CARD_SHADOW_OFFSET_KEY = '--pep-shadow-card-offset';
PepCustomizationService.CARD_BORDER_RADIUS_KEY = '--pep-card-border-radius';
// Table variables keys
PepCustomizationService.TABLE_FIELD_HEIGHT_KEY = '--pep-table-field-height';
PepCustomizationService.TABLE_SPACEING_KEY = '--pep-table-spacing';
PepCustomizationService.TABLE_BORDER_RADIUS_KEY = '--pep-table-border-radius';
PepCustomizationService.DEFAULT_HEADER_HEIGHT = 64; // Default
PepCustomizationService.DEFAULT_SPINNER_COLOR = '#78aa00';
PepCustomizationService.DEFAULT_BRANDING_COLOR = '#fff';
PepCustomizationService.ɵprov = i0.ɵɵdefineInjectable({ factory: function PepCustomizationService_Factory() { return new PepCustomizationService(i0.ɵɵinject(i1.PepSessionService), i0.ɵɵinject(i2.PepFileService), i0.ɵɵinject(i3.FormBuilder)); }, token: PepCustomizationService, providedIn: "root" });
PepCustomizationService.decorators = [
    { type: Injectable, args: [{
                providedIn: 'root',
            },] }
];
PepCustomizationService.ctorParameters = () => [
    { type: PepSessionService },
    { type: PepFileService },
    { type: FormBuilder }
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3VzdG9taXphdGlvbi5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvbmd4LWxpYi9zcmMvY29yZS9jdXN0b21pemF0aW9uL2N1c3RvbWl6YXRpb24uc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNDLE9BQU8sRUFBRSxXQUFXLEVBQTBCLE1BQU0sZ0JBQWdCLENBQUM7QUFDckUsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUN2QyxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxvQ0FBb0MsQ0FBQztBQUN2RSxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0saUNBQWlDLENBQUM7Ozs7O0FBTWpFLE1BQU0sT0FBTyx1QkFBdUI7SUE4SWhDLFlBQ1ksY0FBaUMsRUFDakMsV0FBMkIsRUFDNUIsRUFBZTtRQUZkLG1CQUFjLEdBQWQsY0FBYyxDQUFtQjtRQUNqQyxnQkFBVyxHQUFYLFdBQVcsQ0FBZ0I7UUFDNUIsT0FBRSxHQUFGLEVBQUUsQ0FBYTtRQVZuQixzQkFBaUIsR0FBWSxJQUFJLENBQUM7UUFDbEMsb0JBQWUsR0FBWSxJQUFJLENBQUM7UUFDaEMsdUJBQWtCLEdBQUcsdUJBQXVCLENBQUMscUJBQXFCLENBQUM7UUFDbkUsbUJBQWMsR0FBRyxDQUFDLENBQUM7UUFDbkIsaUJBQVksR0FBRyxJQUFJLGVBQWUsQ0FBUyxDQUFDLENBQUMsQ0FBQztRQUM5QyxrQkFBYSxHQUFHLElBQUksZUFBZSxDQUFTLENBQUMsQ0FBQyxDQUFDO1FBT2xELElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztRQUNsQixFQUFFO0lBQ04sQ0FBQztJQUVELG1CQUFtQixDQUFDLEtBQW1CLEVBQUUsY0FBYyxHQUFHLElBQUk7UUFDMUQsTUFBTSxVQUFVLEdBQUcsY0FBYyxDQUFDLENBQUMsQ0FBQyxLQUFL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LENBQUM7QUFDcEQsMENBQWtCLEdBQUcscUJBQXFCLENBQUM7QUFDM0MsK0NBQXVCLEdBQUcsMkJBQTJCLENBQUM7QUFFdEQsNkNBQXFCLEdBQUcsRUFBRSxDQUFDLENBQUMsVUFBVTtBQUV0Qyw2Q0FBcUIsR0FBRyxTQUFTLENBQUM7QUFDbEMsOENBQXNCLEdBQUcsTUFBTSxDQUFDOzs7WUF4STFDLFVBQVUsU0FBQztnQkFDUixVQUFVLEVBQUUsTUFBTTthQUNyQjs7O1lBTlEsaUJBQWlCO1lBQ2pCLGNBQWM7WUFIZCxXQUFXIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgRm9ybUJ1aWxkZXIsIEZvcm1Db250cm9sLCBGb3JtR3JvdXAgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyBCZWhhdmlvclN1YmplY3QgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IFBlcFNlc3Npb25TZXJ2aWNlIH0gZnJvbSAnLi4vY29tbW9uL3NlcnZpY2VzL3Nlc3Npb24uc2VydmljZSc7XG5pbXBvcnQgeyBQZXBGaWxlU2VydmljZSB9IGZyb20gJy4uL2NvbW1vbi9zZXJ2aWNlcy9maWxlLnNlcnZpY2UnO1xuaW1wb3J0IHsgUGVwU3R5bGVUeXBlLCBQZXBGaWVsZEJhc2UgfSBmcm9tICcuL2N1c3RvbWl6YXRpb24ubW9kZWwnO1xuXG5ASW5qZWN0YWJsZSh7XG4gICAgcHJvdmlkZWRJbjogJ3Jvb3QnLFxufSlcbmV4cG9ydCBjbGFzcyBQZXBDdXN0b21pemF0aW9uU2VydmljZSB7XG4gICAgc3RhdGljIFNUQU5EX0FMT05FX0ZJRUxEX0NMQVNTX05BTUUgPSAncGVwLWZpZWxkJztcblxuICAgIHN0YXRpYyBSRU1fU1RSSU5HID0gJ3JlbSc7XG4gICAgc3RhdGljIFBYX1NUUklORyA9ICdweCc7XG4gICAgc3RhdGljIFVTRVJfVEhFTUUgPSAndXNlcl90aGVtZSc7XG4gICAgc3RhdGljIFVTRVJfQ09MT1IgPSAndXNlcl9jb2xvcic7XG4gICAgc3RhdGljIFVTRVJfVEhFTUVfVkFSSUFCTEVTID0gJ3VzZXJfdGhlbWVfdmFyaWFibGVzJztcblxuICAgIC8vIEhlYWRlciBoZWlnaHRcbiAgICBzdGF0aWMgSEVBREVSX0hFSUdIVF9LRVkgPSAnLS1wZXAtaGVhZGVyLWhlaWdodCc7XG5cbiAgICAvLyBTaWRlIGJhciB2YXJpYWJsZXMga2V5c1xuICAgIHN0YXRpYyBTSURFX0JBUl9XSURUSF9LRVkgPSAnLS1wZXAtc2lkZS1iYXItd2lkdGgnO1xuXG4gICAgLy8gU2V0dGluZ3Mgd2lkdGhcbiAgICBzdGF0aWMgU0VUVElOR1NfV0lEVEhfS0VZID0gJy0tcGVwLXNldHRpbmdzLWJhci13aWR0aCc7XG5cbiAgICAvLyBUb3AgYmFyIHZhcmlhYmxlcyBrZXlzXG4gICAgc3RhdGljIFRPUF9CQVJfU1BBQ0lOR19UT1BfS0VZID0gJy0tcGVwLXRvcC1iYXItc3BhY2luZy10b3AnO1xuICAgIHN0YXRpYyBUT1BfQkFSX1NQQUNJTkdfQk9UVE9NX0tFWSA9ICctLXBlcC10b3AtYmFyLXNwYWNpbmctYm90dG9tJztcbiAgICBzdGF0aWMgVE9QX0JBUl9GSUVMRF9IRUlHSFRfS0VZID0gJy0tcGVwLXRvcC1iYXItZmllbGQtaGVpZ2h0JztcblxuICAgIC8vIEZvb3RlciB2YXJpYWJsZXMga2V5c1xuICAgIHN0YXRpYyBGT09URVJfSEVJR0hUX0tFWSA9ICctLXBlcC1mb290ZXItYmFyLWhlaWdodCc7XG4gICAgc3RhdGljIEZPT1RFUl9CQVJfU1BBQ0lOR19UT1BfS0VZID0gJy0tcGVwLWZvb3Rlci1iYXItc3BhY2luZy10b3AnO1xuICAgIHN0YXRpYyBGT09URVJfQkFSX1NQQUNJTkdfQk9UVE9NX0tFWSA9ICctLXBlcC1mb290ZXItYmFyLXNwYWNpbmctYm90dG9tJztcblxuICAgIC8vIE1haW4gY29udGFpbmVyIGhlaWdodFxuICAgIHN0YXRpYyBNQUlOX0hFSUdIVF9LRVkgPSAnLS1wZXAtbWFpbi1oZWlnaHQnO1xuXG4gICAgLy8gQ29sb3JzIHZhcmlhYmxlcyBrZXlzXG4gICAgc3RhdGljIENPTE9SX1VTRVJfUFJJTUFSWV9LRVkgPSAnLS1wZXAtY29sb3ItdXNlci1wcmltYXJ5JztcbiAgICBzdGF0aWMgQ09MT1JfVVNFUl9TRUNPTkRBUllfS0VZID0gJy0tcGVwLWNvbG9yLXVzZXItc2Vjb25kYXJ5JztcbiAgICBzdGF0aWMgQ09MT1JfU1lTVEVNX1BSSU1BUllfSU5WRVJUX0tFWSA9XG4gICAgICAgICctLXBlcC1jb2xvci1zeXN0ZW0tcHJpbWFyeS1pbnZlcnQnO1xuICAgIHN0YXRpYyBDT0xPUl9TWVNURU1fUFJJTUFSWV9LRVkgPSAnLS1wZXAtY29sb3Itc3lzdGVtLXByaW1hcnknO1xuICAgIHN0YXRpYyBDT0xPUl9URVhUX0xJTktfS0VZID0gJy0tcGVwLWNvbG9yLXRleHQtbGluayc7XG4gICAgc3RhdGljIENPTE9SX1NZU1RFTV9DQVVUSU9OX0tFWSA9ICctLXBlcC1jb2xvci1zeXN0ZW0tY2F1dGlvbic7XG4gICAgc3RhdGljIENPTE9SX1NZU1RFTV9TVUNDRVNTX0tFWSA9ICctLXBlcC1jb2xvci1zeXN0ZW0tc3VjY2Vzcyc7XG4gICAgc3RhdGljIENPTE9SX1NUUk9OR19LRVkgPSAnLS1wZXAtY29sb3Itc3Ryb25nJztcbiAgICBzdGF0aWMgQ09MT1JfUkVHVUxBUl9LRVkgPSAnLS1wZXAtY29sb3ItcmVndWxhcic7XG4gICAgc3RhdGljIENPTE9SX1dFQUtfS0VZID0gJy0tcGVwLWNvbG9yLXdlYWsnO1xuXG4gICAgLy8gVG9wIGhlYWRlciB2YXJpYWJsZXMga2V5c1xuICAgIHN0YXRpYyBDT0xPUl9UT1BfSEVBREVSX0tFWSA9ICctLXBlcC1jb2xvci10b3AtaGVhZGVyJztcbiAgICBzdGF0aWMgU1RZTEVfVE9QX0hFQURFUl9LRVkgPSAnLS1wZXAtc3R5bGUtdG9wLWhlYWRlcic7XG5cbiAgICAvLyBRUyB2YXJpYWJsZXMga2V5c1xuICAgIHN0YXRpYyBDT0xPUl9RU19LRVkgPSAnLS1wZXAtY29sb3ItcXMnO1xuICAgIHN0YXRpYyBTVFlMRV9RU19LRVkgPSAnLS1wZXAtc3R5bGUtcXMnO1xuXG4gICAgLy8gRm9udHMgdmFyaWFibGVzIGtleXNcbiAgICBzdGF0aWMgRk9OVF9GQU1JTFlfVElUTEVfS0VZID0gJy0tcGVwLWZvbnQtZmFtaWx5LXRpdGxlJztcbiAgICBzdGF0aWMgRk9OVF9GQU1JTFlfVElUTEVfTk9STUFMX1VSTF9LRVkgPVxuICAgICAgICAnLS1wZXAtZm9udC1mYW1pbHktdGl0bGUtbm9ybWFsLXVybCc7XG4gICAgc3RhdGljIEZPTlRfRkFNSUxZX1RJVExFX0JPTERfVVJMX0tFWSA9ICctLXBlcC1mb250LWZhbWlseS10aXRsZS1ib2xkLXVybCc7XG4gICAgc3RhdGljIEZPTlRfRkFNSUxZX0JPRFlfS0VZID0gJy0tcGVwLWZvbnQtZmFtaWx5LWJvZHknO1xuICAgIHN0YXRpYyBGT05UX0ZBTUlMWV9CT0RZX05PUk1BTF9VUkxfS0VZID1cbiAgICAgICAgJy0tcGVwLWZvbnQtZmFtaWx5LWJvZHktbm9ybWFsLXVybCc7XG4gICAgc3RhdGljIEZPTlRfRkFNSUxZX0JPRFlfQk9MRF9VUkxfS0VZID0gJy0tcGVwLWZvbnQtZmFtaWx5LWJvZHktYm9sZC11cmwnO1xuXG4gICAgLy8gQm9yZGVyIHJhZGl1cyB2YXJpYWJsZXMga2V5c1xuICAgIHN0YXRpYyBCT1JERVJfUkFESVVTX0tFWSA9ICctLXBlcC1ib3JkZXItcmFkaXVzJztcbiAgICBzdGF0aWMgQk9SREVSX1JBRElVU19TTV9LRVkgPVxuICAgICAgICBQZXBDdXN0b21pemF0aW9uU2VydmljZS5CT1JERVJfUkFESVVTX0tFWSArICctc20nO1xuICAgIHN0YXRpYyBCT1JERVJfUkFESVVTX01EX0tFWSA9XG4gICAgICAgIFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLkJPUkRFUl9SQURJVVNfS0VZICsgJy1tZCc7XG4gICAgc3RhdGljIEJPUkRFUl9SQURJVVNfTEdfS0VZID1cbiAgICAgICAgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuQk9SREVSX1JBRElVU19LRVkgKyAnLWxnJztcblxuICAgIC8vIEZvbnRzIHZhcmlhYmxlcyBrZXlzXG4gICAgc3RhdGljIEZPTlRfU0laRV8yWFNfS0VZID0gJy0tcGVwLWZvbnQtc2l6ZS0yeHMnO1xuICAgIHN0YXRpYyBGT05UX1NJWkVfWFNfS0VZID0gJy0tcGVwLWZvbnQtc2l6ZS14cyc7XG4gICAgc3RhdGljIEZPTlRfU0laRV9TTV9LRVkgPSAnLS1wZXAtZm9udC1zaXplLXNtJztcbiAgICBzdGF0aWMgRk9OVF9TSVpFX01EX0tFWSA9ICctLXBlcC1mb250LXNpemUtbWQnO1xuICAgIHN0YXRpYyBGT05UX1NJWkVfTEdfS0VZID0gJy0tcGVwLWZvbnQtc2l6ZS1sZyc7XG4gICAgc3RhdGljIEZPTlRfU0laRV9YTF9LRVkgPSAnLS1wZXAtZm9udC1zaXplLXhsJztcbiAgICBzdGF0aWMgRk9OVF9TSVpFXzJYTF9LRVkgPSAnLS1wZXAtZm9udC1zaXplLTJ4bCc7XG5cbiAgICAvLyBMaW5lIGhlaWdodCB2YXJpYWJsZXMga2V5c1xuICAgIHN0YXRpYyBMSU5FX0hFSUdIVF8yWFNfS0VZID0gJy0tcGVwLWxpbmUtaGVpZ2h0LTJ4cyc7XG4gICAgc3RhdGljIExJTkVfSEVJR0hUX1hTX0tFWSA9ICctLXBlcC1saW5lLWhlaWdodC14cyc7XG4gICAgc3RhdGljIExJTkVfSEVJR0hUX1NNX0tFWSA9ICctLXBlcC1saW5lLWhlaWdodC1zbSc7XG4gICAgc3RhdGljIExJTkVfSEVJR0hUX01EX0tFWSA9ICctLXBlcC1saW5lLWhlaWdodC1tZCc7XG4gICAgc3RhdGljIExJTkVfSEVJR0hUX0xHX0tFWSA9ICctLXBlcC1saW5lLWhlaWdodC1sZyc7XG4gICAgc3RhdGljIExJTkVfSEVJR0hUX1hMX0tFWSA9ICctLXBlcC1saW5lLWhlaWdodC14bCc7XG4gICAgc3RhdGljIExJTkVfSEVJR0hUXzJYTF9LRVkgPSAnLS1wZXAtbGluZS1oZWlnaHQtMnhsJztcblxuICAgIC8vIFNoYWRvd3Mgb2Zmc2V0IHZhcmlhYmxlcyBrZXlzXG4gICAgc3RhdGljIFNIQURPV19OT05FX09GRlNFVF9LRVkgPSAnLS1wZXAtc2hhZG93LW5vbmUtb2Zmc2V0JztcbiAgICBzdGF0aWMgU0hBRE9XX1hTX09GRlNFVF9LRVkgPSAnLS1wZXAtc2hhZG93LXhzLW9mZnNldCc7XG4gICAgc3RhdGljIFNIQURPV19TTV9PRkZTRVRfS0VZID0gJy0tcGVwLXNoYWRvdy1zbS1vZmZzZXQnO1xuICAgIHN0YXRpYyBTSEFET1dfTURfT0ZGU0VUX0tFWSA9ICctLXBlcC1zaGFkb3ctbWQtb2Zmc2V0JztcbiAgICBzdGF0aWMgU0hBRE9XX0xHX09GRlNFVF9LRVkgPSAnLS1wZXAtc2hhZG93LWxnLW9mZnNldCc7XG4gICAgc3RhdGljIFNIQURPV19YTF9PRkZTRVRfS0VZID0gJy0tcGVwLXNoYWRvdy14bC1vZmZzZXQnO1xuXG4gICAgLy8gU3BhY2luZyB2YXJpYWJsZXMga2V5c1xuICAgIHN0YXRpYyBTUEFDSU5HX1NJWkVfMlhTX0tFWSA9ICctLXBlcC1zcGFjaW5nLTJ4cyc7XG4gICAgc3RhdGljIFNQQUNJTkdfU0laRV9YU19LRVkgPSAnLS1wZXAtc3BhY2luZy14cyc7XG4gICAgc3RhdGljIFNQQUNJTkdfU0laRV9TTV9LRVkgPSAnLS1wZXAtc3BhY2luZy1zbSc7XG4gICAgc3RhdGljIFNQQUNJTkdfU0laRV9NRF9LRVkgPSAnLS1wZXAtc3BhY2luZy1tZCc7XG4gICAgc3RhdGljIFNQQUNJTkdfU0laRV9MR19LRVkgPSAnLS1wZXAtc3BhY2luZy1sZyc7XG4gICAgc3RhdGljIFNQQUNJTkdfU0laRV9YTF9LRVkgPSAnLS1wZXAtc3BhY2luZy14bCc7XG4gICAgc3RhdGljIFNQQUNJTkdfU0laRV8yWExfS0VZID0gJy0tcGVwLXNwYWNpbmctMnhsJztcbiAgICBzdGF0aWMgU1BBQ0lOR19TSVpFXzNYTF9LRVkgPSAnLS1wZXAtc3BhY2luZy0zeGwnO1xuICAgIHN0YXRpYyBTUEFDSU5HX1NJWkVfNFhMX0tFWSA9ICctLXBlcC1zcGFjaW5nLTR4bCc7XG4gICAgc3RhdGljIFNQQUNJTkdfU0laRV81WExfS0VZID0gJy0tcGVwLXNwYWNpbmctNXhsJztcbiAgICBzdGF0aWMgU1BBQ0lOR19TSVpFXzZYTF9LRVkgPSAnLS1wZXAtc3BhY2luZy02eGwnO1xuICAgIHN0YXRpYyBTUEFDSU5HX1NJWkVfN1hMX0tFWSA9ICctLXBlcC1zcGFjaW5nLTd4bCc7XG4gICAgc3RhdGljIFNQQUNJTkdfU0laRV84WExfS0VZID0gJy0tcGVwLXNwYWNpbmctOHhsJztcbiAgICBzdGF0aWMgU1BBQ0lOR19TSVpFXzlYTF9LRVkgPSAnLS1wZXAtc3BhY2luZy05eGwnO1xuXG4gICAgLy8gRm9ybSB2YXJpYWJsZXMga2V5c1xuICAgIHN0YXRpYyBGT1JNX0ZJRUxEX0hFSUdIVF9LRVkgPSAnLS1wZXAtZm9ybS1maWVsZC1oZWlnaHQnO1xuICAgIHN0YXRpYyBGT1JNX0ZJRUxEX1RJVExFX0hFSUdIVF9LRVkgPSAnLS1wZXAtZm9ybS1maWVsZC10aXRsZS1oZWlnaHQnO1xuICAgIHN0YXRpYyBGT1JNX0ZJRUxEX1NQQUNFSU5HX0tFWSA9ICctLXBlcC1mb3JtLWZpZWxkLXNwYWNpbmcnO1xuICAgIHN0YXRpYyBGT1JNX1NQQUNFSU5HX0tFWSA9ICctLXBlcC1mb3JtLXNwYWNpbmcnO1xuXG4gICAgLy8gQ2FyZCB2YXJpYWJsZXMga2V5c1xuICAgIHN0YXRpYyBDQVJEX0ZJRUxEX0hFSUdIVF9LRVkgPSAnLS1wZXAtY2FyZC1maWVsZC1oZWlnaHQnO1xuICAgIHN0YXRpYyBDQVJEX1NQQUNFSU5HX0tFWSA9ICctLXBlcC1jYXJkLXNwYWNpbmcnO1xuICAgIHN0YXRpYyBDQVJEX1NIQURPV19PRkZTRVRfS0VZID0gJy0tcGVwLXNoYWRvdy1jYXJkLW9mZnNldCc7XG4gICAgc3RhdGljIENBUkRfQk9SREVSX1JBRElVU19LRVkgPSAnLS1wZXAtY2FyZC1ib3JkZXItcmFkaXVzJztcblxuICAgIC8vIFRhYmxlIHZhcmlhYmxlcyBrZXlzXG4gICAgc3RhdGljIFRBQkxFX0ZJRUxEX0hFSUdIVF9LRVkgPSAnLS1wZXAtdGFibGUtZmllbGQtaGVpZ2h0JztcbiAgICBzdGF0aWMgVEFCTEVfU1BBQ0VJTkdfS0VZID0gJy0tcGVwLXRhYmxlLXNwYWNpbmcnO1xuICAgIHN0YXRpYyBUQUJMRV9CT1JERVJfUkFESVVTX0tFWSA9ICctLXBlcC10YWJsZS1ib3JkZXItcmFkaXVzJztcblxuICAgIHN0YXRpYyBERUZBVUxUX0hFQURFUl9IRUlHSFQgPSA2NDsgLy8gRGVmYXVsdFxuXG4gICAgc3RhdGljIERFRkFVTFRfU1BJTk5FUl9DT0xPUiA9ICcjNzhhYTAwJztcbiAgICBzdGF0aWMgREVGQVVMVF9CUkFORElOR19DT0xPUiA9ICcjZmZmJztcblxuICAgIHB1YmxpYyBoYXNDdXN0b21Ib21lcGFnZTogYm9vbGVhbiA9IG51bGw7XG4gICAgcHVibGljIGhhc0N1c3RvbUhlYWRlcjogYm9vbGVhbiA9IG51bGw7XG4gICAgcHVibGljIGN1c3RvbUhlYWRlckhlaWdodCA9IFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLkRFRkFVTFRfSEVBREVSX0hFSUdIVDtcbiAgICBwdWJsaWMgbWFpbkNvbnRIZWlnaHQgPSAwO1xuICAgIHB1YmxpYyBmb290ZXJIZWlnaHQgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PG51bWJlcj4oMCk7XG4gICAgcHVibGljIHNldHRpbmdzV2lkdGggPSBuZXcgQmVoYXZpb3JTdWJqZWN0PG51bWJlcj4oMCk7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBzZXNzaW9uU2VydmljZTogUGVwU2Vzc2lvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgZmlsZVNlcnZpY2U6IFBlcEZpbGVTZXJ2aWNlLFxuICAgICAgICBwdWJsaWMgZmI6IEZvcm1CdWlsZGVyXG4gICAgKSB7XG4gICAgICAgIHRoaXMuaGlkZUZvb3RlcigpO1xuICAgICAgICAvL1xuICAgIH1cblxuICAgIGdldERlZmF1bHRGcm9tR3JvdXAoZmllbGQ6IFBlcEZpZWxkQmFzZSwgd2l0aFZhbGlkYXRvcnMgPSB0cnVlKTogRm9ybUdyb3VwIHtcbiAgICAgICAgY29uc3QgdmFsaWRhdG9ycyA9IHdpdGhWYWxpZGF0b3JzID8gZmllbGQuZ2V0VmFsaWRhdG9ycygpIDogW107XG4gICAgICAgIGNvbnN0IGdyb3VwID0ge307XG4gICAgICAgIGdyb3VwW2ZpZWxkLmtleV0gPSBbXG4gICAgICAgICAgICB7IHZhbHVlOiBmaWVsZC52YWx1ZSwgZGlzYWJsZWQ6IGZpZWxkLmRpc2FibGVkIH0sXG4gICAgICAgICAgICB2YWxpZGF0b3JzLFxuICAgICAgICBdO1xuICAgICAgICByZXR1cm4gdGhpcy5mYi5ncm91cChncm91cCk7XG4gICAgfVxuXG4gICAgZ2V0Rm9ybUNvbnRyb2woXG4gICAgICAgIGZvcm06IEZvcm1Hcm91cCxcbiAgICAgICAgZmllbGRLZXk6IHN0cmluZyxcbiAgICAgICAgcGFyZW50RmllbGRLZXk6IHN0cmluZyA9IG51bGxcbiAgICApOiBhbnkge1xuICAgICAgICBsZXQgZm9ybUNvbnRyb2wgPSBudWxsO1xuXG4gICAgICAgIGlmIChmb3JtICYmIGZvcm0uY29udHJvbHMpIHtcbiAgICAgICAgICAgIGlmIChwYXJlbnRGaWVsZEtleSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGZvcm1Db250cm9sID0gZm9ybS5jb250cm9sc1tmaWVsZEtleV07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvcm1Db250cm9sID0gZm9ybS5jb250cm9sc1twYXJlbnRGaWVsZEtleV0uZ2V0KGZpZWxkS2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmb3JtQ29udHJvbDtcbiAgICB9XG5cbiAgICB1cGRhdGVGb3JtRmllbGRWYWx1ZShcbiAgICAgICAgZm9ybTogRm9ybUdyb3VwLFxuICAgICAgICBmaWVsZEtleTogc3RyaW5nLFxuICAgICAgICB2YWx1ZSA9ICcnLFxuICAgICAgICBwYXJlbnRGaWVsZEtleTogc3RyaW5nID0gbnVsbFxuICAgICk6IHZvaWQge1xuICAgICAgICBjb25zdCBmb3JtQ29udHJvbCA9IHRoaXMuZ2V0Rm9ybUNvbnRyb2woZm9ybSwgZmllbGRLZXksIHBhcmVudEZpZWxkS2V5KTtcbiAgICAgICAgaWYgKGZvcm1Db250cm9sKSB7XG4gICAgICAgICAgICBmb3JtQ29udHJvbC5zZXRWYWx1ZSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB1cGRhdGVGb3JtRmllbGQoXG4gICAgICAgIGZvcm06IEZvcm1Hcm91cCxcbiAgICAgICAgZmllbGQ6IFBlcEZpZWxkQmFzZSxcbiAgICAgICAgdmFsdWUgPSAnJyxcbiAgICAgICAgcGFyZW50RmllbGQ6IFBlcEZpZWxkQmFzZSA9IG51bGxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgY29uc3QgZm9ybUNvbnRyb2w6IEZvcm1Db250cm9sID0gdGhpcy5nZXRGb3JtQ29udHJvbChcbiAgICAgICAgICAgIGZvcm0sXG4gICAgICAgICAgICBmaWVsZC5rZXksXG4gICAgICAgICAgICBwYXJlbnRGaWVsZD8ua2V5XG4gICAgICAgICk7XG4gICAgICAgIGlmIChmb3JtQ29udHJvbCkge1xuICAgICAgICAgICAgZm9ybUNvbnRyb2wuc2V0VmFsdWUodmFsdWUpO1xuXG4gICAgICAgICAgICAvLyBJZiBkaXNhYmxlZCBoYXMgY2hhbmdlZC5cbiAgICAgICAgICAgIGlmIChmb3JtQ29udHJvbC5kaXNhYmxlZCAhPT0gZmllbGQuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgICAgICBmaWVsZC5kaXNhYmxlZCA/IGZvcm1Db250cm9sLmRpc2FibGUoKSA6IGZvcm1Db250cm9sLmVuYWJsZSgpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgdmFsaWRhdG9ycyA9IGZpZWxkLmdldFZhbGlkYXRvcnMoKTtcbiAgICAgICAgICAgICAgICBmb3JtQ29udHJvbC5zZXRWYWxpZGF0b3JzKHZhbGlkYXRvcnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgY2FsY3VsYXRlRm9ybUZpZWxkSGVpZ2h0KFxuICAgICAgICB3aXRoVGl0bGUgPSB0cnVlLFxuICAgICAgICByb3dTcGFuID0gMSxcbiAgICAgICAgc3RhbmRBbG9uZSA9IGZhbHNlXG4gICAgKTogbnVtYmVyIHtcbiAgICAgICAgY29uc3QgdGhlbWVWYXJzID0gdGhpcy5nZXRUaGVtZVZhcmlhYmxlcygpO1xuICAgICAgICBjb25zdCByb3dGaWVsZEhlaWdodCA9IHRoaXMuZ2V0TnVtYmVyVGhlbWVWYXJpYWJsZShcbiAgICAgICAgICAgIHRoZW1lVmFycyxcbiAgICAgICAgICAgIFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLkZPUk1fRklFTERfSEVJR0hUX0tFWVxuICAgICAgICApO1xuICAgICAgICBjb25zdCByb3dGaWVsZFRpdGxlSGVpZ2h0ID0gdGhpcy5nZXROdW1iZXJUaGVtZVZhcmlhYmxlKFxuICAgICAgICAgICAgdGhlbWVWYXJzLFxuICAgICAgICAgICAgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuRk9STV9GSUVMRF9USVRMRV9IRUlHSFRfS0VZXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHJvd0ZpZWxkU3BhY2luZ0JvdHRvbSA9IHRoaXMuZ2V0TnVtYmVyVGhlbWVWYXJpYWJsZShcbiAgICAgICAgICAgIHRoZW1lVmFycyxcbiAgICAgICAgICAgIFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLkZPUk1fU1BBQ0VJTkdfS0VZXG4gICAgICAgICk7XG5cbiAgICAgICAgbGV0IGZpZWxkSGVpZ2h0ID0gMDtcbiAgICAgICAgaWYgKHJvd1NwYW4gPT09IDEpIHtcbiAgICAgICAgICAgIGZpZWxkSGVpZ2h0ID1cbiAgICAgICAgICAgICAgICAod2l0aFRpdGxlID8gcm93RmllbGRUaXRsZUhlaWdodCA6IDApICsgcm93RmllbGRIZWlnaHQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCByb3dTcGFuQ2FsYyA9IHdpdGhUaXRsZSA/IHJvd1NwYW4gOiByb3dTcGFuIC0gMTtcbiAgICAgICAgICAgIGZpZWxkSGVpZ2h0ID1cbiAgICAgICAgICAgICAgICByb3dTcGFuICogcm93RmllbGRIZWlnaHQgK1xuICAgICAgICAgICAgICAgIHJvd1NwYW5DYWxjICogcm93RmllbGRUaXRsZUhlaWdodCArXG4gICAgICAgICAgICAgICAgKHN0YW5kQWxvbmUgPyAwIDogcm93U3BhbkNhbGMgKiByb3dGaWVsZFNwYWNpbmdCb3R0b20pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZpZWxkSGVpZ2h0O1xuICAgIH1cblxuICAgIGNhbGN1bGF0ZUNhcmRSb3dzSGVpZ2h0KHJvd3NDb3VudCA9IDEsIHdpdGhTcGFjaW5nID0gdHJ1ZSk6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IHRoZW1lVmFycyA9IHRoaXMuZ2V0VGhlbWVWYXJpYWJsZXMoKTtcbiAgICAgICAgY29uc3QgY2FyZEZpZWxkSGVpZ2h0ID0gdGhpcy5nZXROdW1iZXJUaGVtZVZhcmlhYmxlKFxuICAgICAgICAgICAgdGhlbWVWYXJzLFxuICAgICAgICAgICAgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuQ0FSRF9GSUVMRF9IRUlHSFRfS0VZXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGNhcmRGaWVsZFNwYWNpbmcgPSB0aGlzLmdldE51bWJlclRoZW1lVmFyaWFibGUoXG4gICAgICAgICAgICB0aGVtZVZhcnMsXG4gICAgICAgICAgICBQZXBDdXN0b21pemF0aW9uU2VydmljZS5DQVJEX1NQQUNFSU5HX0tFWVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGZpZWxkSGVpZ2h0ID1cbiAgICAgICAgICAgIHJvd3NDb3VudCAqIGNhcmRGaWVsZEhlaWdodCArXG4gICAgICAgICAgICAocm93c0NvdW50IC0gMSkgKiAod2l0aFNwYWNpbmcgPyBjYXJkRmllbGRTcGFjaW5nIDogMCk7XG4gICAgICAgIHJldHVybiBmaWVsZEhlaWdodDtcbiAgICB9XG5cbiAgICBjYWxjdWxhdGVUYWJsZVJvd3NIZWlnaHQocm93c0NvdW50ID0gMSwgd2l0aFNwYWNpbmcgPSB0cnVlKTogbnVtYmVyIHtcbiAgICAgICAgY29uc3QgdGhlbWVWYXJzID0gdGhpcy5nZXRUaGVtZVZhcmlhYmxlcygpO1xuICAgICAgICBjb25zdCB0YWJsZUZpZWxkSGVpZ2h0ID0gdGhpcy5nZXROdW1iZXJUaGVtZVZhcmlhYmxlKFxuICAgICAgICAgICAgdGhlbWVWYXJzLFxuICAgICAgICAgICAgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuVEFCTEVfRklFTERfSEVJR0hUX0tFWVxuICAgICAgICApO1xuICAgICAgICBjb25zdCB0YWJsZUZpZWxkU3BhY2luZyA9IHRoaXMuZ2V0TnVtYmVyVGhlbWVWYXJpYWJsZShcbiAgICAgICAgICAgIHRoZW1lVmFycyxcbiAgICAgICAgICAgIFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLlRBQkxFX1NQQUNFSU5HX0tFWVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGZpZWxkSGVpZ2h0ID1cbiAgICAgICAgICAgIHJvd3NDb3VudCAqXG4gICAgICAgICAgICAodGFibGVGaWVsZEhlaWdodCArICh3aXRoU3BhY2luZyA/IHRhYmxlRmllbGRTcGFjaW5nICogMiA6IDApKTtcbiAgICAgICAgcmV0dXJuIGZpZWxkSGVpZ2h0O1xuICAgIH1cblxuICAgIGNhbGN1bGF0ZUZpZWxkSGVpZ2h0KGxheW91dFR5cGUgPSAnZm9ybScsIHJvd1NwYW4sIHN0YW5kQWxvbmUpOiBzdHJpbmcge1xuICAgICAgICBsZXQgZmllbGRIZWlnaHQgPSAnaW5oZXJpdCc7IC8vIERlZmF1bHQgZm9yIGNhcmQgKHdpdGggbm8gdGl0bGUpXG4gICAgICAgIGlmIChsYXlvdXRUeXBlID09PSAndGFibGUnKSB7XG4gICAgICAgICAgICBmaWVsZEhlaWdodCA9IHRoaXMuZ2V0VGhlbWVWYXJpYWJsZShcbiAgICAgICAgICAgICAgICBQZXBDdXN0b21pemF0aW9uU2VydmljZS5UQUJMRV9GSUVMRF9IRUlHSFRfS0VZXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKGxheW91dFR5cGUgPT09ICdjYXJkJykge1xuICAgICAgICAgICAgZmllbGRIZWlnaHQgPVxuICAgICAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlQ2FyZFJvd3NIZWlnaHQocm93U3BhbiwgIXN0YW5kQWxvbmUpICtcbiAgICAgICAgICAgICAgICBQZXBDdXN0b21pemF0aW9uU2VydmljZS5SRU1fU1RSSU5HO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gRm9ybVxuICAgICAgICAgICAgZmllbGRIZWlnaHQgPVxuICAgICAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlRm9ybUZpZWxkSGVpZ2h0KGZhbHNlLCByb3dTcGFuLCBzdGFuZEFsb25lKSArXG4gICAgICAgICAgICAgICAgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuUkVNX1NUUklORztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmaWVsZEhlaWdodDtcbiAgICB9XG5cbiAgICBnZXRCcmFuZGluZ1RoZW1lKCk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IHRoZW1lT2JqID0gdGhpcy5zZXNzaW9uU2VydmljZS5nZXRPYmplY3QoXG4gICAgICAgICAgICBQZXBDdXN0b21pemF0aW9uU2VydmljZS5VU0VSX1RIRU1FXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiAodGhlbWVPYmogJiYgdGhlbWVPYmouVGhlbWUpIHx8ICdkZWZhdWx0LXRoZW1lJzsgLy8gJ2xpZ2h0LXRoZW1lJztcbiAgICB9XG5cbiAgICBnZXREZWZhdWx0VGhlbWVMYXlvdXRWYXJpYWJsZXModGhlbWVWYXJzOiBhbnkpOiB2b2lkIHtcbiAgICAgICAgLy8gRGVjbGFyZSBkZWZhdWx0IHNjcmVlbiBzaXplcy5cbiAgICAgICAgdGhlbWVWYXJzWyctLXBlcC1zY3JlZW4tbWF4LXNpemUtMnhzJ10gPVxuICAgICAgICAgICAgJzQ2MCcgKyBQZXBDdXN0b21pemF0aW9uU2VydmljZS5QWF9TVFJJTkc7XG4gICAgICAgIHRoZW1lVmFyc1snLS1wZXAtc2NyZWVuLW1heC1zaXplLXhzJ10gPVxuICAgICAgICAgICAgJzc2NycgKyBQZXBDdXN0b21pemF0aW9uU2VydmljZS5QWF9TVFJJTkc7XG4gICAgICAgIHRoZW1lVmFyc1snLS1wZXAtc2NyZWVuLW1heC1zaXplLXNtJ10gPVxuICAgICAgICAgICAgJzk5MScgKyBQZXBDdXN0b21pemF0aW9uU2VydmljZS5QWF9TVFJJTkc7XG4gICAgICAgIHRoZW1lVmFyc1snLS1wZXAtc2NyZWVuLW1heC1zaXplLW1kJ10gPVxuICAgICAgICAgICAgJzExOTknICsgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuUFhfU1RSSU5HO1xuICAgICAgICB0aGVtZVZhcnNbJy0tcGVwLXNjcmVlbi1tYXgtc2l6ZS1sZyddID1cbiAgICAgICAgICAgICcxMzY2JyArIFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLlBYX1NUUklORztcbiAgICAgICAgdGhlbWVWYXJzWyctLXBlcC1zY3JlZW4tbWF4LXNpemUteGwnXSA9XG4gICAgICAgICAgICAnMTkyMCcgKyBQZXBDdXN0b21pemF0aW9uU2VydmljZS5QWF9TVFJJTkc7XG5cbiAgICAgICAgLy8gRGVjbGFyZSBkZWZhdWx0IHRvcCBiYXIuXG4gICAgICAgIHRoZW1lVmFyc1tQZXBDdXN0b21pemF0aW9uU2VydmljZS5TSURFX0JBUl9XSURUSF9LRVldID1cbiAgICAgICAgICAgICcxNicgKyBQZXBDdXN0b21pemF0aW9uU2VydmljZS5SRU1fU1RSSU5HO1xuXG4gICAgICAgIC8vIERlY2xhcmUgZGVmYXVsdCB0b3AgYmFyLlxuICAgICAgICB0aGVtZVZhcnNbUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuVE9QX0JBUl9TUEFDSU5HX1RPUF9LRVldID1cbiAgICAgICAgICAgICcxLjUnICsgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuUkVNX1NUUklORztcbiAgICAgICAgdGhlbWVWYXJzW1BlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLlRPUF9CQVJfU1BBQ0lOR19CT1RUT01fS0VZXSA9XG4gICAgICAgICAgICAnMC41JyArIFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLlJFTV9TVFJJTkc7XG4gICAgICAgIHRoZW1lVmFyc1tQZXBDdXN0b21pemF0aW9uU2VydmljZS5UT1BfQkFSX0ZJRUxEX0hFSUdIVF9LRVldID1cbiAgICAgICAgICAgICcyLjUnICsgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuUkVNX1NUUklORztcblxuICAgICAgICAvLyBEZWNsYXJlIGRlZmF1bHQgZm9vdGVyLlxuICAgICAgICB0aGVtZVZhcnNbUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuRk9PVEVSX0JBUl9TUEFDSU5HX1RPUF9LRVldID1cbiAgICAgICAgICAgICcwLjc1JyArIFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLlJFTV9TVFJJTkc7XG4gICAgICAgIHRoZW1lVmFyc1tQZXBDdXN0b21pemF0aW9uU2VydmljZS5GT09URVJfQkFSX1NQQUNJTkdfQk9UVE9NX0tFWV0gPVxuICAgICAgICAgICAgJzEuMjUnICsgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuUkVNX1NUUklORztcbiAgICB9XG5cbiAgICBnZXREZWZhdWx0VGhlbWVCb3JkZXJSYWRpdXNWYXJpYWJsZXModGhlbWVWYXJzOiBhbnkpOiB2b2lkIHtcbiAgICAgICAgdGhlbWVWYXJzW1BlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLkJPUkRFUl9SQURJVVNfU01fS0VZXSA9XG4gICAgICAgICAgICAnMC4xMjUnICsgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuUkVNX1NUUklORztcbiAgICAgICAgdGhlbWVWYXJzW1BlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLkJPUkRFUl9SQURJVVNfTURfS0VZXSA9XG4gICAgICAgICAgICAnMC4yNScgKyBQZXBDdXN0b21pemF0aW9uU2VydmljZS5SRU1fU1RSSU5HO1xuICAgICAgICB0aGVtZVZhcnNbUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuQk9SREVSX1JBRElVU19MR19LRVldID1cbiAgICAgICAgICAgICcwLjUnICsgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuUkVNX1NUUklORztcbiAgICB9XG5cbiAgICBnZXREZWZhdWx0VGhlbWVTcGFjaW5nVmFyaWFibGVzKHRoZW1lVmFyczogYW55KTogdm9pZCB7XG4gICAgICAgIHRoZW1lVmFyc1tQZXBDdXN0b21pemF0aW9uU2VydmljZS5TUEFDSU5HX1NJWkVfMlhTX0tFWV0gPVxuICAgICAgICAgICAgJzAuMTI1JyArIFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLlJFTV9TVFJJTkc7XG4gICAgICAgIHRoZW1lVmFyc1tQZXBDdXN0b21pemF0aW9uU2VydmljZS5TUEFDSU5HX1NJWkVfWFNfS0VZXSA9XG4gICAgICAgICAgICAnMC4yNScgKyBQZXBDdXN0b21pemF0aW9uU2VydmljZS5SRU1fU1RSSU5HO1xuICAgICAgICB0aGVtZVZhcnNbUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuU1BBQ0lOR19TSVpFX1NNX0tFWV0gPVxuICAgICAgICAgICAgJzAuNScgKyBQZXBDdXN0b21pemF0aW9uU2VydmljZS5SRU1fU1RSSU5HO1xuICAgICAgICB0aGVtZVZhcnNbUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuU1BBQ0lOR19TSVpFX01EX0tFWV0gPVxuICAgICAgICAgICAgJzAuNzUnICsgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuUkVNX1NUUklORztcbiAgICAgICAgdGhlbWVWYXJzW1BlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLlNQQUNJTkdfU0laRV9MR19LRVldID1cbiAgICAgICAgICAgICcxJyArIFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLlJFTV9TVFJJTkc7XG4gICAgICAgIHRoZW1lVmFyc1tQZXBDdXN0b21pemF0aW9uU2VydmljZS5TUEFDSU5HX1NJWkVfWExfS0VZXSA9XG4gICAgICAgICAgICAnMS41JyArIFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLlJFTV9TVFJJTkc7XG4gICAgICAgIHRoZW1lVmFyc1tQZXBDdXN0b21pemF0aW9uU2VydmljZS5TUEFDSU5HX1NJWkVfMlhMX0tFWV0gPVxuICAgICAgICAgICAgJzInICsgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuUkVNX1NUUklORztcbiAgICAgICAgdGhlbWVWYXJzW1BlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLlNQQUNJTkdfU0laRV8zWExfS0VZXSA9XG4gICAgICAgICAgICAnMi41JyArIFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLlJFTV9TVFJJTkc7XG4gICAgICAgIHRoZW1lVmFyc1tQZXBDdXN0b21pemF0aW9uU2VydmljZS5TUEFDSU5HX1NJWkVfNFhMX0tFWV0gPVxuICAgICAgICAgICAgJzMnICsgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuUkVNX1NUUklORztcbiAgICAgICAgdGhlbWVWYXJzW1BlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLlNQQUNJTkdfU0laRV81WExfS0VZXSA9XG4gICAgICAgICAgICAnMy41JyArIFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLlJFTV9TVFJJTkc7XG4gICAgICAgIHRoZW1lVmFyc1tQZXBDdXN0b21pemF0aW9uU2VydmljZS5TUEFDSU5HX1NJWkVfNlhMX0tFWV0gPVxuICAgICAgICAgICAgJzUnICsgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuUkVNX1NUUklORztcbiAgICAgICAgdGhlbWVWYXJzW1BlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLlNQQUNJTkdfU0laRV83WExfS0VZXSA9XG4gICAgICAgICAgICAnNicgKyBQZXBDdXN0b21pemF0aW9uU2VydmljZS5SRU1fU1RSSU5HO1xuICAgICAgICB0aGVtZVZhcnNbUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuU1BBQ0lOR19TSVpFXzhYTF9LRVldID1cbiAgICAgICAgICAgICc4JyArIFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLlJFTV9TVFJJTkc7XG4gICAgICAgIHRoZW1lVmFyc1tQZXBDdXN0b21pemF0aW9uU2VydmljZS5TUEFDSU5HX1NJWkVfOVhMX0tFWV0gPVxuICAgICAgICAgICAgJzE2JyArIFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLlJFTV9TVFJJTkc7XG4gICAgfVxuXG4gICAgZ2V0RGVmYXVsdFRoZW1lRm9udHNWYXJpYWJsZXModGhlbWVWYXJzOiBhbnkpOiB2b2lkIHtcbiAgICAgICAgLy8gVGl0bGUgZm9udCBmYW1pbHlcbiAgICAgICAgdGhlbWVWYXJzW1BlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLkZPTlRfRkFNSUxZX1RJVExFX0tFWV0gPSAnTmV4YSc7XG5cbiAgICAgICAgLy8gQm9keSBmb250IGZhbWlseVxuICAgICAgICB0aGVtZVZhcnNbUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuRk9OVF9GQU1JTFlfQk9EWV9LRVldID0gJ0ludGVyJztcblxuICAgICAgICAvLyBGb250IHNpemVzXG4gICAgICAgIHRoZW1lVmFyc1tQZXBDdXN0b21pemF0aW9uU2VydmljZS5GT05UX1NJWkVfMlhTX0tFWV0gPVxuICAgICAgICAgICAgJzAuNjI1JyArIFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLlJFTV9TVFJJTkc7XG4gICAgICAgIHRoZW1lVmFyc1tQZXBDdXN0b21pemF0aW9uU2VydmljZS5GT05UX1NJWkVfWFNfS0VZXSA9XG4gICAgICAgICAgICAnMC43NScgKyBQZXBDdXN0b21pemF0aW9uU2VydmljZS5SRU1fU1RSSU5HO1xuICAgICAgICB0aGVtZVZhcnNbUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuRk9OVF9TSVpFX1NNX0tFWV0gPVxuICAgICAgICAgICAgJzAuODc1JyArIFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLlJFTV9TVFJJTkc7XG4gICAgICAgIHRoZW1lVmFyc1tQZXBDdXN0b21pemF0aW9uU2VydmljZS5GT05UX1NJWkVfTURfS0VZXSA9XG4gICAgICAgICAgICAnMScgKyBQZXBDdXN0b21pemF0aW9uU2VydmljZS5SRU1fU1RSSU5HO1xuICAgICAgICB0aGVtZVZhcnNbUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuRk9OVF9TSVpFX0xHX0tFWV0gPVxuICAgICAgICAgICAgJzEuMTI1JyArIFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLlJFTV9TVFJJTkc7XG4gICAgICAgIHRoZW1lVmFyc1tQZXBDdXN0b21pemF0aW9uU2VydmljZS5GT05UX1NJWkVfWExfS0VZXSA9XG4gICAgICAgICAgICAnMS4yNScgKyBQZXBDdXN0b21pemF0aW9uU2VydmljZS5SRU1fU1RSSU5HO1xuICAgICAgICB0aGVtZVZhcnNbUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuRk9OVF9TSVpFXzJYTF9LRVldID1cbiAgICAgICAgICAgICcxLjUnICsgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuUkVNX1NUUklORztcblxuICAgICAgICAvLyBMaW5lIGhlaWdodFxuICAgICAgICB0aGVtZVZhcnNbUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuTElORV9IRUlHSFRfMlhTX0tFWV0gPVxuICAgICAgICAgICAgJzAuNzUnICsgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuUkVNX1NUUklORztcbiAgICAgICAgdGhlbWVWYXJzW1BlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLkxJTkVfSEVJR0hUX1hTX0tFWV0gPVxuICAgICAgICAgICAgJzEnICsgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuUkVNX1NUUklORztcbiAgICAgICAgdGhlbWVWYXJzW1BlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLkxJTkVfSEVJR0hUX1NNX0tFWV0gPVxuICAgICAgICAgICAgJzEuMjUnICsgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuUkVNX1NUUklORztcbiAgICAgICAgdGhlbWVWYXJzW1BlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLkxJTkVfSEVJR0hUX01EX0tFWV0gPVxuICAgICAgICAgICAgJzEuNScgKyBQZXBDdXN0b21pemF0aW9uU2VydmljZS5SRU1fU1RSSU5HO1xuICAgICAgICB0aGVtZVZhcnNbUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuTElORV9IRUlHSFRfTEdfS0VZXSA9XG4gICAgICAgICAgICAnMS43NScgKyBQZXBDdXN0b21pemF0aW9uU2VydmljZS5SRU1fU1RSSU5HO1xuICAgICAgICB0aGVtZVZhcnNbUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuTElORV9IRUlHSFRfWExfS0VZXSA9XG4gICAgICAgICAgICAnMicgKyBQZXBDdXN0b21pemF0aW9uU2VydmljZS5SRU1fU1RSSU5HO1xuICAgICAgICB0aGVtZVZhcnNbUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuTElORV9IRUlHSFRfMlhMX0tFWV0gPVxuICAgICAgICAgICAgJzIuMjUnICsgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuUkVNX1NUUklORztcblxuICAgICAgICAvLyBGb250IHdlaWdodFxuICAgICAgICB0aGVtZVZhcnNbJy0tcGVwLWZvbnQtd2VpZ2h0LW5vcm1hbCddID0gNDAwO1xuICAgICAgICB0aGVtZVZhcnNbJy0tcGVwLWZvbnQtd2VpZ2h0LWJvbGQnXSA9IDYwMDtcbiAgICAgICAgdGhlbWVWYXJzWyctLXBlcC1mb250LXdlaWdodC1ib2xkZXInXSA9IDgwMDtcbiAgICB9XG5cbiAgICBnZXREZWZhdWx0VGhlbWVCdXR0b25zVmFyaWFibGVzKHRoZW1lVmFyczogYW55KTogdm9pZCB7XG4gICAgICAgIHRoZW1lVmFyc1snLS1wZXAtYnV0dG9uLTJ4cy1ob3Jpem9udGFsLXNwYWNpbmcnXSA9XG4gICAgICAgICAgICAnMC4yNScgKyBQZXBDdXN0b21pemF0aW9uU2VydmljZS5SRU1fU1RSSU5HO1xuICAgICAgICB0aGVtZVZhcnNbJy0tcGVwLWJ1dHRvbi0yeHMtbWluLXdpZHRoJ10gPVxuICAgICAgICAgICAgJzEnICsgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuUkVNX1NUUklORztcbiAgICAgICAgdGhlbWVWYXJzWyctLXBlcC1idXR0b24tMnhzLWhlaWdodCddID1cbiAgICAgICAgICAgICcxJyArIFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLlJFTV9TVFJJTkc7XG4gICAgICAgIHRoZW1lVmFyc1snLS1wZXAtYnV0dG9uLTJ4cy1mb250LXNpemUnXSA9XG4gICAgICAgICAgICAndmFyKCcgKyBQZXBDdXN0b21pemF0aW9uU2VydmljZS5GT05UX1NJWkVfMlhTX0tFWSArICcpJztcbiAgICAgICAgLy8gdGhlbWVWYXJzWyctLXBlcC1idXR0b24tMnhzLWljb24taG9yaXpvbnRhbC1zcGFjaW5nJ10gPSAnMC4xMjUnICsgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuUkVNX1NUUklORztcblxuICAgICAgICB0aGVtZVZhcnNbJy0tcGVwLWJ1dHRvbi14cy1ob3Jpem9udGFsLXNwYWNpbmcnXSA9XG4gICAgICAgICAgICAnMC41JyArIFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLlJFTV9TVFJJTkc7XG4gICAgICAgIHRoZW1lVmFyc1snLS1wZXAtYnV0dG9uLXhzLW1pbi13aWR0aCddID1cbiAgICAgICAgICAgICcxLjUnICsgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuUkVNX1NUUklORztcbiAgICAgICAgdGhlbWVWYXJzWyctLXBlcC1idXR0b24teHMtaGVpZ2h0J10gPVxuICAgICAgICAgICAgJzEuNScgKyBQZXBDdXN0b21pemF0aW9uU2VydmljZS5SRU1fU1RSSU5HO1xuICAgICAgICB0aGVtZVZhcnNbJy0tcGVwLWJ1dHRvbi14cy1mb250LXNpemUnXSA9XG4gICAgICAgICAgICAndmFyKCcgKyBQZXBDdXN0b21pemF0aW9uU2VydmljZS5GT05UX1NJWkVfWFNfS0VZICsgJyknO1xuICAgICAgICAvLyB0aGVtZVZhcnNbJy0tcGVwLWJ1dHRvbi14cy1pY29uLWhvcml6b250YWwtc3BhY2luZyddID0gJzAuMjUnICsgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuUkVNX1NUUklORztcblxuICAgICAgICB0aGVtZVZhcnNbJy0tcGVwLWJ1dHRvbi1zbS1ob3Jpem9udGFsLXNwYWNpbmcnXSA9XG4gICAgICAgICAgICAnMC43NScgKyBQZXBDdXN0b21pemF0aW9uU2VydmljZS5SRU1fU1RSSU5HO1xuICAgICAgICB0aGVtZVZhcnNbJy0tcGVwLWJ1dHRvbi1zbS1taW4td2lkdGgnXSA9XG4gICAgICAgICAgICAnMicgKyBQZXBDdXN0b21pemF0aW9uU2VydmljZS5SRU1fU1RSSU5HO1xuICAgICAgICB0aGVtZVZhcnNbJy0tcGVwLWJ1dHRvbi1zbS1oZWlnaHQnXSA9XG4gICAgICAgICAgICAnMicgKyBQZXBDdXN0b21pemF0aW9uU2VydmljZS5SRU1fU1RSSU5HO1xuICAgICAgICB0aGVtZVZhcnNbJy0tcGVwLWJ1dHRvbi1zbS1mb250LXNpemUnXSA9XG4gICAgICAgICAgICAndmFyKCcgKyBQZXBDdXN0b21pemF0aW9uU2VydmljZS5GT05UX1NJWkVfU01fS0VZICsgJyknO1xuICAgICAgICAvLyB0aGVtZVZhcnNbJy0tcGVwLWJ1dHRvbi1zbS1pY29uLWhvcml6b250YWwtc3BhY2luZyddID0gJzAuNScgKyBQZXBDdXN0b21pemF0aW9uU2VydmljZS5SRU1fU1RSSU5HO1xuXG4gICAgICAgIHRoZW1lVmFyc1snLS1wZXAtYnV0dG9uLW1kLWhvcml6b250YWwtc3BhY2luZyddID1cbiAgICAgICAgICAgICcxJyArIFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLlJFTV9TVFJJTkc7XG4gICAgICAgIHRoZW1lVmFyc1snLS1wZXAtYnV0dG9uLW1kLW1pbi13aWR0aCddID1cbiAgICAgICAgICAgICcyLjUnICsgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuUkVNX1NUUklORztcbiAgICAgICAgdGhlbWVWYXJzWyctLXBlcC1idXR0b24tbWQtaGVpZ2h0J10gPVxuICAgICAgICAgICAgJzIuNScgKyBQZXBDdXN0b21pemF0aW9uU2VydmljZS5SRU1fU1RSSU5HO1xuICAgICAgICB0aGVtZVZhcnNbJy0tcGVwLWJ1dHRvbi1tZC1mb250LXNpemUnXSA9XG4gICAgICAgICAgICAndmFyKCcgKyBQZXBDdXN0b21pemF0aW9uU2VydmljZS5GT05UX1NJWkVfTURfS0VZICsgJyknO1xuICAgICAgICAvLyB0aGVtZVZhcnNbJy0tcGVwLWJ1dHRvbi1tZC1pY29uLWhvcml6b250YWwtc3BhY2luZyddID0gJzAuNScgKyBQZXBDdXN0b21pemF0aW9uU2VydmljZS5SRU1fU1RSSU5HO1xuXG4gICAgICAgIHRoZW1lVmFyc1snLS1wZXAtYnV0dG9uLWxnLWhvcml6b250YWwtc3BhY2luZyddID1cbiAgICAgICAgICAgICcxJyArIFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLlJFTV9TVFJJTkc7XG4gICAgICAgIHRoZW1lVmFyc1snLS1wZXAtYnV0dG9uLWxnLW1pbi13aWR0aCddID1cbiAgICAgICAgICAgICczJyArIFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLlJFTV9TVFJJTkc7XG4gICAgICAgIHRoZW1lVmFyc1snLS1wZXAtYnV0dG9uLWxnLWhlaWdodCddID1cbiAgICAgICAgICAgICczJyArIFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLlJFTV9TVFJJTkc7XG4gICAgICAgIHRoZW1lVmFyc1snLS1wZXAtYnV0dG9uLWxnLWZvbnQtc2l6ZSddID1cbiAgICAgICAgICAgICd2YXIoJyArIFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLkZPTlRfU0laRV9MR19LRVkgKyAnKSc7XG4gICAgICAgIC8vIHRoZW1lVmFyc1snLS1wZXAtYnV0dG9uLWxnLWljb24taG9yaXpvbnRhbC1zcGFjaW5nJ10gPSAnMC43NScgKyBQZXBDdXN0b21pemF0aW9uU2VydmljZS5SRU1fU1RSSU5HO1xuXG4gICAgICAgIHRoZW1lVmFyc1snLS1wZXAtYnV0dG9uLXhsLWhvcml6b250YWwtc3BhY2luZyddID1cbiAgICAgICAgICAgICcxLjUnICsgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuUkVNX1NUUklORztcbiAgICAgICAgdGhlbWVWYXJzWyctLXBlcC1idXR0b24teGwtbWluLXdpZHRoJ10gPVxuICAgICAgICAgICAgJzQnICsgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuUkVNX1NUUklORztcbiAgICAgICAgdGhlbWVWYXJzWyctLXBlcC1idXR0b24teGwtaGVpZ2h0J10gPVxuICAgICAgICAgICAgJzQnICsgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuUkVNX1NUUklORztcbiAgICAgICAgdGhlbWVWYXJzWyctLXBlcC1idXR0b24teGwtZm9udC1zaXplJ10gPVxuICAgICAgICAgICAgJ3ZhcignICsgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuRk9OVF9TSVpFX1hMX0tFWSArICcpJztcbiAgICAgICAgLy8gdGhlbWVWYXJzWyctLXBlcC1idXR0b24teGwtaWNvbi1ob3Jpem9udGFsLXNwYWNpbmcnXSA9ICcxJyArIFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLlJFTV9TVFJJTkc7XG4gICAgfVxuXG4gICAgZ2V0U3lzdGVtUHJpbWFyeUludmVydENvbG9yc1ZhcmlhYmxlcyh0aGVtZVZhcnM6IGFueSk6IHZvaWQge1xuICAgICAgICB0aGVtZVZhcnNbXG4gICAgICAgICAgICBQZXBDdXN0b21pemF0aW9uU2VydmljZS5DT0xPUl9TWVNURU1fUFJJTUFSWV9JTlZFUlRfS0VZICsgJy1oJ1xuICAgICAgICBdID0gJzI1NSc7XG4gICAgICAgIHRoZW1lVmFyc1tcbiAgICAgICAgICAgIFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLkNPTE9SX1NZU1RFTV9QUklNQVJZX0lOVkVSVF9LRVkgKyAnLXMnXG4gICAgICAgIF0gPSAnMTAwJSc7XG4gICAgICAgIHRoZW1lVmFyc1tcbiAgICAgICAgICAgIFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLkNPTE9SX1NZU1RFTV9QUklNQVJZX0lOVkVSVF9LRVkgKyAnLWwnXG4gICAgICAgIF0gPSAnMTAwJSc7XG4gICAgfVxuXG4gICAgZ2V0U3lzdGVtUHJpbWFyeUNvbG9yc1ZhcmlhYmxlcyh0aGVtZVZhcnM6IGFueSk6IHZvaWQge1xuICAgICAgICB0aGVtZVZhcnNbUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuQ09MT1JfU1lTVEVNX1BSSU1BUllfS0VZICsgJy1oJ10gPVxuICAgICAgICAgICAgJzAnO1xuICAgICAgICB0aGVtZVZhcnNbUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuQ09MT1JfU1lTVEVNX1BSSU1BUllfS0VZICsgJy1zJ10gPVxuICAgICAgICAgICAgJzAlJztcbiAgICAgICAgdGhlbWVWYXJzW1BlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLkNPTE9SX1NZU1RFTV9QUklNQVJZX0tFWSArICctbCddID1cbiAgICAgICAgICAgICcxMCUnO1xuICAgIH1cblxuICAgIGdldFN5c3RlbVN1Y2Nlc3NDb2xvcnNWYXJpYWJsZXModGhlbWVWYXJzOiBhbnkpOiB2b2lkIHtcbiAgICAgICAgdGhlbWVWYXJzW1BlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLkNPTE9SX1NZU1RFTV9TVUNDRVNTX0tFWSArICctaCddID1cbiAgICAgICAgICAgICcxMDAnO1xuICAgICAgICB0aGVtZVZhcnNbUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuQ09MT1JfU1lTVEVNX1NVQ0NFU1NfS0VZICsgJy1zJ10gPVxuICAgICAgICAgICAgJzEwMCUnO1xuICAgICAgICB0aGVtZVZhcnNbUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuQ09MT1JfU1lTVEVNX1NVQ0NFU1NfS0VZICsgJy1sJ10gPVxuICAgICAgICAgICAgJzI1JSc7XG4gICAgfVxuXG4gICAgZ2V0U3lzdGVtQ2F1dGlvbkNvbG9yc1ZhcmlhYmxlcyh0aGVtZVZhcnM6IGFueSk6IHZvaWQge1xuICAgICAgICB0aGVtZVZhcnNbUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuQ09MT1JfU1lTVEVNX0NBVVRJT05fS0VZICsgJy1oJ10gPVxuICAgICAgICAgICAgJzM2MCc7XG4gICAgICAgIHRoZW1lVmFyc1tQZXBDdXN0b21pemF0aW9uU2VydmljZS5DT0xPUl9TWVNURU1fQ0FVVElPTl9LRVkgKyAnLXMnXSA9XG4gICAgICAgICAgICAnMTAwJSc7XG4gICAgICAgIHRoZW1lVmFyc1tQZXBDdXN0b21pemF0aW9uU2VydmljZS5DT0xPUl9TWVNURU1fQ0FVVElPTl9LRVkgKyAnLWwnXSA9XG4gICAgICAgICAgICAnNDAlJztcbiAgICB9XG5cbiAgICBnZXRVc2VyUHJpbWFyeUNvbG9yc1ZhcmlhYmxlcyh0aGVtZVZhcnM6IGFueSk6IHZvaWQge1xuICAgICAgICB0aGVtZVZhcnNbUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuQ09MT1JfVVNFUl9QUklNQVJZX0tFWSArICctaCddID0gJzc4JztcbiAgICAgICAgdGhlbWVWYXJzW1BlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLkNPTE9SX1VTRVJfUFJJTUFSWV9LRVkgKyAnLXMnXSA9XG4gICAgICAgICAgICAnODclJztcbiAgICAgICAgdGhlbWVWYXJzW1BlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLkNPTE9SX1VTRVJfUFJJTUFSWV9LRVkgKyAnLWwnXSA9XG4gICAgICAgICAgICAnMjclJztcbiAgICB9XG5cbiAgICBnZXRVc2VyU2Vjb25kYXJ5Q29sb3JzVmFyaWFibGVzKHRoZW1lVmFyczogYW55KTogdm9pZCB7XG4gICAgICAgIHRoZW1lVmFyc1tQZXBDdXN0b21pemF0aW9uU2VydmljZS5DT0xPUl9VU0VSX1NFQ09OREFSWV9LRVkgKyAnLWgnXSA9XG4gICAgICAgICAgICAnNzcnO1xuICAgICAgICB0aGVtZVZhcnNbUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuQ09MT1JfVVNFUl9TRUNPTkRBUllfS0VZICsgJy1zJ10gPVxuICAgICAgICAgICAgJzg3JSc7XG4gICAgICAgIHRoZW1lVmFyc1tQZXBDdXN0b21pemF0aW9uU2VydmljZS5DT0xPUl9VU0VSX1NFQ09OREFSWV9LRVkgKyAnLWwnXSA9XG4gICAgICAgICAgICAnNDIlJztcbiAgICB9XG5cbiAgICBnZXRXZWFrQ29sb3JzVmFyaWFibGVzKHRoZW1lVmFyczogYW55KTogdm9pZCB7XG4gICAgICAgIHRoZW1lVmFyc1tQZXBDdXN0b21pemF0aW9uU2VydmljZS5DT0xPUl9XRUFLX0tFWSArICctaCddID1cbiAgICAgICAgICAgICd2YXIoJyArIFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLkNPTE9SX1NZU1RFTV9QUklNQVJZX0tFWSArICctaCknO1xuICAgICAgICB0aGVtZVZhcnNbUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuQ09MT1JfV0VBS19LRVkgKyAnLXMnXSA9XG4gICAgICAgICAgICAndmFyKCcgKyBQZXBDdXN0b21pemF0aW9uU2VydmljZS5DT0xPUl9TWVNURU1fUFJJTUFSWV9LRVkgKyAnLXMpJztcbiAgICAgICAgdGhlbWVWYXJzW1BlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLkNPTE9SX1dFQUtfS0VZICsgJy1sJ10gPVxuICAgICAgICAgICAgJ3ZhcignICsgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuQ09MT1JfU1lTVEVNX1BSSU1BUllfS0VZICsgJy1sKSc7XG4gICAgfVxuXG4gICAgZ2V0UmVndWxhckNvbG9yc1ZhcmlhYmxlcyh0aGVtZVZhcnM6IGFueSk6IHZvaWQge1xuICAgICAgICB0aGVtZVZhcnNbUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuQ09MT1JfUkVHVUxBUl9LRVkgKyAnLWgnXSA9XG4gICAgICAgICAgICAndmFyKCcgKyBQZXBDdXN0b21pemF0aW9uU2VydmljZS5DT0xPUl9TWVNURU1fUFJJTUFSWV9LRVkgKyAnLWgpJztcbiAgICAgICAgdGhlbWVWYXJzW1BlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLkNPTE9SX1JFR1VMQVJfS0VZICsgJy1zJ10gPVxuICAgICAgICAgICAgJ3ZhcignICsgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuQ09MT1JfU1lTVEVNX1BSSU1BUllfS0VZICsgJy1zKSc7XG4gICAgICAgIHRoZW1lVmFyc1tQZXBDdXN0b21pemF0aW9uU2VydmljZS5DT0xPUl9SRUdVTEFSX0tFWSArICctbCddID1cbiAgICAgICAgICAgICd2YXIoJyArIFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLkNPTE9SX1NZU1RFTV9QUklNQVJZX0tFWSArICctbCknO1xuICAgIH1cblxuICAgIGdldFN0cm9uZ0NvbG9yc1ZhcmlhYmxlcyh0aGVtZVZhcnM6IGFueSk6IHZvaWQge1xuICAgICAgICB0aGVtZVZhcnNbUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuQ09MT1JfU1RST05HX0tFWSArICctaCddID1cbiAgICAgICAgICAgICd2YXIoJyArIFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLkNPTE9SX1VTRVJfUFJJTUFSWV9LRVkgKyAnLWgpJztcbiAgICAgICAgdGhlbWVWYXJzW1BlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLkNPTE9SX1NUUk9OR19LRVkgKyAnLXMnXSA9XG4gICAgICAgICAgICAndmFyKCcgKyBQZXBDdXN0b21pemF0aW9uU2VydmljZS5DT0xPUl9VU0VSX1BSSU1BUllfS0VZICsgJy1zKSc7XG4gICAgICAgIHRoZW1lVmFyc1tQZXBDdXN0b21pemF0aW9uU2VydmljZS5DT0xPUl9TVFJPTkdfS0VZICsgJy1sJ10gPVxuICAgICAgICAgICAgJ3ZhcignICsgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuQ09MT1JfVVNFUl9QUklNQVJZX0tFWSArICctbCknO1xuICAgIH1cblxuICAgIGdldFRleHRDb2xvcnNWYXJpYWJsZXModGhlbWVWYXJzOiBhbnkpOiB2b2lkIHtcbiAgICAgICAgdGhlbWVWYXJzW1BlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLkNPTE9SX1RFWFRfTElOS19LRVkgKyAnLWgnXSA9ICcyMDcnO1xuICAgICAgICB0aGVtZVZhcnNbUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuQ09MT1JfVEVYVF9MSU5LX0tFWSArICctcyddID0gJzc2JSc7XG4gICAgICAgIHRoZW1lVmFyc1tQZXBDdXN0b21pemF0aW9uU2VydmljZS5DT0xPUl9URVhUX0xJTktfS0VZICsgJy1sJ10gPSAnMzclJztcbiAgICB9XG5cbiAgICBnZXREZWZhdWx0VGhlbWVDb2xvcnNWYXJpYWJsZXModGhlbWVWYXJzOiBhbnkpOiB2b2lkIHtcbiAgICAgICAgLy8gU3lzdGVtIHByaW1hcnkgaW52ZXJ0IGNvbG9ycy5cbiAgICAgICAgdGhpcy5nZXRTeXN0ZW1QcmltYXJ5SW52ZXJ0Q29sb3JzVmFyaWFibGVzKHRoZW1lVmFycyk7XG4gICAgICAgIC8vIFN5c3RlbSBwcmltYXJ5IGNvbG9ycy5cbiAgICAgICAgdGhpcy5nZXRTeXN0ZW1QcmltYXJ5Q29sb3JzVmFyaWFibGVzKHRoZW1lVmFycyk7XG4gICAgICAgIC8vIFN5c3RlbSBzdWNjZXNzIGNvbG9ycy5cbiAgICAgICAgdGhpcy5nZXRTeXN0ZW1TdWNjZXNzQ29sb3JzVmFyaWFibGVzKHRoZW1lVmFycyk7XG4gICAgICAgIC8vIFN5c3RlbSBjYXV0aW9uIGNvbG9ycy5cbiAgICAgICAgdGhpcy5nZXRTeXN0ZW1DYXV0aW9uQ29sb3JzVmFyaWFibGVzKHRoZW1lVmFycyk7XG4gICAgICAgIC8vIFVzZXIgcHJpbWFyeSBjb2xvcnMuXG4gICAgICAgIHRoaXMuZ2V0VXNlclByaW1hcnlDb2xvcnNWYXJpYWJsZXModGhlbWVWYXJzKTtcbiAgICAgICAgLy8gVXNlciBzZWNvbmRhcnkgY29sb3JzLlxuICAgICAgICB0aGlzLmdldFVzZXJTZWNvbmRhcnlDb2xvcnNWYXJpYWJsZXModGhlbWVWYXJzKTtcblxuICAgICAgICAvLyBXZWFrIGNvbG9ycy5cbiAgICAgICAgdGhpcy5nZXRXZWFrQ29sb3JzVmFyaWFibGVzKHRoZW1lVmFycyk7XG4gICAgICAgIC8vIFJlZ3VsYXIgY29sb3JzLlxuICAgICAgICB0aGlzLmdldFJlZ3VsYXJDb2xvcnNWYXJpYWJsZXModGhlbWVWYXJzKTtcbiAgICAgICAgLy8gU3Ryb25nIGNvbG9ycy5cbiAgICAgICAgdGhpcy5nZXRTdHJvbmdDb2xvcnNWYXJpYWJsZXModGhlbWVWYXJzKTtcblxuICAgICAgICAvLyBUZXh0IGNvbG9ycy5cbiAgICAgICAgdGhpcy5nZXRUZXh0Q29sb3JzVmFyaWFibGVzKHRoZW1lVmFycyk7XG4gICAgfVxuXG4gICAgZ2V0RGVmYXVsdFRoZW1lU2hhZG93c1ZhcmlhYmxlcyh0aGVtZVZhcnM6IGFueSk6IHZvaWQge1xuICAgICAgICBjb25zdCBub25lT2Zmc2V0ID0gJzAnO1xuICAgICAgICB0aGVtZVZhcnNbUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuU0hBRE9XX05PTkVfT0ZGU0VUX0tFWV0gPSBub25lT2Zmc2V0O1xuXG4gICAgICAgIGNvbnN0IHhzT2Zmc2V0ID0gJzAgMC4xMjVyZW0gMC4yNXJlbSAwJztcbiAgICAgICAgdGhlbWVWYXJzW1BlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLlNIQURPV19YU19PRkZTRVRfS0VZXSA9IHhzT2Zmc2V0O1xuXG4gICAgICAgIGNvbnN0IHNtT2Zmc2V0ID0gJzAgMC4yNXJlbSAwLjVyZW0gMCc7XG4gICAgICAgIHRoZW1lVmFyc1tQZXBDdXN0b21pemF0aW9uU2VydmljZS5TSEFET1dfU01fT0ZGU0VUX0tFWV0gPSBzbU9mZnNldDtcblxuICAgICAgICBjb25zdCBtZE9mZnNldCA9ICcwIDAuNXJlbSAxcmVtIDAnO1xuICAgICAgICB0aGVtZVZhcnNbUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuU0hBRE9XX01EX09GRlNFVF9LRVldID0gbWRPZmZzZXQ7XG5cbiAgICAgICAgY29uc3QgbGdPZmZzZXQgPSAnMCAxcmVtIDJyZW0gMCc7XG4gICAgICAgIHRoZW1lVmFyc1tQZXBDdXN0b21pemF0aW9uU2VydmljZS5TSEFET1dfTEdfT0ZGU0VUX0tFWV0gPSBsZ09mZnNldDtcblxuICAgICAgICBjb25zdCB4bE9mZnNldCA9ICcwIDJyZW0gNHJlbSAwJztcbiAgICAgICAgdGhlbWVWYXJzW1BlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLlNIQURPV19YTF9PRkZTRVRfS0VZXSA9IHhsT2Zmc2V0O1xuICAgIH1cblxuICAgIGdldERlZmF1bHRUaGVtZUZvcm1DdXN0b21pemF0aW9uVmFyaWFibGVzKHRoZW1lVmFyczogYW55KTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGZvcm1GaWVsZFNwYWNpbmcgPSAxO1xuICAgICAgICB0aGVtZVZhcnNbUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuRk9STV9GSUVMRF9IRUlHSFRfS0VZXSA9XG4gICAgICAgICAgICAnMi41JyArIFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLlJFTV9TVFJJTkc7XG4gICAgICAgIHRoZW1lVmFyc1tQZXBDdXN0b21pemF0aW9uU2VydmljZS5GT1JNX0ZJRUxEX1RJVExFX0hFSUdIVF9LRVldID1cbiAgICAgICAgICAgICcxLjUnICsgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuUkVNX1NUUklORztcbiAgICAgICAgdGhlbWVWYXJzW1BlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLkZPUk1fU1BBQ0VJTkdfS0VZXSA9XG4gICAgICAgICAgICBmb3JtRmllbGRTcGFjaW5nICsgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuUkVNX1NUUklORztcbiAgICAgICAgdGhlbWVWYXJzW1BlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLkZPUk1fRklFTERfU1BBQ0VJTkdfS0VZXSA9XG4gICAgICAgICAgICBmb3JtRmllbGRTcGFjaW5nICsgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuUkVNX1NUUklORztcbiAgICB9XG5cbiAgICBnZXREZWZhdWx0VGhlbWVDYXJkQ3VzdG9taXphdGlvblZhcmlhYmxlcyh0aGVtZVZhcnM6IGFueSk6IHZvaWQge1xuICAgICAgICB0aGVtZVZhcnNbUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuQ0FSRF9GSUVMRF9IRUlHSFRfS0VZXSA9XG4gICAgICAgICAgICAnMS41JyArIFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLlJFTV9TVFJJTkc7XG4gICAgICAgIHRoZW1lVmFyc1tQZXBDdXN0b21pemF0aW9uU2VydmljZS5DQVJEX1NQQUNFSU5HX0tFWV0gPVxuICAgICAgICAgICAgJ3ZhcignICsgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuU1BBQ0lOR19TSVpFX1hTX0tFWSArICcpJztcblxuICAgICAgICB0aGVtZVZhcnNbUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuQ0FSRF9CT1JERVJfUkFESVVTX0tFWV0gPVxuICAgICAgICAgICAgJ3ZhcignICsgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuQk9SREVSX1JBRElVU19NRF9LRVkgKyAnKSc7XG4gICAgICAgIHRoZW1lVmFyc1tQZXBDdXN0b21pemF0aW9uU2VydmljZS5DQVJEX1NIQURPV19PRkZTRVRfS0VZXSA9XG4gICAgICAgICAgICAndmFyKCcgKyBQZXBDdXN0b21pemF0aW9uU2VydmljZS5TSEFET1dfTURfT0ZGU0VUX0tFWSArICcpJztcbiAgICB9XG5cbiAgICBnZXREZWZhdWx0VGhlbWVUYWJsZUN1c3RvbWl6YXRpb25WYXJpYWJsZXModGhlbWVWYXJzOiBhbnkpOiB2b2lkIHtcbiAgICAgICAgdGhlbWVWYXJzW1BlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLlRBQkxFX0ZJRUxEX0hFSUdIVF9LRVldID1cbiAgICAgICAgICAgICcyJyArIFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLlJFTV9TVFJJTkc7XG4gICAgICAgIHRoZW1lVmFyc1tQZXBDdXN0b21pemF0aW9uU2VydmljZS5UQUJMRV9TUEFDRUlOR19LRVldID1cbiAgICAgICAgICAgICcwLjUnICsgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuUkVNX1NUUklORztcbiAgICAgICAgdGhlbWVWYXJzW1BlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLlRBQkxFX0JPUkRFUl9SQURJVVNfS0VZXSA9XG4gICAgICAgICAgICAndmFyKCcgKyBQZXBDdXN0b21pemF0aW9uU2VydmljZS5CT1JERVJfUkFESVVTX01EX0tFWSArICcpJztcbiAgICB9XG5cbiAgICBnZXREZWZhdWx0VGhlbWVRU0N1c3RvbWl6YXRpb25WYXJpYWJsZXModGhlbWVWYXJzOiBhbnkpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgcXNTdGF0ZTogUGVwU3R5bGVUeXBlID0gJ3JlZ3VsYXInO1xuICAgICAgICB0aGVtZVZhcnNbUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuU1RZTEVfUVNfS0VZXSA9IHFzU3RhdGU7XG5cbiAgICAgICAgdGhlbWVWYXJzW1BlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLkNPTE9SX1FTX0tFWSArICctaCddID1cbiAgICAgICAgICAgICd2YXIoJyArIFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLkNPTE9SX1NZU1RFTV9QUklNQVJZX0tFWSArICctaCknO1xuICAgICAgICB0aGVtZVZhcnNbUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuQ09MT1JfUVNfS0VZICsgJy1zJ10gPVxuICAgICAgICAgICAgJ3ZhcignICsgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuQ09MT1JfU1lTVEVNX1BSSU1BUllfS0VZICsgJy1zKSc7XG4gICAgICAgIHRoZW1lVmFyc1tQZXBDdXN0b21pemF0aW9uU2VydmljZS5DT0xPUl9RU19LRVkgKyAnLWwnXSA9XG4gICAgICAgICAgICAndmFyKCcgKyBQZXBDdXN0b21pemF0aW9uU2VydmljZS5DT0xPUl9TWVNURU1fUFJJTUFSWV9LRVkgKyAnLWwpJztcbiAgICB9XG5cbiAgICBnZXREZWZhdWx0VGhlbWVUb3BIZWFkZXJDdXN0b21pemF0aW9uVmFyaWFibGVzKHRoZW1lVmFyczogYW55KTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHRvcEhlYWRlclN0YXRlOiBQZXBTdHlsZVR5cGUgPSAnc3Ryb25nJztcbiAgICAgICAgdGhlbWVWYXJzW1xuICAgICAgICAgICAgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuU1RZTEVfVE9QX0hFQURFUl9LRVlcbiAgICAgICAgXSA9IHRvcEhlYWRlclN0YXRlO1xuXG4gICAgICAgIHRoZW1lVmFyc1tQZXBDdXN0b21pemF0aW9uU2VydmljZS5DT0xPUl9UT1BfSEVBREVSX0tFWSArICctaCddID0gJyc7XG4gICAgICAgIHRoZW1lVmFyc1tQZXBDdXN0b21pemF0aW9uU2VydmljZS5DT0xPUl9UT1BfSEVBREVSX0tFWSArICctcyddID0gJyc7XG4gICAgICAgIHRoZW1lVmFyc1tQZXBDdXN0b21pemF0aW9uU2VydmljZS5DT0xPUl9UT1BfSEVBREVSX0tFWSArICctbCddID0gJyc7XG4gICAgfVxuXG4gICAgZ2V0RGVmYXVsdFRoZW1lVmFyaWFibGVzKCk6IGFueSB7XG4gICAgICAgIGNvbnN0IHRoZW1lVmFycyA9IHt9O1xuXG4gICAgICAgIC8vIERlY2xhcmUgZGVmYXVsdCBsYXlvdXQuXG4gICAgICAgIHRoaXMuZ2V0RGVmYXVsdFRoZW1lTGF5b3V0VmFyaWFibGVzKHRoZW1lVmFycyk7XG5cbiAgICAgICAgLy8gRGVjbGFyZSBkZWZhdWx0IGJvcmRlciByYWRpdXMuXG4gICAgICAgIHRoaXMuZ2V0RGVmYXVsdFRoZW1lQm9yZGVyUmFkaXVzVmFyaWFibGVzKHRoZW1lVmFycyk7XG5cbiAgICAgICAgLy8gRGVjbGFyZSBkZWZhdWx0IHNwYWNpbmcuXG4gICAgICAgIHRoaXMuZ2V0RGVmYXVsdFRoZW1lU3BhY2luZ1ZhcmlhYmxlcyh0aGVtZVZhcnMpO1xuXG4gICAgICAgIC8vIERlY2xhcmUgZGVmYXVsdCBmb250cyBzaXplICYgbGluZSBoZWlnaHQuXG4gICAgICAgIHRoaXMuZ2V0RGVmYXVsdFRoZW1lRm9udHNWYXJpYWJsZXModGhlbWVWYXJzKTtcblxuICAgICAgICAvLyBEZWNsYXJlIGRlZmF1bHQgYnV0dG9ucy5cbiAgICAgICAgdGhpcy5nZXREZWZhdWx0VGhlbWVCdXR0b25zVmFyaWFibGVzKHRoZW1lVmFycyk7XG5cbiAgICAgICAgLy8gRGVjbGFyZSBkZWZhdWx0IGNvbG9ycy5cbiAgICAgICAgdGhpcy5nZXREZWZhdWx0VGhlbWVDb2xvcnNWYXJpYWJsZXModGhlbWVWYXJzKTtcblxuICAgICAgICAvLyBEZWNsYXJlIGRlZmF1bHQgc2hhZG93cy5cbiAgICAgICAgdGhpcy5nZXREZWZhdWx0VGhlbWVTaGFkb3dzVmFyaWFibGVzKHRoZW1lVmFycyk7XG5cbiAgICAgICAgLy8gRGVjbGFyZSBkZWZhdWx0IGZvcm0gY3VzdG9taXphdGlvbi5cbiAgICAgICAgdGhpcy5nZXREZWZhdWx0VGhlbWVGb3JtQ3VzdG9taXphdGlvblZhcmlhYmxlcyh0aGVtZVZhcnMpO1xuXG4gICAgICAgIC8vIERlY2xhcmUgZGVmYXVsdCBjYXJkIGN1c3RvbWl6YXRpb24uXG4gICAgICAgIHRoaXMuZ2V0RGVmYXVsdFRoZW1lQ2FyZEN1c3RvbWl6YXRpb25WYXJpYWJsZXModGhlbWVWYXJzKTtcblxuICAgICAgICAvLyBEZWNsYXJlIGRlZmF1bHQgdGFibGUgY3VzdG9taXphdGlvbi5cbiAgICAgICAgdGhpcy5nZXREZWZhdWx0VGhlbWVUYWJsZUN1c3RvbWl6YXRpb25WYXJpYWJsZXModGhlbWVWYXJzKTtcblxuICAgICAgICAvLyBEZWNsYXJlIGRlZmF1bHQgcXMgY3VzdG9taXphdGlvbi5cbiAgICAgICAgdGhpcy5nZXREZWZhdWx0VGhlbWVRU0N1c3RvbWl6YXRpb25WYXJpYWJsZXModGhlbWVWYXJzKTtcblxuICAgICAgICAvLyBEZWNsYXJlIGRlZmF1bHQgdG9wIGhlYWRlciBjdXN0b21pemF0aW9uLlxuICAgICAgICB0aGlzLmdldERlZmF1bHRUaGVtZVRvcEhlYWRlckN1c3RvbWl6YXRpb25WYXJpYWJsZXModGhlbWVWYXJzKTtcblxuICAgICAgICByZXR1cm4gdGhlbWVWYXJzO1xuICAgIH1cblxuICAgIGdldFRoZW1lVmFyaWFibGVzKCk6IGFueSB7XG4gICAgICAgIGNvbnN0IHJldCA9IHRoaXMuZ2V0RGVmYXVsdFRoZW1lVmFyaWFibGVzKCk7XG4gICAgICAgIGNvbnN0IHRoZW1lVmFycyA9IHRoaXMuc2Vzc2lvblNlcnZpY2UuZ2V0T2JqZWN0KFxuICAgICAgICAgICAgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuVVNFUl9USEVNRV9WQVJJQUJMRVNcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBPdmVycmlkZSBkZWZhdWx0cy5cbiAgICAgICAgaWYgKHRoZW1lVmFycykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGhlbWVWYXJzKSB7XG4gICAgICAgICAgICAgICAgcmV0W2tleV0gPSB0aGVtZVZhcnNba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuXG4gICAgc2V0VGhlbWVWYXJpYWJsZXModGhlbWVWYXJpYWJsZXNUb1NldCA9IG51bGwpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgdGhlbWVWYXJpYWJsZXMgPSB0aGlzLmdldFRoZW1lVmFyaWFibGVzKCk7XG5cbiAgICAgICAgLy8gT3ZlcnJpZGUgZGVmYXVsdHMuXG4gICAgICAgIGlmICh0aGVtZVZhcmlhYmxlc1RvU2V0KSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGVtZVZhcmlhYmxlc1RvU2V0KSB7XG4gICAgICAgICAgICAgICAgdGhlbWVWYXJpYWJsZXNba2V5XSA9IHRoZW1lVmFyaWFibGVzVG9TZXRba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2Vzc2lvblNlcnZpY2Uuc2V0T2JqZWN0KFxuICAgICAgICAgICAgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuVVNFUl9USEVNRV9WQVJJQUJMRVMsXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeSh0aGVtZVZhcmlhYmxlcylcbiAgICAgICAgKTtcblxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGVtZVZhcmlhYmxlcykge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNGb250VXJsS2V5KGtleSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbGVTZXJ2aWNlLmxvYWRGb250U3R5bGUoa2V5LCB0aGVtZVZhcmlhYmxlc1trZXldKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KFxuICAgICAgICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgICAgICAgIHRoZW1lVmFyaWFibGVzW2tleV1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgaXNGb250VXJsS2V5KGtleTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIGxldCByZXMgPSBmYWxzZTtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBrZXkgPT09IFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLkZPTlRfRkFNSUxZX1RJVExFX05PUk1BTF9VUkxfS0VZIHx8XG4gICAgICAgICAgICBrZXkgPT09IFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLkZPTlRfRkFNSUxZX1RJVExFX0JPTERfVVJMX0tFWSB8fFxuICAgICAgICAgICAga2V5ID09PSBQZXBDdXN0b21pemF0aW9uU2VydmljZS5GT05UX0ZBTUlMWV9CT0RZX05PUk1BTF9VUkxfS0VZIHx8XG4gICAgICAgICAgICBrZXkgPT09IFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLkZPTlRfRkFNSUxZX0JPRFlfQk9MRF9VUkxfS0VZXG4gICAgICAgICkge1xuICAgICAgICAgICAgcmVzID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxuXG4gICAgZ2V0VGhlbWVWYXJpYWJsZShrZXk6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IHRoZW1lVmFycyA9IHRoaXMuZ2V0VGhlbWVWYXJpYWJsZXMoKTtcblxuICAgICAgICBpZiAodGhlbWVWYXJzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGVtZVZhcnNba2V5XTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldE51bWJlclRoZW1lVmFyaWFibGUodGhlbWVWYXJzLCBrZXk6IHN0cmluZyk6IG51bWJlciB7XG4gICAgICAgIGlmICh0aGVtZVZhcnMgJiYgdGhlbWVWYXJzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgIC8vIElmIGl0J3MgcmVmZXJlbmNlIHRvIGFub3RoZXIga2V5LlxuICAgICAgICAgICAgaWYgKHRoZW1lVmFyc1trZXldLmluZGV4T2YoJ3ZhcignKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGtleSA9IHRoZW1lVmFyc1trZXldLnN1YnN0cig0KS5zcGxpdCgnKScpWzBdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCB0bXAgPSBOdW1iZXIoXG4gICAgICAgICAgICAgICAgdGhlbWVWYXJzW2tleV0ucmVwbGFjZShQZXBDdXN0b21pemF0aW9uU2VydmljZS5SRU1fU1RSSU5HLCAnJylcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByZXR1cm4gdG1wO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHNldEZvb3RlckhlaWdodChoZWlnaHQpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuZm9vdGVySGVpZ2h0LmdldFZhbHVlKCkgIT09IGhlaWdodCkge1xuICAgICAgICAgICAgLy8gaXQgaXMgcHVibGlzaGluZyB0aGlzIHZhbHVlIHRvIGFsbCB0aGUgc3Vic2NyaWJlcnMgdGhhdCBoYXZlIGFscmVhZHkgc3Vic2NyaWJlZCB0byB0aGlzIG1lc3NhZ2VcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZm9vdGVySGVpZ2h0Lm5leHQoaGVpZ2h0KTtcbiAgICAgICAgICAgIH0sIDApO1xuICAgICAgICB9XG4gICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShcbiAgICAgICAgICAgIFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLkZPT1RFUl9IRUlHSFRfS0VZLFxuICAgICAgICAgICAgaGVpZ2h0ICsgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuUkVNX1NUUklOR1xuICAgICAgICApO1xuICAgIH1cblxuICAgIGhpZGVGb290ZXIoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc2V0Rm9vdGVySGVpZ2h0KDApO1xuICAgIH1cblxuICAgIHNob3dGb290ZXIoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHRoZW1lVmFycyA9IHRoaXMuZ2V0VGhlbWVWYXJpYWJsZXMoKTtcblxuICAgICAgICBjb25zdCByZXMgPVxuICAgICAgICAgICAgdGhpcy5nZXROdW1iZXJUaGVtZVZhcmlhYmxlKFxuICAgICAgICAgICAgICAgIHRoZW1lVmFycyxcbiAgICAgICAgICAgICAgICBQZXBDdXN0b21pemF0aW9uU2VydmljZS5GT09URVJfQkFSX1NQQUNJTkdfVE9QX0tFWVxuICAgICAgICAgICAgKSArXG4gICAgICAgICAgICB0aGlzLmdldE51bWJlclRoZW1lVmFyaWFibGUoXG4gICAgICAgICAgICAgICAgdGhlbWVWYXJzLFxuICAgICAgICAgICAgICAgIFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLkZPT1RFUl9CQVJfU1BBQ0lOR19CT1RUT01fS0VZXG4gICAgICAgICAgICApICtcbiAgICAgICAgICAgIHRoaXMuZ2V0TnVtYmVyVGhlbWVWYXJpYWJsZShcbiAgICAgICAgICAgICAgICB0aGVtZVZhcnMsXG4gICAgICAgICAgICAgICAgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuVE9QX0JBUl9GSUVMRF9IRUlHSFRfS0VZXG4gICAgICAgICAgICApO1xuXG4gICAgICAgIHRoaXMuc2V0Rm9vdGVySGVpZ2h0KHJlcyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZXRTZXR0aW5nc1dpZHRoKHdpZHRoKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzV2lkdGguZ2V0VmFsdWUoKSAhPT0gd2lkdGgpIHtcbiAgICAgICAgICAgIC8vIGl0IGlzIHB1Ymxpc2hpbmcgdGhpcyB2YWx1ZSB0byBhbGwgdGhlIHN1YnNjcmliZXJzIHRoYXQgaGF2ZSBhbHJlYWR5IHN1YnNjcmliZWQgdG8gdGhpcyBtZXNzYWdlXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzV2lkdGgubmV4dCh3aWR0aCk7XG4gICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgfVxuICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoXG4gICAgICAgICAgICBQZXBDdXN0b21pemF0aW9uU2VydmljZS5TRVRUSU5HU19XSURUSF9LRVksXG4gICAgICAgICAgICB3aWR0aCArIFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLlJFTV9TVFJJTkdcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBoaWRlU2V0dGluZ3MoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc2V0U2V0dGluZ3NXaWR0aCgwKTtcbiAgICB9XG5cbiAgICBzaG93U2V0dGluZ3MoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHRoZW1lVmFycyA9IHRoaXMuZ2V0VGhlbWVWYXJpYWJsZXMoKTtcblxuICAgICAgICBjb25zdCByZXMgPSB0aGlzLmdldE51bWJlclRoZW1lVmFyaWFibGUoXG4gICAgICAgICAgICB0aGVtZVZhcnMsXG4gICAgICAgICAgICBQZXBDdXN0b21pemF0aW9uU2VydmljZS5TSURFX0JBUl9XSURUSF9LRVlcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLnNldFNldHRpbmdzV2lkdGgocmVzKTtcbiAgICB9XG5cbiAgICBnZXRUb3BCYXJIZWlnaHQoKTogbnVtYmVyIHtcbiAgICAgICAgY29uc3QgdGhlbWVWYXJzID0gdGhpcy5nZXRUaGVtZVZhcmlhYmxlcygpO1xuXG4gICAgICAgIGNvbnN0IHJlcyA9XG4gICAgICAgICAgICB0aGlzLmdldE51bWJlclRoZW1lVmFyaWFibGUoXG4gICAgICAgICAgICAgICAgdGhlbWVWYXJzLFxuICAgICAgICAgICAgICAgIFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLlRPUF9CQVJfU1BBQ0lOR19UT1BfS0VZXG4gICAgICAgICAgICApICtcbiAgICAgICAgICAgIHRoaXMuZ2V0TnVtYmVyVGhlbWVWYXJpYWJsZShcbiAgICAgICAgICAgICAgICB0aGVtZVZhcnMsXG4gICAgICAgICAgICAgICAgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuVE9QX0JBUl9TUEFDSU5HX0JPVFRPTV9LRVlcbiAgICAgICAgICAgICkgK1xuICAgICAgICAgICAgdGhpcy5nZXROdW1iZXJUaGVtZVZhcmlhYmxlKFxuICAgICAgICAgICAgICAgIHRoZW1lVmFycyxcbiAgICAgICAgICAgICAgICBQZXBDdXN0b21pemF0aW9uU2VydmljZS5UT1BfQkFSX0ZJRUxEX0hFSUdIVF9LRVlcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG5cbiAgICBzZXRPbGRVc2VyVGhlbWUocmVzOiBhbnkpOiB2b2lkIHtcbiAgICAgICAgLy8gQWRkZWQgdXNlciB0aGVtZS5cbiAgICAgICAgY29uc3QgdGhlbWVPYmogPSB7XG4gICAgICAgICAgICBUaGVtZTogcmVzLlRoZW1lIHx8ICdkZWZhdWx0LXRoZW1lJyxcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnNlc3Npb25TZXJ2aWNlLnNldE9iamVjdChcbiAgICAgICAgICAgIFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLlVTRVJfVEhFTUUsXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeSh0aGVtZU9iailcbiAgICAgICAgKTtcblxuICAgICAgICBsZXQgc3Bpbm5lckNvbG9yO1xuICAgICAgICBsZXQgYnJhbmRpbmdGb250Q29sb3I7XG5cbiAgICAgICAgaWYgKHRoaXMuaXNMaWdodENvbG9yKHJlcy5CcmFuZGluZ01haW5Db2xvcikpIHtcbiAgICAgICAgICAgIHNwaW5uZXJDb2xvciA9IFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLkRFRkFVTFRfU1BJTk5FUl9DT0xPUjtcbiAgICAgICAgICAgIGJyYW5kaW5nRm9udENvbG9yID0gJyMyMjInO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3Bpbm5lckNvbG9yID0gcmVzLkJyYW5kaW5nTWFpbkNvbG9yO1xuICAgICAgICAgICAgYnJhbmRpbmdGb250Q29sb3IgPSBQZXBDdXN0b21pemF0aW9uU2VydmljZS5ERUZBVUxUX0JSQU5ESU5HX0NPTE9SO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY29sb3IgPSB7XG4gICAgICAgICAgICBCcmFuZGluZ1NlY29uZGFyeUNvbG9yOiByZXMuQnJhbmRpbmdTZWNvbmRhcnlDb2xvcixcbiAgICAgICAgICAgIEJyYW5kaW5nTWFpbkNvbG9yOiByZXMuQnJhbmRpbmdNYWluQ29sb3IsXG4gICAgICAgICAgICBCcmFuZGluZ0ZvbnRDb2xvcjogYnJhbmRpbmdGb250Q29sb3IsXG4gICAgICAgICAgICBTcGlubmVyQ29sb3I6IHNwaW5uZXJDb2xvcixcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnNlc3Npb25TZXJ2aWNlLnNldE9iamVjdChcbiAgICAgICAgICAgIFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLlVTRVJfQ09MT1IsXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeShjb2xvcilcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLmhhc0N1c3RvbUhlYWRlciA9XG4gICAgICAgICAgICByZXMuVG9wSGVhZGVyRmlsZXMgJiZcbiAgICAgICAgICAgICAgICByZXMuVG9wSGVhZGVyRmlsZXMubGVuZ3RoID4gMCAmJlxuICAgICAgICAgICAgICAgIHJlcy5Ub3BIZWFkZXJGaWxlc1swXSAhPT0gJydcbiAgICAgICAgICAgICAgICA/IHRydWVcbiAgICAgICAgICAgICAgICA6IGZhbHNlO1xuICAgICAgICB0aGlzLmhhc0N1c3RvbUhvbWVwYWdlID1cbiAgICAgICAgICAgIHJlcy5Vc2VyUm9sZSA9PT0gJ0J1eWVyJyAmJlxuICAgICAgICAgICAgcmVzLlRvcEhlYWRlckZpbGVzICYmXG4gICAgICAgICAgICByZXMuVG9wSGVhZGVyRmlsZXMubGVuZ3RoID4gMSAmJlxuICAgICAgICAgICAgcmVzLlRvcEhlYWRlckZpbGVzWzFdICE9PSAnJztcbiAgICB9XG5cbiAgICBpc0xlZ2FjeUNvbG9yKCk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBoID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLmdldFByb3BlcnR5VmFsdWUoXG4gICAgICAgICAgICBQZXBDdXN0b21pemF0aW9uU2VydmljZS5DT0xPUl9UT1BfSEVBREVSX0tFWSArICctaCdcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgcyA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKFxuICAgICAgICAgICAgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuQ09MT1JfVE9QX0hFQURFUl9LRVkgKyAnLXMnXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGwgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZShcbiAgICAgICAgICAgIFBlcEN1c3RvbWl6YXRpb25TZXJ2aWNlLkNPTE9SX1RPUF9IRUFERVJfS0VZICsgJy1sJ1xuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiAhKGggJiYgcyAmJiBsKTtcbiAgICB9XG5cbiAgICBnZXRMb2FkaW5nU3Bpbm5lckNvbG9yKCk6IHN0cmluZyB7XG4gICAgICAgIGxldCBzcGlubmVyQ29sb3IgPSAnJztcblxuICAgICAgICBpZiAodGhpcy5pc0xlZ2FjeUNvbG9yKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbG9yID0gdGhpcy5zZXNzaW9uU2VydmljZS5nZXRPYmplY3QoXG4gICAgICAgICAgICAgICAgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuVVNFUl9DT0xPUlxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgaWYgKGNvbG9yICYmIGNvbG9yLlNwaW5uZXJDb2xvcikge1xuICAgICAgICAgICAgICAgIHNwaW5uZXJDb2xvciA9IGNvbG9yLlNwaW5uZXJDb2xvcjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc3Bpbm5lckNvbG9yID0gUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuREVGQVVMVF9TUElOTkVSX0NPTE9SO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNwaW5uZXJDb2xvcjtcbiAgICB9XG5cbiAgICBnZXRCcmFuZGluZ01haW5Db2xvcigpOiBzdHJpbmcge1xuICAgICAgICBsZXQgYnJhbmRpbmdNYWluQ29sb3IgPSAnJztcblxuICAgICAgICBpZiAodGhpcy5pc0xlZ2FjeUNvbG9yKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbG9yID0gdGhpcy5zZXNzaW9uU2VydmljZS5nZXRPYmplY3QoXG4gICAgICAgICAgICAgICAgUGVwQ3VzdG9taXphdGlvblNlcnZpY2UuVVNFUl9DT0xPUlxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgaWYgKGNvbG9yICYmIGNvbG9yLkJyYW5kaW5nTWFpbkNvbG9yKSB7XG4gICAgICAgICAgICAgICAgYnJhbmRpbmdNYWluQ29sb3IgPSBjb2xvci5CcmFuZGluZ01haW5Db2xvcjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYnJhbmRpbmdNYWluQ29sb3IgPVxuICAgICAgICAgICAgICAgICAgICBQZXBDdXN0b21pemF0aW9uU2VydmljZS5ERUZBVUxUX0JSQU5ESU5HX0NPTE9SO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGJyYW5kaW5nTWFpbkNvbG9yO1xuICAgIH1cblxuICAgIGlzTGlnaHRDb2xvcihoZXhDb2xvcik6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoIWhleENvbG9yKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaXNCcmlnaHQgPSBmYWxzZTtcbiAgICAgICAgbGV0IHN1bSA9IDA7XG4gICAgICAgIGNvbnN0IGMgPSBoZXhDb2xvci5yZXBsYWNlKC9eIy8sICcnKTtcblxuICAgICAgICBzdW0gPSBwYXJzZUludChjWzBdICsgY1sxXSwgMTYpO1xuICAgICAgICBzdW0gKz0gcGFyc2VJbnQoY1syXSArIGNbM10sIDE2KTtcbiAgICAgICAgc3VtICs9IHBhcnNlSW50KGNbNF0gKyBjWzVdLCAxNik7XG5cbiAgICAgICAgaWYgKHN1bSA+IDM4Mi42KSB7XG4gICAgICAgICAgICAvLyBpdCdzIGJyaWdodCBjb2xvclxuICAgICAgICAgICAgaXNCcmlnaHQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGlzQnJpZ2h0O1xuICAgIH1cbn1cbiJdfQ==