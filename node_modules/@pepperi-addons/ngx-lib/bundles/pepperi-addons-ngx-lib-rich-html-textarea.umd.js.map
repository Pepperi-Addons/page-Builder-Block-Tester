{"version":3,"file":"pepperi-addons-ngx-lib-rich-html-textarea.umd.js","sources":["../../../projects/ngx-lib/rich-html-textarea/rich-html-textarea.component.ts","../../../projects/ngx-lib/rich-html-textarea/rich-html-textarea.module.ts","../../../projects/ngx-lib/rich-html-textarea/public-api.ts","../../../projects/ngx-lib/rich-html-textarea/pepperi-addons-ngx-lib-rich-html-textarea.ts"],"sourcesContent":["import {\n    Component,\n    OnInit,\n    Input,\n    Output,\n    EventEmitter,\n    ChangeDetectionStrategy,\n    OnDestroy,\n    ElementRef,\n    Renderer2,\n    TemplateRef,\n    ViewChild,\n    OnChanges,\n    SimpleChanges,\n} from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport {\n    PepLayoutType,\n    PepCustomizationService,\n    PepHorizontalAlignment,\n    DEFAULT_HORIZONTAL_ALIGNMENT,\n    PepRichHtmlTextareaField,\n} from '@pepperi-addons/ngx-lib';\nimport {\n    PepDialogService,\n    PepDialogData,\n} from '@pepperi-addons/ngx-lib/dialog';\nimport { SafeHtml, DomSanitizer } from '@angular/platform-browser';\n\nexport interface IPepRichHtmlTextareaToolbarOptions {\n    font?: any;\n    size?: any;\n    header?: any;\n    bold?: any;\n    italic?: any;\n    underline?: any;\n    strike?: any;\n    link?: any;\n    image?: any;\n    ordered?: any;\n    bullet?: any;\n    color?: any;\n    background?: any;\n    align?: any;\n}\n\n@Component({\n    selector: 'pep-rich-html-textarea',\n    templateUrl: './rich-html-textarea.component.html',\n    styleUrls: ['./rich-html-textarea.component.scss'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class PepRichHtmlTextareaComponent\n    implements OnInit, OnChanges, OnDestroy {\n    @Input() key = '';\n    @Input() value = '';\n    @Input() label = '';\n    @Input() mandatory = false;\n    @Input() disabled = false;\n    @Input() readonly = false;\n    @Input() maxFieldCharacters: number;\n    @Input() xAlignment: PepHorizontalAlignment = DEFAULT_HORIZONTAL_ALIGNMENT;\n\n    private _rowSpan = 1;\n    @Input()\n    set rowSpan(value) {\n        this._rowSpan = value;\n        this.setFieldHeight();\n    }\n    get rowSpan(): number {\n        return this._rowSpan;\n    }\n\n    private _visible = true;\n    @Input()\n    set visible(visible: boolean) {\n        this._visible = visible;\n        if (visible) {\n            this.renderer.removeClass(\n                this.element.nativeElement,\n                'hidden-element'\n            );\n        } else {\n            this.renderer.addClass(\n                this.element.nativeElement,\n                'hidden-element'\n            );\n        }\n    }\n    get visible(): boolean {\n        return this._visible;\n    }\n\n    controlType = 'richhtmltextarea';\n\n    @Input() form: FormGroup = null;\n    @Input() isActive = false;\n    @Input() showTitle = true;\n\n    private _layoutType: PepLayoutType = 'form';\n    @Input()\n    set layoutType(value: PepLayoutType) {\n        this._layoutType = value;\n        this.setFieldHeight();\n    }\n    get layoutType(): PepLayoutType {\n        return this._layoutType;\n    }\n\n    @Input() inlineMode = false;\n\n    protected _toolbarOptions: IPepRichHtmlTextareaToolbarOptions;\n    @Input()\n    get toolbarOptions(): IPepRichHtmlTextareaToolbarOptions {\n        return this._toolbarOptions;\n    }\n    set toolbarOptions(options: IPepRichHtmlTextareaToolbarOptions) {\n        if (options) {\n            this._toolbarOptions = options;\n        }\n    }\n\n    @Output()\n    valueChange: EventEmitter<string> = new EventEmitter<string>();\n\n    @ViewChild('richTextEditorDialogTemplate', { read: TemplateRef })\n    richTextEditorDialogTemplate: TemplateRef<any>;\n    quillContent = '';\n    quillContentDialog = '';\n\n    fieldHeight = '';\n    standAlone = false;\n    active = false;\n\n    constructor(\n        private sanitizer: DomSanitizer,\n        private dialogService: PepDialogService,\n        private customizationService: PepCustomizationService,\n        private renderer: Renderer2,\n        private element: ElementRef\n    ) {\n        this.toolbarOptions = this.getDefaultToolbarOptions();\n    }\n\n    private setFieldHeight(): void {\n        this.fieldHeight = this.customizationService.calculateFieldHeight(\n            this.layoutType,\n            this.rowSpan,\n            this.standAlone\n        );\n    }\n\n    private setDefaultForm(): void {\n        const pepField = new PepRichHtmlTextareaField({\n            key: this.key,\n            value: this.value,\n            mandatory: this.mandatory,\n            readonly: this.readonly,\n            disabled: this.disabled,\n            maxFieldCharacters: this.maxFieldCharacters,\n        });\n        this.form = this.customizationService.getDefaultFromGroup(pepField);\n    }\n\n    ngOnInit(): void {\n        if (this.form === null) {\n            this.standAlone = true;\n            this.setFieldHeight();\n            this.setDefaultForm();\n\n            this.renderer.addClass(\n                this.element.nativeElement,\n                PepCustomizationService.STAND_ALONE_FIELD_CLASS_NAME\n            );\n        }\n\n        this.quillContent = this.value;\n    }\n\n    ngOnChanges(): void {\n        if (this.standAlone) {\n            this.setDefaultForm();\n        }\n    }\n\n    ngOnDestroy(): void {\n        //\n    }\n\n    getDefaultToolbarOptions(): IPepRichHtmlTextareaToolbarOptions {\n        return {\n            font: false,\n            size: false,\n            header: true,\n            bold: true,\n            italic: true,\n            underline: true,\n            strike: false,\n            link: true,\n            image: true,\n            ordered: true,\n            bullet: true,\n            color: true,\n            background: false,\n            align: true,\n        };\n    }\n\n    changeValue(value: any): void {\n        if (value !== this.value) {\n            this.value = value;\n            this.quillContent = value;\n            this.customizationService.updateFormFieldValue(\n                this.form,\n                this.key,\n                value\n            );\n            this.valueChange.emit(value);\n        }\n    }\n\n    cardTemplateClicked(event: any): void {\n        this.openDialog();\n    }\n\n    openDialog(): void {\n        const config = this.dialogService.getDialogConfig(\n            {\n                // minWidth: '50vw',\n                // maxWidth: '90vw',\n                // maxHeight: '90vh',\n            },\n            'large'\n        );\n\n        // If disabled open regular modal as html mode.\n        if (this.disabled || this.readonly) {\n            const data = new PepDialogData({\n                title: this.label,\n                content: this.quillContent,\n                showFooter: false,\n            });\n            this.dialogService.openDefaultDialog(data, config);\n        } else {\n            this.quillContentDialog = this.quillContent;\n            const dialogRef = this.dialogService.openDialog(\n                this.richTextEditorDialogTemplate,\n                {},\n                config\n            );\n\n            dialogRef.afterClosed().subscribe((value) => {\n                if (value !== undefined && value !== null) {\n                    this.changeValue(value);\n                }\n            });\n        }\n    }\n\n    // Init quillContent in case that there are html tags...\n    onEditorCreated(quill: any, inDialog: boolean): void {\n        if (!inDialog) {\n            this.quillContent = quill.getText();\n        }\n    }\n\n    onContentChanged(obj: any, inDialog: boolean): void {\n        if (inDialog) {\n            this.quillContentDialog = obj.html;\n        } else {\n            this.quillContent = obj.html;\n        }\n    }\n\n    onBlur(obj: any, inDialog: boolean): void {\n        if (!inDialog) {\n            this.active = false;\n            this.changeValue(this.quillContent);\n        }\n    }\n\n    onFocus(obj: any, inDialog: boolean): void {\n        if (!inDialog) {\n            this.active = true;\n        }\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule, FormsModule } from '@angular/forms';\n\nimport { MatCommonModule } from '@angular/material/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatDialogModule } from '@angular/material/dialog';\n\nimport { PepNgxLibModule } from '@pepperi-addons/ngx-lib';\nimport {\n    PepIconModule,\n    PepIconRegistry,\n    pepIconSystemEdit,\n    pepIconSystemClose,\n} from '@pepperi-addons/ngx-lib/icon';\nimport { PepTextboxIconModule } from '@pepperi-addons/ngx-lib/textbox-icon';\nimport { PepFieldTitleModule } from '@pepperi-addons/ngx-lib/field-title';\nimport { PepDialogModule } from '@pepperi-addons/ngx-lib/dialog';\n\nimport { QuillModule } from 'ngx-quill';\n\nimport { PepRichHtmlTextareaComponent } from './rich-html-textarea.component';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        ReactiveFormsModule,\n        FormsModule,\n        // Material modules,\n        MatCommonModule,\n        MatButtonModule,\n        MatFormFieldModule,\n        MatInputModule,\n        MatMenuModule,\n        MatIconModule,\n        MatDialogModule,\n        // External modules\n        QuillModule.forRoot(),\n        // ngx-lib modules\n        PepNgxLibModule,\n        PepIconModule,\n        PepFieldTitleModule,\n        PepTextboxIconModule,\n        PepDialogModule,\n    ],\n    exports: [PepRichHtmlTextareaComponent],\n    declarations: [PepRichHtmlTextareaComponent],\n})\nexport class PepRichHtmlTextareaModule {\n    constructor(private pepIconRegistry: PepIconRegistry) {\n        this.pepIconRegistry.registerIcons([\n            pepIconSystemEdit,\n            pepIconSystemClose,\n        ]);\n    }\n}\n","/*\n * Public API Surface of ngx-lib/rich-html-textarea\n */\nexport * from './rich-html-textarea.module';\nexport * from './rich-html-textarea.component';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["DEFAULT_HORIZONTAL_ALIGNMENT","EventEmitter","PepRichHtmlTextareaField","PepCustomizationService","PepDialogData","Component","ChangeDetectionStrategy","DomSanitizer","PepDialogService","Renderer2","ElementRef","Input","Output","ViewChild","TemplateRef","pepIconSystemEdit","pepIconSystemClose","NgModule","CommonModule","ReactiveFormsModule","FormsModule","MatCommonModule","MatButtonModule","MatFormFieldModule","MatInputModule","MatMenuModule","MatIconModule","MatDialogModule","QuillModule","PepNgxLibModule","PepIconModule","PepFieldTitleModule","PepTextboxIconModule","PepDialogModule","PepIconRegistry"],"mappings":"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"}