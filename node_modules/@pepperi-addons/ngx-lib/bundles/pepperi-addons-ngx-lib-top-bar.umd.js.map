{"version":3,"file":"pepperi-addons-ngx-lib-top-bar.umd.js","sources":["../../../projects/ngx-lib/top-bar/top-bar.component.ts","../../../projects/ngx-lib/top-bar/top-bar.module.ts","../../../projects/ngx-lib/top-bar/public-api.ts","../../../projects/ngx-lib/top-bar/pepperi-addons-ngx-lib-top-bar.ts"],"sourcesContent":["import {\n    AfterContentInit,\n    ChangeDetectorRef,\n    ContentChild,\n    ElementRef,\n    OnDestroy,\n    ViewChild,\n} from '@angular/core';\nimport {\n    AfterViewInit,\n    Component,\n    EventEmitter,\n    Input,\n    Output,\n} from '@angular/core';\nimport {\n    PepCustomizationService,\n    PepLayoutService,\n    PepScreenSizeType,\n} from '@pepperi-addons/ngx-lib';\nimport { PepSearchComponent } from '@pepperi-addons/ngx-lib/search';\nimport {\n    PepListActionsComponent,\n    PepListChooserComponent,\n    PepListSortingComponent,\n    PepListTotalComponent,\n    PepListViewsComponent,\n} from '@pepperi-addons/ngx-lib/list';\nimport { PepMenuStateType } from '@pepperi-addons/ngx-lib/menu';\nimport {\n    IPepSearchStateChangeEvent,\n    PepSearchStateType,\n} from '@pepperi-addons/ngx-lib/search';\nimport {\n    IPepFooterStateChangeEvent,\n    PepFooterStateType,\n} from './top-bar.model';\n\n@Component({\n    selector: 'pep-top-bar',\n    templateUrl: './top-bar.component.html',\n    styleUrls: ['./top-bar.component.scss'],\n})\nexport class PepTopBarComponent implements AfterViewInit, AfterContentInit, OnDestroy {\n    @Input() inline = false;\n    @Input() title: string = null;\n\n    @Output()\n    footerStateChange: EventEmitter<IPepFooterStateChangeEvent> = new EventEmitter<IPepFooterStateChangeEvent>();\n\n    @ViewChild('footerStartContent') footerStartContent: ElementRef;\n    @ViewChild('footerEndContent') footerEndContent: ElementRef;\n\n    @ContentChild(PepSearchComponent) searchComp: PepSearchComponent;\n    @ContentChild(PepListActionsComponent)\n    listActionsComp: PepListActionsComponent;\n    @ContentChild(PepListChooserComponent)\n    listChooserComp: PepListChooserComponent;\n    @ContentChild(PepListTotalComponent) listTotalComp: PepListTotalComponent;\n    @ContentChild(PepListSortingComponent)\n    listSortingComp: PepListSortingComponent;\n    @ContentChild(PepListViewsComponent) listViewsComp: PepListViewsComponent;\n\n    hasFooterContent = null;\n    isHidden = true;\n    screenSize: PepScreenSizeType;\n    // listActionsIsVisible = false;\n    searchState: PepSearchStateType;\n    searchIsOpenAndSmallDevice = false;\n    footerState: PepFooterStateType;\n    PepScreenSizeType = PepScreenSizeType;\n\n    constructor(\n        public customizationService: PepCustomizationService,\n        public layoutService: PepLayoutService,\n        private cdRef: ChangeDetectorRef\n    ) { }\n\n    ngAfterViewInit(): void {\n        if (!this.inline) {\n            this.hasFooterContent =\n                this.footerStartContent?.nativeElement?.children?.length > 0 ||\n                this.footerEndContent?.nativeElement?.children?.length > 0;\n        }\n\n        this.layoutService.onResize$.subscribe((size: PepScreenSizeType) => {\n            this.screenSize = size;\n            this.setSearchIsOpenAndSmallDevice();\n\n            if (!this.inline) {\n                this.setFooterState();\n            }\n        });\n\n        this.isHidden = false;\n        this.cdRef.detectChanges();\n    }\n\n    ngAfterContentInit() {\n        if (this.searchComp) {\n            this.searchComp.stateChange\n                .subscribe(\n                    (searchStateChangeEvent: IPepSearchStateChangeEvent) => {\n                        this.searchState = searchStateChangeEvent.state;\n                        this.setSearchIsOpenAndSmallDevice();\n                    }\n                )\n                .unsubscribe();\n        }\n    }\n\n    ngOnDestroy(): void {\n        if (this.customizationService) {\n            this.customizationService.hideFooter();\n        }\n    }\n\n    private setSearchIsOpenAndSmallDevice(): void {\n        // check if search is open and the device size is small or extra small\n        this.searchIsOpenAndSmallDevice =\n            this.screenSize > PepScreenSizeType.SM &&\n            this.searchState === 'open';\n    }\n\n    private setFooterState() {\n        const newFooterState: PepFooterStateType =\n            this.hasFooterContent && this.screenSize >= PepScreenSizeType.MD\n                ? 'visible'\n                : 'hidden';\n\n        if (this.footerState !== newFooterState) {\n            this.footerState = newFooterState;\n            this.cdRef.detectChanges();\n            this.footerStateChange.emit({ state: this.footerState });\n\n            if (this.footerState === 'visible') {\n                this.customizationService.showFooter()\n            } else {\n                this.customizationService.hideFooter()\n            }\n        }\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { MatCommonModule } from '@angular/material/core';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatIconModule } from '@angular/material/icon';\n\nimport { PepNgxLibModule } from '@pepperi-addons/ngx-lib';\nimport { PepMenuModule } from '@pepperi-addons/ngx-lib/menu';\nimport {\n    PepIconModule,\n    PepIconRegistry,\n    pepIconSystemMenu,\n    pepIconSystemEdit,\n} from '@pepperi-addons/ngx-lib/icon';\nimport { PepSearchModule } from '@pepperi-addons/ngx-lib/search';\n\nimport { PepTopBarComponent } from './top-bar.component';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        // Material modules,\n        MatCommonModule,\n        MatMenuModule,\n        MatIconModule,\n        // ngx-lib modules\n        PepNgxLibModule,\n        PepMenuModule,\n        PepIconModule,\n        PepSearchModule,\n    ],\n    exports: [PepTopBarComponent],\n    declarations: [PepTopBarComponent],\n})\nexport class PepTopBarModule {\n    constructor(private pepIconRegistry: PepIconRegistry) {\n        this.pepIconRegistry.registerIcons([\n            pepIconSystemMenu,\n            pepIconSystemEdit,\n        ]);\n    }\n}\n","/*\n * Public API Surface of ngx-lib/top-bar\n */\nexport * from './top-bar.module';\nexport * from './top-bar.component';\nexport * from './top-bar.model';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["EventEmitter","PepScreenSizeType","Component","PepCustomizationService","PepLayoutService","ChangeDetectorRef","Input","Output","ViewChild","ContentChild","PepSearchComponent","PepListActionsComponent","PepListChooserComponent","PepListTotalComponent","PepListSortingComponent","PepListViewsComponent","pepIconSystemMenu","pepIconSystemEdit","NgModule","CommonModule","MatCommonModule","MatMenuModule","MatIconModule","PepNgxLibModule","PepMenuModule","PepIconModule","PepSearchModule","PepIconRegistry"],"mappings":"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"}